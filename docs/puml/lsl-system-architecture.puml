@startuml lsl-system-architecture-compact
!include _standard-style.puml

title LSL System Architecture - Compact Layout

skinparam packageStyle rectangle
skinparam defaultTextAlignment center

package "LSL System Core" {
  
  rectangle "Global LSL Coordinator" as GLC #lightblue {
    component "Session Registry" as Registry
    component "Health Monitor" as Health  
    component "Process Manager" as ProcessMgr
    component "Cleanup Service" as Cleanup
    Registry -- Health
    Health -- ProcessMgr 
    ProcessMgr -- Cleanup
  }
}

package "Real-Time Processing" {
  
  rectangle "Enhanced Transcript Monitor" as ETM #lightgreen {
    component "Real-time Classifier" as RTClassifier
    component "Exchange Parser" as Parser
    component "Content Router" as Router
    component "Session Writer" as Writer
    RTClassifier -- Parser
    Parser -- Router
    Router -- Writer
  }
}

package "Classification Engine" {
  
  rectangle "Three-Layer Classifier" as RCC #lightyellow {
    component "1. PathAnalyzer" as L1
    component "2. KeywordMatcher" as L2  
    component "3. SemanticAnalyzer" as L3
    L1 --> L2 : "no file ops"
    L2 --> L3 : "low confidence"
  }
}

package "Batch Processing" {
  
  rectangle "LSL Generation Scripts" as LSLGen #lightcoral {
    component "Transcript Scanner" as Scanner
    component "Parallel Workers (5x)" as Parallel
    component "Fast-Path Classifier" as FastPath
    component "Session Generator" as Generator
    Scanner --> Parallel
    Parallel --> FastPath
    FastPath --> Generator
  }
}

package "Data & Storage" {
  database "Session Registry" as SessionDB #lightsalmon
  database "Classification Data" as KeywordDB #lightsteelblue  
  folder "Input Sources" as Sources #lightgray
}

package "Output Destinations" {
  folder "Coding Project" as CodingOut #wheat
  folder "Target Projects" as ProjectOut #lightcyan
}

' Main connections
GLC --> ETM : coordinates
ETM --> RCC : classifies with
RCC --> KeywordDB : uses data
ETM --> CodingOut : routes coding
ETM --> ProjectOut : routes project

' Batch processing
LSLGen --> Sources : scans
LSLGen --> RCC : batch classify
LSLGen --> CodingOut : generates
LSLGen --> ProjectOut : generates

' Coordinator management
GLC --> SessionDB : maintains
Health --> ETM : monitors
ProcessMgr --> ETM : spawns/restarts

' Notes
note bottom of GLC
  **Bulletproof Coordination**
  • Health monitoring (30s)
  • Automatic recovery
  • Cross-project tracking
end note

note bottom of RCC
  **Smart Classification**
  • File ops (100% accuracy)
  • Keywords (fast)
  • Semantic (selective)
  • 200x performance
end note

note bottom of LSLGen
  **Parallel Processing**
  • Local/Foreign modes
  • 5 concurrent workers
  • Fast-path optimization
end note

@enduml