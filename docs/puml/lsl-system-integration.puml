@startuml lsl-system-integration
!include _standard-style.puml

title LSL System Integration with Claude Code

actor "Developer" as dev
participant "Claude Code" as claude
participant "Status Line" as status
participant "LSL Monitor" as monitor
participant "Classifier" as classifier
participant "Session Files" as files

== Real-time Session Monitoring ==

dev -> claude : starts conversation
activate claude

claude -> monitor : session begins
activate monitor

loop for each exchange
  claude -> monitor : new exchange
  monitor -> classifier : classify content
  activate classifier
  
  classifier -> classifier : PathAnalyzer\nâ†’ KeywordMatcher\nâ†’ SemanticAnalyzer
  classifier --> monitor : classification result
  deactivate classifier
  
  monitor -> files : append to session file
  monitor -> status : update coding indicator
  status --> dev : visual feedback
end

== Batch Processing Mode ==

dev -> claude : request LSL regeneration
claude -> monitor : start batch mode
monitor -> classifier : fast-path enabled\n(skip semantic analysis)

loop for each transcript file
  monitor -> classifier : classify exchanges
  classifier --> monitor : results (keyword + path only)
  monitor -> files : generate session files
end

monitor --> claude : completion report
claude --> dev : "âœ… LSL Generation Complete!\nğŸ“Š Files: 120, Exchanges: 2,130\nâš¡ Time: 5.2s"

== Status Line Updates ==

note over status
**Status Line Indicators:**
ğŸ“‹1530-1630 - Current session
ğŸŸ 1530-1630(5min) - Window closing
â†’coding - Coding activity detected
ğŸ›¡ï¸8.5 - Constraint compliance
ğŸ”EX - Experimentation mode
ğŸ§ âœ… - Semantic analysis ready
end note

@enduml