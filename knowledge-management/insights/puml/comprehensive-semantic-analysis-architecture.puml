@startuml
!include /Users/q284340/Agentic/coding/docs/puml/_standard-style.puml

title ComprehensiveSemanticAnalysis Architecture

package "MCP Server Layer" {
    component [MCP Server Semantic Analysis] <<api>> as MCPServer
    component [MCP Tools Interface] <<api>> as MCPTools
}

package "Core Implementation" {
    component [Knowledge Management Core] <<core>> as KnowledgeCore
    component [UKB Unified Library] <<core>> as UKBLib
    component [Semantic Analysis Engine] <<core>> as SemanticEngine
}

package "Storage Layer" {
    component [Graphology Graph Engine] <<storage>> as GraphEngine
    component [LevelDB Storage] <<storage>> as LevelDB
    database ".data/knowledge-graph" as KnowledgeDB
}

package "Source Locations" {
    folder "src/knowledge-management" as SrcKM
    folder "lib/ukb-unified" as LibUKB
    folder "integrations/mcp-server-semantic-analysis/src" as IntegrationSrc
}

' Relationships
MCPServer --> MCPTools : "exposes tools"
MCPTools --> SemanticEngine : "delegates analysis"
SemanticEngine --> KnowledgeCore : "uses"
SemanticEngine --> UKBLib : "leverages"
KnowledgeCore --> GraphEngine : "manages graph data"
GraphEngine --> LevelDB : "persists to"
LevelDB --> KnowledgeDB : "stores in"

' Source mapping
SrcKM ..> KnowledgeCore : "implements"
LibUKB ..> UKBLib : "implements"
IntegrationSrc ..> MCPServer : "implements"

note right of KnowledgeDB
  Persistent storage using
  Graphology + LevelDB
  (shared-memory.json removed)
end note

note top of SemanticEngine
  ComprehensiveSemanticAnalysis
  MCPAgent implementation
end note

@enduml