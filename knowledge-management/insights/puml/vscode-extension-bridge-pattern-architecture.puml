@startuml
!include /Users/q284340/Agentic/coding/docs/puml/_standard-style.puml

title VSCode Extension Bridge Pattern Architecture

package "VSCode Extension Layer" {
    component [vkb Command] <<api>>
    component [graph-sync Command] <<api>>
    component [VkbApiClient] <<core>>
}

package "Core Services" {
    component [GraphDatabaseService] <<core>>
    component [GraphDatabaseAdapter] <<core>>
    component [PersistenceAgent] <<agent>>
    component [GraphKnowledgeExporter] <<agent>>
}

package "Storage Layer" {
    component [Graphology] <<storage>>
    component [LevelDB] <<storage>>
    folder ".data/knowledge-graph" as KnowledgeGraph <<storage>>
    folder ".data/knowledge-export" as KnowledgeExport <<storage>>
}

package "Integration Layer" {
    component [MCP Server] <<api>> #lightblue
    component [Semantic Analysis] <<core>> #lightblue
    folder "integrations/mcp-server-semantic-analysis/src" as MCPIntegration <<storage>>
}

' Main flow relationships
[vkb Command] --> [VkbApiClient] : visualization
[graph-sync Command] --> [VkbApiClient] : synchronization
[VkbApiClient] --> [GraphDatabaseService] : API calls

[GraphDatabaseService] --> [GraphDatabaseAdapter] : data operations
[GraphDatabaseAdapter] --> [Graphology] : graph operations
[GraphDatabaseAdapter] --> [LevelDB] : persistence

[Graphology] --> KnowledgeGraph : stores data
[LevelDB] --> KnowledgeGraph : persists to

[PersistenceAgent] --> KnowledgeGraph : validates data
[GraphKnowledgeExporter] --> KnowledgeGraph : reads from
[GraphKnowledgeExporter] --> KnowledgeExport : auto-sync JSON exports

' MCP Integration
[MCP Server] --> [Semantic Analysis] : enables
[Semantic Analysis] --> MCPIntegration : processes
MCPIntegration --> [GraphDatabaseService] : knowledge extraction

note bottom : VSCodeExtensionBridgePattern enables knowledge graph operations\nthrough VSCode commands with automated semantic analysis\nand persistent storage using Graphology + LevelDB architecture

@enduml