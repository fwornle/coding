@startuml
!include /Users/q284340/Agentic/coding/docs/puml/_standard-style.puml

participant GraphDatabase as "GraphDatabase (.data/knowledge-graph)"
participant GraphDatabaseService as "GraphDatabaseService"
participant GraphKnowledgeExporter as "GraphKnowledgeExporter"
participant PersistenceAgent as "PersistenceAgent"
participant GraphDatabaseAdapter as "GraphDatabaseAdapter"
participant MCPTools as "MCP Tools"
participant VKBCommand as "vkb Command"
participant KnowledgeExport as ".data/knowledge-export (JSON)"

GraphDatabaseService ->> GraphDatabase: Initialize Graph Database
GraphDatabaseAdapter ->> GraphDatabase: Adapt Data for Graph Database
GraphKnowledgeExporter ->> GraphDatabase: Export Knowledge
GraphKnowledgeExporter ->> KnowledgeExport: Export to JSON
PersistenceAgent ->> GraphDatabase: Manage Persistence Operations

MCPTools ->> GraphDatabaseService: Perform Knowledge Operations
VKBCommand ->> GraphDatabase: Visualize Knowledge Graph

alt Redaction Patterns
    GraphDatabaseService ->> GraphDatabase: Apply Redaction Patterns
    GraphDatabaseService ->> GraphDatabase: Protect Sensitive Information (AWS access keys)
end

loop Data Retrieval and Storage
    GraphDatabaseService ->> GraphDatabase: Retrieve Data
    GraphDatabaseService ->> GraphDatabase: Store Data
end

@enduml