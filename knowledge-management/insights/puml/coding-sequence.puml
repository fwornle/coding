@startuml
!include /Users/q284340/Agentic/coding/docs/puml/_standard-style.puml

participant "Knowledge Management\n(src/knowledge-management)" as KM
participant "UKB Unified Library\n(lib/ukb-unified)" as UKB
participant "MCP Semantic Analysis\n(integrations/mcp-server-semantic-analysis/src)" as MCP
participant "Graphology + LevelDB\n(.data/knowledge-graph)" as GraphDB
participant "JSON Export\n(.data/knowledge-export)" as JSONExport

== Coding Project Initialization ==
KM -> UKB: Initialize coding project
UKB -> GraphDB: Setup knowledge storage
GraphDB --> UKB: Storage ready
UKB --> KM: Project initialized

== Semantic Analysis Flow ==
MCP -> UKB: Request semantic analysis
UKB -> KM: Process coding entities
KM -> GraphDB: Store knowledge nodes
GraphDB --> KM: Nodes stored
KM --> UKB: Analysis complete
UKB --> MCP: Return semantic results

== Knowledge Management ==
loop Continuous Sync
    GraphDB -> JSONExport: Auto-sync knowledge data
    JSONExport --> GraphDB: Sync complete
end

== Data Access ==
alt Knowledge Query
    KM -> GraphDB: Query knowledge graph
    GraphDB --> KM: Return graph data
else Export Request
    KM -> JSONExport: Access exported data
    JSONExport --> KM: Return JSON data
end

note over GraphDB
  Legacy shared-memory.json
  has been REMOVED
  Replaced with Graphology + LevelDB
end note

note over JSONExport
  Auto-synced exports
  from GraphDB for
  external access
end note

@enduml