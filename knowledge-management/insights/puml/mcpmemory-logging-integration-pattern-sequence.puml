@startuml
!include /Users/q284340/Agentic/coding/docs/puml/_standard-style.puml

participant MCPMemoryLoggingIntegrationPattern as "MCPMemoryLoggingIntegrationPattern"
participant GraphDatabaseService as "GraphDatabaseService"
participant GraphKnowledgeExporter as "GraphKnowledgeExporter"
participant PersistenceAgent as "PersistenceAgent"
participant VkbApiClient as "VkbApiClient"
participant Graphology as "Graphology"
participant LevelDB as "LevelDB"
participant VkbCommand as "VkbCommand"
participant MCPTools as "MCPTools"

MCPMemoryLoggingIntegrationPattern ->> GraphDatabaseService : Request Knowledge Storage
GraphDatabaseService ->> Graphology : Store Knowledge in Graphology
Graphology ->> LevelDB : Use LevelDB for Storage
LevelDB ->> Graphology : Store Knowledge

GraphDatabaseService ->> GraphKnowledgeExporter : Request Knowledge Export
GraphKnowledgeExporter ->> .data/knowledge-export : Export Knowledge to File

MCPMemoryLoggingIntegrationPattern ->> PersistenceAgent : Interact with Graph Database
PersistenceAgent ->> GraphDatabaseService : Perform Knowledge Operations
GraphDatabaseService ->> VkbApiClient : Visualize Knowledge with Vkb

VkbApiClient ->> VkbCommand : Use Vkb Command for Visualization
VkbCommand ->> MCPTools : Perform Knowledge Operations with MCP Tools
MCPTools ->> MCPMemoryLoggingIntegrationPattern : Update Knowledge Entity

alt Successful Knowledge Storage
    GraphDatabaseService ->> MCPMemoryLoggingIntegrationPattern : Confirm Knowledge Stored
else Knowledge Storage Failed
    GraphDatabaseService ->> MCPMemoryLoggingIntegrationPattern : Report Storage Error
end

@enduml