@startuml
!include /Users/q284340/Agentic/coding/docs/puml/_standard-style.puml

actor Developer as dev
actor "VS Code Extension" as vscode
actor "MCP Server" as mcp
actor "Knowledge System" as ks

package "VSCodeExtensionBridgePattern System" {
    usecase "Initialize Graph Database" as init
    usecase "Store Knowledge Entities" as store
    usecase "Query Graph Data" as query
    usecase "Export to JSON" as export
    usecase "Sync Data" as sync
    usecase "Manage Persistence" as persist
    
    package "Core Services" {
        usecase "Adapt Database Interface" as adapt
        usecase "Process Graph Operations" as process
        usecase "Handle Semantic Analysis" as semantic
    }
    
    package "Data Storage" {
        usecase "Store in LevelDB" as leveldb
        usecase "Maintain Graph Structure" as graphology
        usecase "Auto-sync Exports" as autosync
    }
}

dev --> init : "Set up system"
dev --> store : "Add knowledge"
dev --> query : "Retrieve data"

vscode --> adapt : "Bridge operations"
vscode --> process : "Execute commands"

mcp --> semantic : "Analyze semantics"
mcp --> sync : "Synchronize data"

ks --> persist : "Ensure data integrity"
ks --> export : "Generate exports"

init ..> adapt : <<include>>
store ..> leveldb : <<include>>
store ..> graphology : <<include>>
query ..> process : <<include>>
export ..> autosync : <<include>>
sync ..> persist : <<include>>

note right of export
  Exports stored at:
  .data/knowledge-export
end note

note right of leveldb
  Graph data stored at:
  .data/knowledge-graph
end note

note top of "VSCodeExtensionBridgePattern System"
  Components: GraphDatabaseService,
  GraphDatabaseAdapter, PersistenceAgent
  
  Locations: src/knowledge-management,
  lib/ukb-unified, integrations/mcp-server-semantic-analysis/src
end note

@enduml