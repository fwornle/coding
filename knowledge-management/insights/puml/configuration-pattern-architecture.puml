@startuml
!include /Users/q284340/Agentic/coding/docs/puml/_standard-style.puml

package "Knowledge Management Core" {
  component [ConfigurationPattern] <<core>> as CP
  component [KnowledgeManager] <<core>> as KM
  component [PatternExtractor] <<core>> as PE
}

package "Storage Layer" {
  component [Graphology] <<storage>> as GR
  component [LevelDB] <<storage>> as LDB
  database ".data/knowledge-graph" <<storage>> as KGD
}

package "Export & Sync" {
  component [JSONExporter] <<api>> as JE
  folder ".data/knowledge-export" <<storage>> as KED
  component [AutoSyncService] <<core>> as ASS
}

package "Implementation Locations" {
  component [src/knowledge-management] <<module>> as SKM
  component [lib/ukb-unified] <<module>> as LUU
  component [integrations/mcp-server-semantic-analysis] <<module>> as MCP
}

package "Legacy (Removed)" {
  component [shared-memory.json] <<deprecated>> as SMJ
}

' Core relationships
CP --> KM : "managed by"
KM --> PE : "uses"
CP --> GR : "stored in"
GR --> LDB : "persisted via"
LDB --> KGD : "writes to"

' Export flow
KM --> JE : "exports via"
JE --> KED : "outputs to"
ASS --> KGD : "syncs from"
ASS --> KED : "auto-updates"

' Implementation relationships
CP --> SKM : "implemented in"
CP --> LUU : "implemented in"
CP --> MCP : "implemented in"

' Legacy removal
SMJ -[#red]-> CP : "replaced by\nGraphology+LevelDB"

note top of CP
  TransferablePattern extracted from codebase analysis
  Enables reusable knowledge entity storage
end note

note bottom of KGD
  Primary knowledge storage using
  Graphology + LevelDB architecture
end note

@enduml