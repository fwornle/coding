@startuml
!include /Users/q284340/Agentic/coding/docs/puml/_standard-style.puml

package "Configuration Pattern Architecture" {
    
    package "Core Implementation" {
        component [ConfigurationPattern] <<agent>> as cp
        component [Environment Variables] <<config>> as env
        component [Project Config Files] <<config>> as projconfig
    }
    
    package "Knowledge Management Layer" {
        component [src/knowledge-management] <<core>> as km
        component [lib/ukb-unified] <<core>> as ukb
    }
    
    package "MCP Integration" {
        component [integrations/mcp-server-semantic-analysis] <<api>> as mcpserver
        component [MCP Agent Tools] <<agent>> as mcptools
    }
    
    package "Storage Layer" {
        component [Graphology Engine] <<storage>> as graphology
        component [LevelDB] <<storage>> as leveldb
        database ".data/knowledge-graph" <<storage>> as kgdb
    }
    
    package "Export Layer" {
        component [JSON Exporter] <<core>> as jsonexp
        database ".data/knowledge-export" <<storage>> as exportdb
        note right of exportdb : Auto-synced from GraphDB
    }
}

' Configuration relationships
cp --> env : reads configuration
cp --> projconfig : loads settings

' Core implementation relationships
cp --> km : implements pattern
cp --> ukb : unified knowledge base
km --> ukb : manages knowledge

' MCP integration relationships
cp --> mcpserver : semantic analysis
mcpserver --> mcptools : agent coordination

' Storage relationships
km --> graphology : graph operations
graphology --> leveldb : persistent storage
leveldb --> kgdb : knowledge graph data

' Export relationships
kgdb --> jsonexp : exports data
jsonexp --> exportdb : synchronized output

' Cross-layer relationships
mcpserver --> km : pattern extraction
ukb --> kgdb : stores patterns

note top of cp : Pattern extracted from codebase analysis\nand stored as reusable knowledge entity

note bottom of kgdb : Replaced shared-memory.json\nwith GraphDB + LevelDB architecture

@enduml