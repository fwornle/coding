@startuml
!include /Users/q284340/Agentic/coding/docs/puml/_standard-style.puml

title API Refactoring Pattern Analysis

participant "Client" as C
participant "Legacy API" as LA
participant "Refactoring Engine" as RE
participant "Pattern Analyzer" as PA
participant "New API" as NA

note over PA : ApiRefactoringPattern\nCategory: Implementation\nSignificance: 3/5\nOccurrences: 5 (decreasing trend)

C -> LA : Initial API Request
activate LA

LA -> RE : Trigger Refactoring Process
activate RE

RE -> PA : Analyze Current Implementation
activate PA

PA -> PA : Identify Pattern Occurrences\n(5 instances found)

PA -> RE : Pattern Analysis Results\n- Decreasing trend\n- Implementation category\n- Moderate significance
deactivate PA

alt Pattern Refactoring Required
    RE -> NA : Create Refactored API
    activate NA
    
    NA -> RE : Refactored Implementation
    deactivate NA
    
    RE -> LA : Update API Structure
    
    LA -> C : Refactored Response
else No Refactoring Needed
    LA -> C : Standard Response
end

deactivate RE
deactivate LA

note over RE, PA : Total Patterns: 1\nAverage Significance: 3\nTop Pattern: ApiRefactoringPattern

@enduml