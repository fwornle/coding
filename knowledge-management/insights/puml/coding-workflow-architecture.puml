@startuml
!include /Users/q284340/Agentic/coding/docs/puml/_standard-style.puml

package "MCP Interface Layer" {
  component [MCP Tools] <<api>>
  component [execute_workflow] <<api>>
}

package "CodingWorkflow Core" {
  component [CodingWorkflow Agent] <<agent>>
  component [Semantic Analysis Engine] <<core>>
  component [Incremental Analysis] <<core>>
}

package "Knowledge Management" {
  component [src/knowledge-management] <<core>>
  component [lib/ukb-unified] <<core>>
}

package "MCP Server Integration" {
  component [mcp-server-semantic-analysis] <<api>>
}

package "Storage Layer" {
  component [Graphology Engine] <<storage>>
  component [LevelDB] <<storage>>
  component [Knowledge Graph] <<storage>>
}

package "Export & Sync" {
  component [JSON Exports] <<storage>>
  component [Auto-Sync Process] <<core>>
}

' Main workflow connections
[MCP Tools] --> [execute_workflow] : triggers
[execute_workflow] --> [CodingWorkflow Agent] : executes
[Incremental Analysis] --> [CodingWorkflow Agent] : auto-triggers

' Core processing flow
[CodingWorkflow Agent] --> [Semantic Analysis Engine] : processes
[Semantic Analysis Engine] --> [src/knowledge-management] : uses
[src/knowledge-management] --> [lib/ukb-unified] : leverages
[mcp-server-semantic-analysis] --> [CodingWorkflow Agent] : integrates

' Storage interactions
[Semantic Analysis Engine] --> [Graphology Engine] : stores knowledge
[Graphology Engine] --> [LevelDB] : persists to
[LevelDB] --> [Knowledge Graph] : maintains at\n.data/knowledge-graph

' Export and sync
[Knowledge Graph] --> [Auto-Sync Process] : syncs from
[Auto-Sync Process] --> [JSON Exports] : exports to\n.data/knowledge-export

note top of [CodingWorkflow Agent]
  MCPAgent for semantic analysis and 
  knowledge management infrastructure.
  Replaces deprecated shared-memory.json
end note

note bottom of [Knowledge Graph]
  Storage location: .data/knowledge-graph
  Uses Graphology + LevelDB
end note

note bottom of [JSON Exports]
  Export location: .data/knowledge-export
  Auto-synced from GraphDB
end note

@enduml