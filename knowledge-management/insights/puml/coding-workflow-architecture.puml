@startuml
!include /Users/q284340/Agentic/coding/docs/puml/_standard-style.puml

package "MCP Integration Layer" {
    component [MCP Server] <<api>>
    component [execute_workflow] <<tool>>
}

package "Core CodingWorkflow" {
    component [CodingWorkflow Agent] <<agent>>
    component [Semantic Analysis Engine] <<core>>
    component [Incremental Analyzer] <<core>>
}

package "Knowledge Management" {
    component [src/knowledge-management] <<core>>
    component [lib/ukb-unified] <<core>>
}

package "Storage Layer" {
    component [Graphology GraphDB] <<storage>>
    component [LevelDB] <<storage>>
    component [Knowledge Graph Store] <<storage>>
    component [JSON Export Handler] <<storage>>
}

package "Data Persistence" {
    folder ".data/knowledge-graph" as KGData
    folder ".data/knowledge-export" as ExportData
}

package "Analysis Components" {
    component [integrations/mcp-server-semantic-analysis] <<core>>
}

[MCP Server] --> [execute_workflow] : triggers
[execute_workflow] --> [CodingWorkflow Agent] : executes
[Incremental Analyzer] --> [CodingWorkflow Agent] : auto-triggers

[CodingWorkflow Agent] --> [Semantic Analysis Engine] : processes
[CodingWorkflow Agent] --> [src/knowledge-management] : manages

[src/knowledge-management] <--> [lib/ukb-unified] : unified interface
[lib/ukb-unified] --> [Graphology GraphDB] : stores knowledge

[Graphology GraphDB] <--> [LevelDB] : persistence
[Knowledge Graph Store] --> KGData : persists to
[JSON Export Handler] --> ExportData : auto-syncs

[integrations/mcp-server-semantic-analysis] --> [Semantic Analysis Engine] : analyzes
[Semantic Analysis Engine] --> [Knowledge Graph Store] : updates

note top of [CodingWorkflow Agent]
  MCP Agent for semantic analysis
  and knowledge management workflow
end note

note bottom of KGData
  Replaces removed shared-memory.json
  Uses Graphology + LevelDB storage
end note

@enduml