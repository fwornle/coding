@startuml
!include /Users/q284340/Agentic/coding/docs/puml/_standard-style.puml

package "Knowledge Management Infrastructure" {
  component "NetworkAwareInstallationPattern" as NAIP <<core>>
  
  package "src/knowledge-management" {
    component "KnowledgeManager" as KM <<core>>
    component "PatternExtractor" as PE <<core>>
  }
  
  package "lib/ukb-unified" {
    component "UnifiedKnowledgeBase" as UKB <<core>>
    component "GraphologyEngine" as GE <<core>>
  }
  
  package "integrations/mcp-server-semantic-analysis/src" {
    component "SemanticAnalysisServer" as SAS <<api>>
    component "MCPInterface" as MCP <<api>>
  }
}

package "Data Storage Layer" {
  package ".data/knowledge-graph" {
    database "Graphology + LevelDB" as GraphDB <<storage>>
  }
  
  package ".data/knowledge-export" {
    database "JSON Exports" as JSONExport <<storage>>
  }
  
  note right of JSONExport
    Auto-synced from GraphDB
    Replaces removed shared-memory.json
  end note
}

' Relationships
NAIP --> KM : implements
NAIP --> UKB : implements
NAIP --> SAS : implements

KM --> PE : uses
KM --> GraphDB : stores patterns

UKB --> GE : uses
GE --> GraphDB : reads/writes

SAS --> MCP : exposes
SAS --> GraphDB : queries

GraphDB --> JSONExport : auto-sync

PE --> GraphDB : extracts to

note top of NAIP
  Core pattern for network-aware installation
  extracted from codebase analysis
  Enables semantic analysis and knowledge management
end note

@enduml