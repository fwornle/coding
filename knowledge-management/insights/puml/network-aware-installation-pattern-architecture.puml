@startuml
!include /Users/q284340/Agentic/coding/docs/puml/_standard-style.puml

package "NetworkAwareInstallationPattern Architecture" {
    
    package "Knowledge Management" {
        component "KnowledgeManager" <<core>> as KM
        component "PatternExtractor" <<core>> as PE
        database "Graphology" <<storage>> as Graph
        database "LevelDB" <<storage>> as Level
    }
    
    package "Data Storage" {
        folder ".data/knowledge-graph" <<storage>> as KGStorage
        folder ".data/knowledge-export" <<storage>> as KGExport
        note right of KGExport : Auto-synced from GraphDB
    }
    
    package "MCP Integration" {
        component "MCPServerSemanticAnalysis" <<api>> as MCPSA
        component "NetworkAwareInstallationPattern" <<agent>> as NAIP
        component "UKBUnified" <<core>> as UKB
    }
    
    package "Source Components" {
        component "src/knowledge-management" <<core>> as SrcKM
        component "lib/ukb-unified" <<core>> as LibUKB
        component "integrations/mcp-server-semantic-analysis/src" <<core>> as IntMCP
    }
    
    ' Relationships
    KM --> Graph : stores patterns
    KM --> Level : persistent storage
    Graph --> KGStorage : writes to
    KGStorage --> KGExport : syncs to
    
    PE --> KM : extracts to
    NAIP --> MCPSA : implements
    NAIP --> UKB : uses
    
    SrcKM --> KM : implements
    LibUKB --> UKB : provides
    IntMCP --> MCPSA : contains
    
    NAIP ..> PE : triggers analysis
    PE ..> SrcKM : analyzes codebase
    
    note top of NAIP : Pattern extracted from\ncodebase analysis and stored\nas reusable knowledge entity
    
    note bottom of KGStorage : Replaces removed\nshared-memory.json
}

@enduml