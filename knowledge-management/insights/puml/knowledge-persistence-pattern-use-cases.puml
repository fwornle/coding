@startuml
!include /Users/q284340/Agentic/coding/docs/puml/_standard-style.puml

title KnowledgePersistencePattern Use Case Diagram

actor User as "User"
actor VkbApiClient as "VkbApiClient"
actor MCPTools as "MCP Tools"

usecase "Visualize Knowledge" as (VisualizeKnowledge)
usecase "Perform Knowledge Operations" as (PerformKnowledgeOperations)
usecase "Synchronize Data" as (SynchronizeData)
usecase "Export Knowledge" as (ExportKnowledge)
usecase "Perform Coding Operations" as (PerformCodingOperations)

User -- (VisualizeKnowledge)
User -- (PerformKnowledgeOperations)
User -- (PerformCodingOperations)

VkbApiClient -- (VisualizeKnowledge)
VkbApiClient -- (PerformKnowledgeOperations)

MCPTools -- (PerformKnowledgeOperations)

(VisualizeKnowledge) ..> (SynchronizeData) : include
(PerformKnowledgeOperations) ..> (SynchronizeData) : include
(ExportKnowledge) ..> (SynchronizeData) : extend
(PerformCodingOperations) ..> (ExportKnowledge) : include

package "Graph Database Services" {
  (SynchronizeData)
  (ExportKnowledge)
}

package "Graph Database" {
  component GraphDatabase as "Graph Database"
  component LevelDB as "LevelDB"
  component Graphology as "Graphology"
  GraphDatabase -- LevelDB
  GraphDatabase -- Graphology
}

package "Knowledge Persistence" {
  component PersistenceAgent as "PersistenceAgent"
  component GraphKnowledgeExporter as "GraphKnowledgeExporter"
  (ExportKnowledge) -- GraphKnowledgeExporter
  PersistenceAgent -- GraphDatabase
}

@enduml