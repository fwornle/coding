@startuml
!include /Users/q284340/Agentic/coding/docs/puml/_standard-style.puml

actor System as "System"
actor User as "User"

package "Knowledge Persistence Pattern" {
  usecase "Store Knowledge" as Store
  usecase "Retrieve Knowledge" as Retrieve
  usecase "Export JSON" as Export
  usecase "Sync JSON" as Sync

  component GraphDatabaseService as "Graph DB Service"
  component GraphKnowledgeExporter as "Graph Exporter"
  component PersistenceAgent as "Persistence Agent"

  GraphDatabaseService --> Store : interacts
  GraphDatabaseService --> Retrieve : interacts
  GraphKnowledgeExporter --> Export : triggers
  PersistenceAgent --> Store : persists

  Store --> Export : triggers
  Export --> Sync : triggers
}

System --> Store
User --> Retrieve

note "Environment Variables" as envNote
envNote --> GraphDatabaseService : configures

note "Entity Events" as entity Events
entity Events --> Export : triggers

@enduml