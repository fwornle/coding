@startuml
!include /Users/q284340/Agentic/coding/docs/puml/_standard-style.puml

participant "Knowledge Management\nSystem" as KMS
participant "UKB Unified\nLibrary" as UKB
participant "MCP Server\nSemantic Analysis" as MCP
participant "Graphology\nGraph Engine" as Graph
participant "LevelDB\nStorage" as LevelDB
participant "JSON Export\nSystem" as Export

note over KMS, Export : NetworkAwareInstallationPattern Implementation

KMS -> UKB : Initialize pattern analysis
activate UKB

UKB -> MCP : Request semantic analysis
activate MCP

MCP -> Graph : Create network-aware nodes
activate Graph

Graph -> LevelDB : Persist graph structure
activate LevelDB
LevelDB --> Graph : Storage confirmation
deactivate LevelDB

Graph --> MCP : Graph structure ready
deactivate Graph

MCP -> MCP : Extract installation patterns
MCP -> MCP : Analyze network topology

MCP --> UKB : Pattern analysis complete
deactivate MCP

UKB -> Graph : Store pattern as knowledge entity
activate Graph

Graph -> LevelDB : Save NetworkAwareInstallationPattern
activate LevelDB
LevelDB --> Graph : Pattern stored
deactivate LevelDB

Graph -> Export : Auto-sync to JSON export
activate Export
Export -> Export : Write to .data/knowledge-export
Export --> Graph : Export complete
deactivate Export

Graph --> UKB : Pattern entity stored
deactivate Graph

UKB --> KMS : NetworkAwareInstallationPattern ready
deactivate UKB

note over Graph, LevelDB : Data stored at .data/knowledge-graph
note over Export : JSON exports at .data/knowledge-export
note over KMS, Export : shared-memory.json REMOVED from codebase

@enduml