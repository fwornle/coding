@startuml
!include /Users/q284340/Agentic/coding/docs/puml/_standard-style.puml

package "Knowledge Management" {
  component KnowledgeManager <<core>>
  component GraphologyEngine <<storage>>
  component LevelDBStorage <<storage>>
  component JSONExporter <<api>>
}

package "Unified Knowledge Base" {
  component UKBCore <<core>>
  component PatternExtractor <<core>>
  component TransferablePattern <<pattern>>
}

package "MCP Semantic Analysis" {
  component MCPServer <<api>>
  component SemanticAnalyzer <<core>>
  component CodebaseAnalyzer <<agent>>
}

package "Data Storage" {
  database "GraphDB\n(.data/knowledge-graph)" as GraphDB <<storage>>
  file "JSON Export\n(.data/knowledge-export)" as JSONStore <<storage>>
  note right of JSONStore : Auto-synced from GraphDB
}

package "Architecture Patterns" {
  component ArchitecturalEvolutionPattern <<TransferablePattern>>
  note as N1
  Extracted from codebase analysis
  Stored as reusable knowledge entity
  Replaces shared-memory.json approach
  end note
  ArchitecturalEvolutionPattern .. N1
}

' Relationships
KnowledgeManager --> GraphologyEngine
GraphologyEngine --> LevelDBStorage
GraphologyEngine --> GraphDB
JSONExporter --> JSONStore
GraphDB --> JSONStore : auto-sync

UKBCore --> KnowledgeManager
PatternExtractor --> UKBCore
TransferablePattern --> PatternExtractor

MCPServer --> SemanticAnalyzer
SemanticAnalyzer --> CodebaseAnalyzer
CodebaseAnalyzer --> PatternExtractor : extracts patterns

ArchitecturalEvolutionPattern --> TransferablePattern : implements
ArchitecturalEvolutionPattern --> GraphDB : stored in

note top of ArchitecturalEvolutionPattern
  Evolution from shared-memory.json
  to Graphology + LevelDB architecture
  with auto-synced JSON exports
end note

@enduml