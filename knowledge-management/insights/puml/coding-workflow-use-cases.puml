@startuml
!include /Users/q284340/Agentic/coding/docs/puml/_standard-style.puml

left to right direction

actor "Developer" as dev
actor "MCP Client" as mcp
actor "System" as sys

rectangle "Knowledge Management" {
    usecase "Store Knowledge" as store
    usecase "Query Knowledge Graph" as query
    usecase "Export Knowledge" as export
    usecase "Sync Data" as sync
}

rectangle "Semantic Analysis" {
    usecase "Execute Workflow" as execute
    usecase "Analyze Code" as analyze
    usecase "Generate Insights" as insights
    usecase "Incremental Analysis" as incremental
}

rectangle "Data Persistence" {
    usecase "Persist to LevelDB" as leveldb
    usecase "Manage Graph Data" as graphdata
    usecase "Auto-sync Exports" as autosync
}

dev --> execute : triggers via MCP tools
mcp --> execute : execute_workflow
sys --> incremental : automatic trigger

execute ..> analyze : <<include>>
execute ..> store : <<include>>
analyze --> insights : generates
analyze --> query : accesses

store --> leveldb : persists to
store --> graphdata : manages via Graphology
query --> graphdata : reads from

export --> autosync : triggers
autosync --> sync : performs
sync --> graphdata : syncs from GraphDB

note right of execute
  Implemented across:
  - src/knowledge-management
  - lib/ukb-unified  
  - integrations/mcp-server-semantic-analysis/src
end note

note bottom of graphdata
  Storage: .data/knowledge-graph
  Uses: Graphology + LevelDB
end note

note bottom of export
  Location: .data/knowledge-export
  Auto-synced from GraphDB
end note

@enduml