@startuml knowledge-management-system-architecture
!theme plain
skinparam backgroundColor white
skinparam defaultFontName Arial
skinparam defaultFontSize 10
skinparam maxMessageSize 60

title Knowledge Management System - Compact Architecture

' Vertical layout for narrower diagram
top to bottom direction

package "Data Sources" as DataSources {
    [Git Repo] as GitRepo
    [Claude Conv] as ClaudeConv  
    [Expert Input] as ExpertInput
    [Code Analysis] as CodeAnalysis
}

package "Processing" as Processing {
    [UKB Engine] as UKB
    [Pattern Rec] as PatternRec
    [Scoring] as SigScore
    [Dedup] as Dedup
}

package "Storage" as Storage {
    [shared-memory.json] as SharedMemory
    [MCP Persist] as MCP
    [Docs] as Docs
}

package "Visualization" as Visualization {
    [VKB Server] as VKB
    [Graph UI] as Graph
    [Search] as Search
}

package "MCP Servers" as MCPServers {
    [Browser] as BrowserMCP
    [Memory] as MemoryMCP
}

package "Auto-Logging" as AutoLogging {
    [start-auto-logger.sh] as AutoLogger
    [I/O Interception] as IOIntercept
}

' Simplified flow connections
DataSources --> Processing : data extraction
Processing --> Storage : structured data
Storage --> Visualization : knowledge graph
MCPServers --> Storage : persistence
AutoLogging --> DataSources : conversation logs

' Key user flows
actor Developer as Dev
actor Team as Team

Dev --> DataSources : creates data
Team --> Visualization : explores knowledge

note top of DataSources : Git commits, AI conversations,\nexpert input, code analysis
note top of Processing : UKB engine, pattern recognition,\nsignificance scoring, deduplication
note top of Storage : shared-memory.json,\nMCP persistence, documentation
note top of Visualization : VKB server, interactive graph,\nsearch and filtering
note top of MCPServers : Browser Access,\nMemory Management
note top of AutoLogging : I/O stream interception,\nsmart content routing

@enduml