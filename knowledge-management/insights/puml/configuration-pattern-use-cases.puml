@startuml
!include /Users/q284340/Agentic/coding/docs/puml/_standard-style.puml

left to right direction

actor "Knowledge Worker" as KW
actor "Developer" as DEV
actor "System Administrator" as SA
actor "External System" as EXT

package "Configuration Management" {
  usecase "Configure Environment Variables" as UC1
  usecase "Validate Configuration" as UC2
  usecase "Manage Port Settings" as UC3
}

package "Knowledge Operations" {
  usecase "Visualize Knowledge Graph" as UC4
  usecase "Execute Development Tasks" as UC5
  usecase "Synchronize Graph Database" as UC6
  usecase "Export Knowledge Data" as UC7
}

package "Data Storage & Access" {
  usecase "Store Graph Data" as UC8
  usecase "Query Knowledge Base" as UC9
  usecase "Export JSON Data" as UC10
  usecase "Maintain Data Consistency" as UC11
}

package "MCP Server Integration" {
  usecase "Manage Git Submodules" as UC12
  usecase "Handle Status Operations" as UC13
  usecase "Configure MCP Server Ports" as UC14
  usecase "Integrate Code Graph RAG" as UC15
}

package "API & Persistence" {
  usecase "Access VKB API" as UC16
  usecase "Manage Data Persistence" as UC17
  usecase "Handle Race Conditions" as UC18
}

' Actor relationships
SA --> UC1
SA --> UC2
SA --> UC3
SA --> UC14

KW --> UC4
KW --> UC6
KW --> UC7
KW --> UC9

DEV --> UC5
DEV --> UC12
DEV --> UC15
DEV --> UC16

EXT --> UC10
EXT --> UC13
EXT --> UC18

' Include relationships
UC2 ..> UC1 : <<include>>
UC6 ..> UC8 : <<include>>
UC7 ..> UC10 : <<include>>
UC9 ..> UC11 : <<include>>
UC13 ..> UC18 : <<include>>
UC15 ..> UC12 : <<include>>
UC16 ..> UC17 : <<include>>

' Extend relationships  
UC3 ..> UC2 : <<extend>>
UC14 ..> UC3 : <<extend>>
UC8 ..> UC11 : <<extend>>

note right of UC1
  Uses .env.ports file
  Replaces deprecated 
  shared-memory.json
end note

note right of UC4
  Uses vkb command
  for visualization
end note

note right of UC5
  Uses coding command
  for development tasks
end note

note right of UC6
  Uses graph-sync
  for database workflows
end note

note right of UC8
  Graphology + LevelDB
  storage backend
end note

@enduml