@startuml
!include /Users/q284340/Agentic/coding/docs/puml/_standard-style.puml

package "Knowledge Management" {
    class SemanticProcessor <<service>> {
        -analysisEngine: AnalysisEngine
        -contextManager: ContextManager
        +processDocument(content: string): Analysis
        +extractSemantics(text: string): SemanticData
        +generateInsights(data: SemanticData): Insights
    }
    
    class ContextManager {
        -contextStore: Map
        -sessionId: string
        +createContext(id: string): Context
        +updateContext(context: Context): void
        +getContext(id: string): Context
    }
    
    class AnalysisEngine {
        -algorithms: Algorithm[]
        -modelAdapter: ModelAdapter
        +analyze(input: string): AnalysisResult
        +configure(settings: Config): void
    }
}

package "UKB Unified Library" {
    abstract class UnifiedKnowledgeBase {
        #knowledgeStore: KnowledgeStore
        #indexManager: IndexManager
        +{abstract} query(terms: string[]): QueryResult
        +{abstract} index(content: Content): void
    }
    
    class SemanticKnowledgeBase extends UnifiedKnowledgeBase {
        -semanticIndex: SemanticIndex
        -relationshipGraph: Graph
        +query(terms: string[]): QueryResult
        +index(content: Content): void
        +findRelationships(entity: Entity): Relationship[]
    }
    
    class KnowledgeStore {
        -storage: StorageAdapter
        -metadata: MetadataManager
        +store(key: string, value: any): void
        +retrieve(key: string): any
        +search(criteria: SearchCriteria): SearchResult[]
    }
}

package "MCP Server Integration" {
    class ComprehensiveSemanticAnalysis <<MCPAgent>> {
        -processor: SemanticProcessor
        -knowledgeBase: SemanticKnowledgeBase
        -mcpAdapter: MCPAdapter
        +handleRequest(request: MCPRequest): MCPResponse
        +performAnalysis(content: string): AnalysisReport
        +initializeAgent(): void
    }
    
    class MCPAdapter {
        -serverConnection: Connection
        -messageHandler: MessageHandler
        +sendResponse(response: MCPResponse): void
        +receiveRequest(): MCPRequest
        +establishConnection(): void
    }
    
    interface MCPAgent {
        +handleRequest(request: MCPRequest): MCPResponse
        +initializeAgent(): void
    }
}

package "Core Types" {
    class SemanticData {
        +entities: Entity[]
        +relationships: Relationship[]
        +concepts: Concept[]
        +confidence: number
    }
    
    class AnalysisResult {
        +semanticData: SemanticData
        +insights: Insights
        +metadata: Metadata
        +timestamp: Date
    }
    
    enum AnalysisType {
        SEMANTIC
        SYNTACTIC
        CONTEXTUAL
        COMPREHENSIVE
    }
}

' Relationships
ComprehensiveSemanticAnalysis --|> MCPAgent
ComprehensiveSemanticAnalysis --* SemanticProcessor
ComprehensiveSemanticAnalysis --* SemanticKnowledgeBase
ComprehensiveSemanticAnalysis --* MCPAdapter

SemanticProcessor --* ContextManager
SemanticProcessor --* AnalysisEngine
SemanticProcessor ..> SemanticData : creates
SemanticProcessor ..> AnalysisResult : produces

SemanticKnowledgeBase --* KnowledgeStore
AnalysisEngine ..> AnalysisResult : generates
AnalysisResult --* SemanticData

note right of ComprehensiveSemanticAnalysis
  Main MCP Agent implementation
  Distributed across multiple modules:
  - src/knowledge-management
  - lib/ukb-unified  
  - integrations/mcp-server-semantic-analysis/src
  
  Note: shared-memory.json removed from codebase
end note

@enduml