@startuml
!include /Users/q284340/Agentic/coding/docs/puml/_standard-style.puml

package "src/knowledge-management" {
    class KnowledgeSemanticAnalyzer <<service>> {
        -vectorStore: VectorStore
        -embeddingModel: EmbeddingModel
        -semanticIndex: SemanticIndex
        +analyzeKnowledgeBase(): AnalysisResult
        +extractSemanticPatterns(): Pattern[]
        +buildSemanticGraph(): SemanticGraph
        +identifyConceptClusters(): Cluster[]
    }
    
    class SemanticIndex <<data>> {
        -indexedConcepts: Map<string, Concept>
        -relationshipGraph: Graph
        +indexConcept(concept: Concept): void
        +findSimilarConcepts(query: string): Concept[]
        +updateRelationships(): void
    }
    
    class ConceptExtractor <<service>> {
        -nlpProcessor: NLPProcessor
        -domainOntology: Ontology
        +extractConcepts(text: string): Concept[]
        +validateConcepts(concepts: Concept[]): boolean
        +enrichWithContext(concepts: Concept[]): Concept[]
    }
}

package "lib/ukb-unified" {
    abstract class UnifiedSemanticBase <<pattern>> {
        #semanticProcessor: SemanticProcessor
        #patternMatcher: PatternMatcher
        +processSemanticData(data: any): SemanticData
        +applySemanticRules(rules: Rule[]): void
        {abstract} +executeAnalysis(): AnalysisResult
    }
    
    class SemanticProcessor <<service>> {
        -tokenizer: Tokenizer
        -syntaxAnalyzer: SyntaxAnalyzer
        -semanticRules: Rule[]
        +processText(text: string): ProcessedText
        +identifyEntities(text: string): Entity[]
        +analyzeRelationships(entities: Entity[]): Relationship[]
    }
    
    class PatternMatcher <<utility>> {
        -patterns: Pattern[]
        -matchingAlgorithm: Algorithm
        +matchPatterns(input: string): Match[]
        +registerPattern(pattern: Pattern): void
        +validateMatches(matches: Match[]): boolean
    }
}

package "integrations/mcp-server-semantic-analysis/src" {
    class MCPSemanticServer <<server>> {
        -analysisEngine: ComprehensiveSemanticAnalysis
        -requestHandler: RequestHandler
        -responseFormatter: ResponseFormatter
        +handleAnalysisRequest(request: Request): Response
        +formatSemanticResults(results: AnalysisResult): FormattedResponse
        +validateRequest(request: Request): boolean
    }
    
    class SemanticAnalysisHandler <<handler>> {
        -analyzer: ComprehensiveSemanticAnalysis
        -validator: RequestValidator
        +processAnalysisRequest(data: RequestData): AnalysisResult
        +handleBatchAnalysis(batch: RequestData[]): AnalysisResult[]
        +streamAnalysisResults(stream: DataStream): void
    }
}

class ComprehensiveSemanticAnalysis <<transferable-pattern>> {
    -knowledgeAnalyzer: KnowledgeSemanticAnalyzer
    -unifiedBase: UnifiedSemanticBase
    -mcpIntegration: MCPSemanticServer
    +executeComprehensiveAnalysis(input: AnalysisInput): AnalysisResult
    +integrateMultipleSources(sources: DataSource[]): IntegratedResult
    +generateSemanticInsights(data: any): Insight[]
    +exportAnalysisPattern(): TransferablePattern
}

' Relationships
ComprehensiveSemanticAnalysis --> KnowledgeSemanticAnalyzer : uses
ComprehensiveSemanticAnalysis --> UnifiedSemanticBase : extends
ComprehensiveSemanticAnalysis --> MCPSemanticServer : integrates

KnowledgeSemanticAnalyzer --> SemanticIndex : manages
KnowledgeSemanticAnalyzer --> ConceptExtractor : uses

UnifiedSemanticBase --> SemanticProcessor : contains
UnifiedSemanticBase --> PatternMatcher : uses

MCPSemanticServer --> SemanticAnalysisHandler : delegates
SemanticAnalysisHandler --> ComprehensiveSemanticAnalysis : analyzes with

' Cross-package dependencies
SemanticAnalysisHandler ..> KnowledgeSemanticAnalyzer : leverages
MCPSemanticServer ..> UnifiedSemanticBase : implements

@enduml