# MCPMemoryLoggingIntegrationPattern

## Overview

**Problem:** MCP logging systems need different approaches for interactive vs piped modes

**Solution:** Claude-mcp wrapper ensures both logging AND knowledge consumption with mode-aware logging

**Approach:** Interactive mode requires different logging approach than piped mode - MCP memory sync with verification

## Applicability

Any MCP-based system requiring both conversation logging and knowledge persistence

## Technologies

- MCP
- Claude Code
- Knowledge Management

## Implementation Details

### Problem Context

Automatic logging system designed for --print mode with piped input fails in interactive mode. The logging mechanism works differently when Claude is run interactively vs when it's given piped input.

### Solution Strategy

Mode-aware logging with MCP memory sync verification ensures that both logging AND knowledge consumption work correctly regardless of how Claude is invoked.

### Key Implementation Points

1. **Mode Detection**: The claude-mcp wrapper detects whether it's running in interactive or piped mode
2. **Logging Adaptation**: Different logging approaches are used based on the mode
3. **MCP Sync Verification**: Memory sync is verified to ensure knowledge persistence works
4. **Dual Functionality**: Both conversation logging and knowledge consumption are ensured

## Project Context

**Origin Project:** Coding

## Usage Guidelines

This pattern can be applied when:

1. Building MCP-based AI systems that need conversation logging
2. Working with interactive vs batch processing modes
3. Integrating knowledge persistence with conversation capture
4. Ensuring reliable logging across different invocation methods

## Related Patterns

- KnowledgePersistencePattern: For the broader knowledge management architecture
- ClaudeCodeStartupPattern: For session initialization procedures

---

*Generated by ukb (Update Knowledge Base) - Sun Jun 16 07:30:45 PDT 2025*