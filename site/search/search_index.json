{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Coding","text":"<p>A self-learning experience layer for AI coding assistants</p> <p>Coding wraps around your AI coding assistant to capture conversations, build knowledge, prevent mistakes, and track progress - creating a continuously improving development environment.</p> <p></p>"},{"location":"#what-is-coding","title":"What is Coding?","text":"<p>Coding is an infrastructure layer that enhances AI coding assistants by:</p> <ul> <li>Capturing everything - Automatic session logging of all prompts, tool calls, and responses</li> <li>Learning from experience - Build a knowledge base from your coding history and conversations</li> <li>Preventing mistakes - Constraint system stops errors before they happen</li> <li>Tracking progress - Real-time trajectory detection and status feedback</li> </ul> <p></p>"},{"location":"#key-features","title":"Key Features","text":""},{"location":"#live-session-logging-lsl","title":"Live Session Logging (LSL)","text":"<p>Every conversation is captured automatically with intelligent 5-layer classification that routes content between projects.</p> <p></p> <ul> <li>Real-time monitoring with zero data loss</li> <li>Automatic redaction of secrets and credentials</li> <li>Multi-project support with foreign session tracking</li> <li>Configurable time-based slots (hourly files)</li> </ul> <p>Learn more about LSL</p>"},{"location":"#knowledge-management-ukbvkb","title":"Knowledge Management (UKB/VKB)","text":"<p>A 14-agent AI system extracts insights from your git history and conversation logs, building a searchable knowledge graph.</p> <p></p> <p>Update Knowledge Base (UKB): <pre><code>ukb           # Incremental update from last checkpoint\nukb full      # Full analysis from first commit\nukb debug     # Single-stepping with mocked LLM\n</code></pre></p> <p>View Knowledge Base (VKB): <pre><code>vkb           # Opens http://localhost:8080\n</code></pre></p> <p>Learn more about Knowledge Management</p>"},{"location":"#constraint-system","title":"Constraint System","text":"<p>20+ configurable constraints enforce code quality via PreToolUse hooks - preventing mistakes before they happen.</p> <p></p> <ul> <li>Real-time violation detection and blocking</li> <li>Web dashboard for monitoring and configuration</li> <li>Per-project constraint configuration</li> <li>Auto-correction suggestions</li> </ul> <p>Learn more about Constraints</p>"},{"location":"#health-monitoring","title":"Health Monitoring","text":"<p>4-layer watchdog architecture ensures system reliability with automatic recovery.</p> <p></p> <ul> <li>Process health monitoring with automatic restart</li> <li>Service lifecycle management</li> <li>Multi-agent workflow visualization</li> <li>LLM call tracing (tokens, duration, costs)</li> </ul> <p>Learn more about Health Monitoring</p>"},{"location":"#status-line","title":"Status Line","text":"<p>Real-time feedback in your terminal showing system health, costs, and development state.</p> <p></p> Indicator Meaning Health icons Service status (green/red) Cost display API usage tracking Trajectory Current development phase LSL status Logging window and routing <p>Learn more about Status Line</p>"},{"location":"#quick-start","title":"Quick Start","text":"<pre><code># Clone and install (Docker mode is default)\ngit clone --recurse-submodules https://github.com/fwornle/coding ~/Agentic/coding\ncd ~/Agentic/coding &amp;&amp; ./install.sh\n\n# Reload shell\nsource ~/.bashrc  # or ~/.zshrc\n\n# Start coding with all features\ncoding\n\n# View your knowledge graph\nvkb\n</code></pre> <p>Full Installation Guide</p>"},{"location":"#design-principles","title":"Design Principles","text":"Principle Description Agent-Agnostic Designed for any AI assistant (currently Claude-optimized, others planned) Non-Intrusive Docker deployment keeps your system clean Provider Flexible Works with Anthropic, OpenAI, Groq, and local LLMs (DMR/llama.cpp) Multi-Project Handle multiple projects with automatic context routing Multi-Developer Session logs tagged per user for collaboration Self-Healing 4-layer monitoring with automatic recovery"},{"location":"#feature-status","title":"Feature Status","text":"Feature Status Description Live Session Logging  Production Full session capture with 5-layer classification Knowledge Base (UKB)  Production 14-agent knowledge extraction system Knowledge Viewer (VKB)  Production Graph visualization and exploration Constraint System  Production 20+ constraints with web dashboard Health Monitoring  Production 4-layer watchdog architecture Status Line  Production Real-time terminal feedback Online Learning  Beta Continuous learning without manual UKB Trajectory Detection  Beta Real-time goal and deviation tracking"},{"location":"#mcp-integrations","title":"MCP Integrations","text":"<p>Coding provides several MCP (Model Context Protocol) servers:</p> Integration Purpose Semantic Analysis 14-agent AI-powered code analysis Constraint Monitor Real-time violation detection Browser Access Stagehand browser automation Code Graph RAG AST-based code search via Memgraph Serena Advanced code navigation"},{"location":"#documentation","title":"Documentation","text":"<ul> <li> <p> Getting Started</p> <p>Installation, configuration, and first steps</p> <p> Get started</p> </li> <li> <p> Core Systems</p> <p>LSL, UKB/VKB, Constraints, Trajectories</p> <p> Explore</p> </li> <li> <p> Integrations</p> <p>MCP servers and external tools</p> <p> View integrations</p> </li> <li> <p> Guides</p> <p>Deep-dive tutorials and workflows</p> <p> Read guides</p> </li> </ul>"},{"location":"architecture/","title":"Architecture","text":"<p>System design principles and patterns for the coding infrastructure.</p> <p></p> <p></p>"},{"location":"architecture/#key-principles","title":"Key Principles","text":""},{"location":"architecture/#1-agent-agnostic-design-goal","title":"1. Agent-Agnostic Design (Goal)","text":"<p>Current State: Claude-Centric</p> <p>The system is currently optimized for Claude Code. The agent-agnostic architecture is a design goal, not yet fully implemented. Core services (VKB, Semantic Analysis, LSL) work independently, but MCP integration and hooks are Claude-specific.</p> <p>The architecture is designed to eventually support multiple AI coding assistants through a unified adapter pattern:</p> <p></p> <p></p> <p>Planned Layers:</p> <ol> <li>Agent Layer - AI assistants (Claude now, CoPilot/Cursor planned)</li> <li>Launcher Layer - Agent-specific startup scripts</li> <li>Common Setup Layer - Shared initialization (<code>agent-common-setup.sh</code>)</li> <li>Shared Services - VKB, Semantic Analysis, Constraint Monitor, LSL</li> <li>Adapter Layer - Abstract interface + agent implementations (partial)</li> </ol>"},{"location":"architecture/#2-knowledge-persistence","title":"2. Knowledge Persistence","text":"<p>Multi-tier storage for reliability and performance:</p> <p>Runtime (Fast):</p> <ul> <li>MCP Memory (Claude)</li> <li>Graphology Graph (in-memory)</li> </ul> <p>Persistence (Reliable):</p> <ul> <li>LevelDB (persistent graph storage)</li> <li>JSON exports (git-tracked)</li> <li><code>.specstory/history/</code> (session logs)</li> </ul>"},{"location":"architecture/#3-real-time-quality-enforcement","title":"3. Real-Time Quality Enforcement","text":"<p>PreToolUse hooks intercept tool calls BEFORE execution:</p> <pre><code>flowchart LR\n    A[Claude Tool Call] --&gt; B[PreToolUse Hook]\n    B --&gt; C[Constraint Monitor]\n    C --&gt;|Violation| D[BLOCK]\n    C --&gt;|Clean| E[ALLOW]\n    E --&gt; F[Tool Execution]</code></pre>"},{"location":"architecture/#4-4-layer-monitoring","title":"4. 4-Layer Monitoring","text":"<p>Progressive escalation for reliability:</p> Layer Component Function 4 Service Health UKB, VKB, Semantic Analysis 3 System Verifier LSL, Constraints, Trajectory 2 System Coordinator Overall health, metrics 1 System Watchdog Critical failures, alerts"},{"location":"architecture/#deployment-modes","title":"Deployment Modes","text":""},{"location":"architecture/#native-mode-default","title":"Native Mode (Default)","text":"<p>MCP servers run as native stdio processes managed by Claude CLI.</p> <ul> <li>Pros: Simple setup, no Docker, lower memory</li> <li>Cons: Processes restart with each session</li> <li>Best for: Individual developers</li> </ul>"},{"location":"architecture/#docker-mode","title":"Docker Mode","text":"<p>MCP servers run as HTTP/SSE services in containers.</p> <ul> <li>Pros: Persistent services, shared browser, better isolation</li> <li>Cons: Docker required, higher memory</li> <li>Best for: Teams, multi-session workflows</li> </ul> <p>See Docker Mode for setup details.</p>"},{"location":"architecture/#development-patterns","title":"Development Patterns","text":""},{"location":"architecture/#constraint-based-development","title":"Constraint-Based Development","text":"<p>Define constraints before implementation:</p> <pre><code>constraints:\n  - id: no-parallel-versions\n    pattern: /(v\\d+|enhanced|improved|new|fixed)_/\n    severity: CRITICAL\n    message: Never create parallel versions - edit originals\n</code></pre>"},{"location":"architecture/#agent-detection","title":"Agent Detection","text":"<pre><code>const detector = new AgentDetector();\nconst available = await detector.detectAll();\n// { claude: true, copilot: false }\n\nconst best = await detector.getBest();\n// 'claude'\n</code></pre>"},{"location":"architecture/#knowledge-capture","title":"Knowledge Capture","text":"<pre><code># Auto-analysis from git commits\nukb\n\n# Structured interactive capture\nukb --interactive\n\n# Visualization\nvkb\n</code></pre>"},{"location":"architecture/#adding-new-agents","title":"Adding New Agents","text":"<p>See Agent Integration Guide for:</p> <ol> <li>Implement <code>AgentAdapter</code> interface</li> <li>Register adapter in <code>agent-registry.js</code></li> <li>Add detection in <code>agent-detector.js</code></li> <li>Create launcher script</li> <li>Update <code>bin/coding</code> routing</li> <li>Test with validation commands</li> </ol>"},{"location":"architecture/#related-documentation","title":"Related Documentation","text":"<ul> <li>Health Monitoring - 4-layer architecture details</li> <li>Data Flow - System data flow diagrams</li> <li>Integrations - MCP server architectures</li> </ul>"},{"location":"architecture/data-flow/","title":"Data Flow","text":"<p>System data flow patterns and integration points.</p>"},{"location":"architecture/data-flow/#overall-system-flow","title":"Overall System Flow","text":"<pre><code>flowchart TB\n    subgraph \"User Layer\"\n        U[User] --&gt; CC[Claude Code]\n    end\n\n    subgraph \"Tool Layer\"\n        CC --&gt;|PreToolUse| CM[Constraint Monitor]\n        CM --&gt;|Block/Allow| CC\n        CC --&gt;|Tool Call| MCP[MCP Servers]\n        CC --&gt;|PostToolUse| LSL[LSL Monitor]\n    end\n\n    subgraph \"Analysis Layer\"\n        MCP --&gt; SA[Semantic Analysis]\n        MCP --&gt; BA[Browser Access]\n        MCP --&gt; CGR[Code Graph RAG]\n    end\n\n    subgraph \"Storage Layer\"\n        LSL --&gt; FS[.specstory/history/]\n        SA --&gt; GDB[GraphDB]\n        CGR --&gt; MG[Memgraph]\n        SA --&gt; QD[Qdrant]\n    end\n\n    subgraph \"Visualization\"\n        GDB --&gt; VKB[VKB Server]\n        FS --&gt; VKB\n    end</code></pre>"},{"location":"architecture/data-flow/#lsl-data-flow","title":"LSL Data Flow","text":"<p>Exchange Processing:</p> <ol> <li>Capture: Transcript monitor detects new exchange</li> <li>Classify: 5-layer classifier determines routing</li> <li>Redact: Security patterns sanitized</li> <li>Route: Content written to LOCAL or CODING history</li> <li>Log: Classification decision logged</li> </ol> <p>Classification Decision Tree:</p> <pre><code>flowchart TD\n    E[Exchange] --&gt; L0{Layer 0: Session Filter}\n    L0 --&gt;|Confident| D[Decision]\n    L0 --&gt;|Uncertain| L1{Layer 1: PathAnalyzer}\n    L1 --&gt;|Confident| D\n    L1 --&gt;|Uncertain| L2{Layer 2: KeywordMatcher}\n    L2 --&gt;|Confident| D\n    L2 --&gt;|Uncertain| L3{Layer 3: EmbeddingClassifier}\n    L3 --&gt;|Confident| D\n    L3 --&gt;|Uncertain| L4{Layer 4: SemanticAnalyzer}\n    L4 --&gt; D\n    D --&gt;|LOCAL| LP[Project History]\n    D --&gt;|CODING| CP[Coding History]</code></pre>"},{"location":"architecture/data-flow/#knowledge-flow","title":"Knowledge Flow","text":"<p>UKB Flow:</p> <ol> <li>Trigger: MCP command or git analysis</li> <li>Extract: Patterns from commits or prompts</li> <li>Classify: 4-layer ontology pipeline</li> <li>Store: GraphDB (Graphology + LevelDB)</li> <li>Export: JSON for git tracking</li> </ol> <p>Continuous Learning Flow:</p> <ol> <li>Monitor: LSL exchanges captured</li> <li>Extract: StreamingKnowledgeExtractor identifies insights</li> <li>Embed: Generate 384-dim or 1536-dim vectors</li> <li>Store: Qdrant (vectors) + SQLite (metadata)</li> <li>Retrieve: Semantic search available</li> </ol>"},{"location":"architecture/data-flow/#constraint-flow","title":"Constraint Flow","text":"<p>PreToolUse Hook Flow:</p> <ol> <li>Intercept: Hook fires before tool execution</li> <li>Check: ConstraintEnforcer evaluates parameters</li> <li>Match: PatternMatcher runs regex against 20 constraints</li> <li>Score: ComplianceCalculator updates score</li> <li>Decide: Block (CRITICAL/ERROR) or Allow (WARNING/INFO)</li> <li>Log: Violation logged to dashboard API</li> </ol>"},{"location":"architecture/data-flow/#mcp-server-communication","title":"MCP Server Communication","text":"<p>Native Mode:</p> <pre><code>Claude CLI &lt;--stdio--&gt; MCP Server Process\n</code></pre> <p>Docker Mode:</p> <pre><code>Claude CLI &lt;--stdio--&gt; Proxy &lt;--HTTP/SSE--&gt; Container Server\n</code></pre>"},{"location":"architecture/data-flow/#storage-locations","title":"Storage Locations","text":"System Storage Format LSL <code>.specstory/history/</code> Markdown Classification <code>.specstory/logs/classification/</code> JSONL + MD Knowledge (UKB) <code>.data/knowledge-graph/</code> LevelDB Knowledge Export <code>.data/knowledge-export/</code> JSON Continuous Learning Qdrant + <code>.cache/knowledge.db</code> Vectors + SQLite Trajectories <code>.specstory/trajectory/</code> JSON Health <code>.health/</code> JSON"},{"location":"architecture/data-flow/#cross-system-integration","title":"Cross-System Integration","text":""},{"location":"architecture/data-flow/#lsl-trajectories","title":"LSL + Trajectories","text":"<p>LSL exchanges feed real-time trajectory analysis:</p> <pre><code>LSL Exchange --&gt; Significance Check --&gt; Trajectory Analyzer --&gt; State Update --&gt; Status Line\n</code></pre>"},{"location":"architecture/data-flow/#lsl-knowledge","title":"LSL + Knowledge","text":"<p>LSL data feeds both knowledge systems:</p> <pre><code>LSL Exchange --&gt; StreamingKnowledgeExtractor --&gt; Qdrant\nLSL History --&gt; UKB Git Analysis --&gt; GraphDB\n</code></pre>"},{"location":"architecture/data-flow/#constraints-lsl","title":"Constraints + LSL","text":"<p>PostToolUse hooks log all tool interactions:</p> <pre><code>Tool Execution --&gt; PostToolUse Hook --&gt; LSL Logger --&gt; .specstory/history/\n</code></pre>"},{"location":"architecture/data-flow/#health-all-systems","title":"Health + All Systems","text":"<p>Health monitoring spans all components:</p> <pre><code>All Services --&gt; Health Files --&gt; Coordinator --&gt; Dashboard\n</code></pre>"},{"location":"architecture/health-monitoring/","title":"Health Monitoring","text":"<p>4-layer monitoring architecture for system reliability.</p> <p></p>"},{"location":"architecture/health-monitoring/#architecture-overview","title":"Architecture Overview","text":"<p>The health monitoring system uses progressive escalation across four layers, each with distinct responsibilities.</p>"},{"location":"architecture/health-monitoring/#layer-1-system-watchdog","title":"Layer 1: System Watchdog","text":"<p>Component: <code>monitoring/global-monitor-watchdog.js</code></p> <p>Function: Top-level supervisor monitoring all monitors</p> <ul> <li>Restarts failed monitoring processes</li> <li>Logs health status every 60 seconds</li> <li>Acts as last line of defense</li> </ul> <p>Health Check:</p> <pre><code>ps aux | grep global-monitor-watchdog\n</code></pre>"},{"location":"architecture/health-monitoring/#layer-2-system-coordinator","title":"Layer 2: System Coordinator","text":"<p>Component: <code>monitoring/global-transcript-monitor-coordinator.js</code></p> <p>Function: Manages monitoring across all projects</p> <ul> <li>Ensures exactly one monitor per project</li> <li>Coordinates monitor lifecycle</li> <li>Aggregates health metrics</li> </ul> <p>Health Check:</p> <pre><code>cat .health/coordinator-status.json | jq '{status, activeProjects}'\n</code></pre>"},{"location":"architecture/health-monitoring/#layer-3-system-verifier","title":"Layer 3: System Verifier","text":"<p>Component: <code>monitoring/transcript-monitor-verifier.js</code></p> <p>Function: Verifies monitor health for all active projects</p> <ul> <li>Health checks every 30 seconds</li> <li>Detects suspicious activity (stuck processes)</li> <li>Reports anomalies to coordinator</li> </ul> <p>Suspicious Activity Detection:</p> <ul> <li>Stale monitors (no activity for extended period)</li> <li>Stuck processes (exchange count not increasing)</li> <li>High memory usage</li> <li>Processing issues</li> </ul>"},{"location":"architecture/health-monitoring/#layer-4-service-level-self-monitoring","title":"Layer 4: Service-Level Self-Monitoring","text":"<p>Component: Enhanced Transcript Monitor</p> <p>Function: Per-service health reporting</p> <ul> <li>Generates <code>.transcript-monitor-health</code> file</li> <li>Real-time process metrics</li> <li>Exchange count and activity tracking</li> </ul> <p>Health File Format:</p> <pre><code>{\n  \"status\": \"healthy\",\n  \"metrics\": {\n    \"memoryMB\": 9,\n    \"cpuUser\": 7481974,\n    \"uptimeSeconds\": 925,\n    \"processId\": 78406\n  },\n  \"activity\": {\n    \"lastExchange\": \"82da8b2a-6a30-45eb-b0c7-5e1e2b2d54ee\",\n    \"exchangeCount\": 10,\n    \"isSuspicious\": false\n  }\n}\n</code></pre>"},{"location":"architecture/health-monitoring/#health-dashboard","title":"Health Dashboard","text":"<p>URL: <code>http://localhost:3032</code></p> <p>Features:</p> <ul> <li>Real-time service status</li> <li>Health metrics visualization</li> <li>Alert history</li> <li>Service restart controls</li> </ul>"},{"location":"architecture/health-monitoring/#api-endpoints-port-3033","title":"API Endpoints (Port 3033)","text":"Endpoint Method Description <code>/api/health</code> GET Overall system health <code>/api/services</code> GET Individual service status <code>/api/metrics</code> GET Health metrics history <code>/api/alerts</code> GET Recent alerts"},{"location":"architecture/health-monitoring/#health-files","title":"Health Files","text":"File Purpose <code>.health/coding-transcript-monitor-health.json</code> LSL monitor health <code>.health/coordinator-status.json</code> Coordinator status <code>.health/service-health.json</code> Aggregated service health"},{"location":"architecture/health-monitoring/#monitoring-commands","title":"Monitoring Commands","text":"<pre><code># Check overall health\ncat .health/coding-transcript-monitor-health.json | jq '{status, activity}'\n\n# Verify all monitors\nnode monitoring/transcript-monitor-verifier.js --check\n\n# Restart coordinator\npkill -f global-transcript-monitor-coordinator\nnode monitoring/global-transcript-monitor-coordinator.js &amp;\n\n# Full system restart\n./bin/restart-monitoring.sh\n</code></pre>"},{"location":"architecture/health-monitoring/#alert-thresholds","title":"Alert Thresholds","text":"Metric Warning Critical Memory Usage &gt;500MB &gt;1GB CPU Usage &gt;50% &gt;80% Stale Monitor &gt;5 min &gt;15 min Processing Delay &gt;30s &gt;60s"},{"location":"architecture/health-monitoring/#troubleshooting","title":"Troubleshooting","text":""},{"location":"architecture/health-monitoring/#monitor-not-updating","title":"Monitor not updating","text":"<pre><code># Check if process is running\nps aux | grep enhanced-transcript-monitor\n\n# Check health file timestamp\nls -la .health/coding-transcript-monitor-health.json\n\n# Restart monitor\npkill -f enhanced-transcript-monitor\nTRANSCRIPT_SOURCE_PROJECT=\"/path/to/project\" node scripts/enhanced-transcript-monitor.js &amp;\n</code></pre>"},{"location":"architecture/health-monitoring/#coordinator-issues","title":"Coordinator issues","text":"<pre><code># Check coordinator status\ncat .health/coordinator-status.json\n\n# View coordinator logs\ntail -100 .logs/coordinator.log\n\n# Restart coordinator\nnode monitoring/global-transcript-monitor-coordinator.js &amp;\n</code></pre>"},{"location":"architecture/health-monitoring/#health-dashboard-not-loading","title":"Health dashboard not loading","text":"<pre><code># Check if server is running\nlsof -i :3032\n\n# Start health dashboard\nnode integrations/system-health-dashboard/server.js &amp;\n</code></pre>"},{"location":"core-systems/","title":"Core Systems","text":"<p>The coding infrastructure consists of six interconnected systems that work together to create a self-improving development experience.</p> <p></p>"},{"location":"core-systems/#system-overview","title":"System Overview","text":"<ul> <li> <p> Live Session Logging (LSL)</p> <p>Captures every Claude conversation automatically with intelligent 5-layer classification that routes content between projects.</p> <p></p> <ul> <li>Real-time monitoring with zero data loss</li> <li>Automatic secret redaction</li> <li>Multi-project content routing</li> </ul> <p> Learn more</p> </li> <li> <p> Knowledge Management (UKB/VKB)</p> <p>14-agent AI system extracts insights from git history and conversation logs, building a searchable knowledge graph.</p> <p></p> <ul> <li>Incremental and full analysis modes</li> <li>Graph + vector database storage</li> <li>Interactive web visualization</li> </ul> <p> Learn more</p> </li> <li> <p> Constraint System</p> <p>20+ configurable constraints enforce code quality via PreToolUse hooks - preventing mistakes before they happen.</p> <p></p> <ul> <li>Real-time violation detection</li> <li>Web dashboard monitoring</li> <li>Auto-correction suggestions</li> </ul> <p> Learn more</p> </li> <li> <p> Trajectory Detection</p> <p>Tracks development progress and detects when you're deviating from your goals.</p> <p></p> <ul> <li>Real-time state tracking</li> <li>Goal deviation alerts</li> <li>Status line integration</li> </ul> <p> Learn more</p> </li> <li> <p> Health Monitoring</p> <p>4-layer watchdog architecture ensures system reliability with automatic recovery.</p> <p></p> <ul> <li>Process health monitoring</li> <li>Automatic restart on failure</li> <li>Multi-agent workflow visualization</li> </ul> <p> Learn more</p> </li> <li> <p> Status Line</p> <p>Real-time feedback in your terminal showing system health, API costs, and development state.</p> <p></p> <ul> <li>Service health indicators</li> <li>Cost tracking display</li> <li>Trajectory and LSL status</li> </ul> <p> Learn more</p> </li> </ul>"},{"location":"core-systems/#how-they-work-together","title":"How They Work Together","text":"<pre><code>flowchart TB\n    subgraph Input[\"Claude Session\"]\n        A[User Prompt]\n        B[Tool Calls]\n        C[Responses]\n    end\n\n    subgraph LSL[\"Live Session Logging\"]\n        D[Monitor] --&gt; E[5-Layer Classifier]\n        E --&gt; F[Redactor]\n        F --&gt; G{Route}\n        G --&gt;|Local| H[Project History]\n        G --&gt;|Coding| I[Coding History]\n    end\n\n    subgraph KB[\"Knowledge Management\"]\n        J[UKB Workflow] --&gt; K[14 Agents]\n        K --&gt; L[Graph DB]\n        K --&gt; M[Vector DB]\n        L --&gt; N[VKB Viewer]\n    end\n\n    subgraph Constraints[\"Constraint System\"]\n        O[PreToolUse Hook] --&gt; P[Validator]\n        P --&gt; Q{Compliant?}\n        Q --&gt;|No| R[Block + Suggest Fix]\n        Q --&gt;|Yes| S[Allow]\n    end\n\n    subgraph Feedback[\"Feedback Systems\"]\n        T[Status Line]\n        U[Health Monitor]\n        V[Trajectory Analyzer]\n    end\n\n    A --&gt; D\n    B --&gt; O\n    H --&gt; J\n    I --&gt; J\n    U --&gt; T\n    V --&gt; T</code></pre>"},{"location":"core-systems/#quick-command-reference","title":"Quick Command Reference","text":"System Command Description LSL Automatic Runs in background, no commands needed UKB <code>ukb</code> Incremental knowledge update UKB <code>ukb full</code> Full analysis from first commit UKB <code>ukb debug</code> Debug mode with mocked LLM VKB <code>vkb</code> Open knowledge viewer at <code>localhost:8080</code> Constraints Dashboard View at <code>localhost:3030</code> Health <code>coding --health</code> Check all service health Health Dashboard View at <code>localhost:3032</code>"},{"location":"core-systems/#data-flow","title":"Data Flow","text":"<p>The systems interact through shared data stores:</p> <pre><code>flowchart LR\n    subgraph Storage[\"Data Storage\"]\n        A[(\".specstory/history/\\nLSL Files\")]\n        B[(\".data/knowledge-graph/\\nGraph DB\")]\n        C[(\".data/vector-store/\\nVector DB\")]\n        D[(\".health/\\nHealth Files\")]\n    end\n\n    subgraph Systems\n        E[LSL Monitor] --&gt; A\n        A --&gt; F[UKB Workflow]\n        F --&gt; B\n        F --&gt; C\n        G[Health Monitor] --&gt; D\n    end\n\n    subgraph Viewers\n        B --&gt; H[VKB Web UI]\n        D --&gt; I[Health Dashboard]\n    end</code></pre>"},{"location":"core-systems/#system-states","title":"System States","text":"<p>Each system reports its status through health files and the status line:</p> State Icon Meaning  Healthy Green Service running normally  Degraded Yellow Service running with issues  Failed Red Service not responding  Transitioning Blue Mode switch in progress"},{"location":"core-systems/#architecture-diagrams","title":"Architecture Diagrams","text":""},{"location":"core-systems/#lsl-5-layer-classification","title":"LSL 5-Layer Classification","text":""},{"location":"core-systems/#ukb-multi-agent-workflow","title":"UKB Multi-Agent Workflow","text":""},{"location":"core-systems/#constraint-monitoring-flow","title":"Constraint Monitoring Flow","text":""},{"location":"core-systems/#health-monitoring-architecture","title":"Health Monitoring Architecture","text":""},{"location":"core-systems/#related-documentation","title":"Related Documentation","text":"<ul> <li>Architecture Overview - System design principles</li> <li>Data Flow - Detailed data flow diagrams</li> <li>Integrations - MCP server details</li> </ul>"},{"location":"core-systems/constraints/","title":"Constraints - Code Quality Enforcement","text":"<p>Real-time code quality enforcement through PreToolUse hooks.</p> <p></p>"},{"location":"core-systems/constraints/#what-it-does","title":"What It Does","text":"<ul> <li>PreToolUse Hook Enforcement - Blocks violations BEFORE tool execution</li> <li>20 Active Constraints - Security, architecture, code quality, PlantUML, documentation</li> <li>Severity-Based Enforcement - CRITICAL/ERROR blocks, WARNING/INFO allows</li> <li>Compliance Scoring - Real-time 0-10 scoring</li> <li>Dashboard Monitoring - Live violation feed at <code>http://localhost:3030</code></li> </ul>"},{"location":"core-systems/constraints/#how-it-works","title":"How It Works","text":"<ol> <li>PreToolUse Hook Fires - Before tool execution</li> <li>Constraint Check - Analyzes parameters against 20 constraints</li> <li>Pattern Matching - Regex patterns detect violations</li> <li>Severity Evaluation - Determines enforcement action</li> <li>Decision:</li> <li>CRITICAL/ERROR: BLOCK (exit code 1)</li> <li>WARNING/INFO: ALLOW with feedback (exit code 0)</li> </ol>"},{"location":"core-systems/constraints/#severity-levels","title":"Severity Levels","text":"Severity Impact Enforcement Tool Call CRITICAL -3.0 BLOCK Prevented ERROR -2.0 BLOCK Prevented WARNING -1.0 ALLOW Proceeds with warning INFO -0.5 ALLOW Proceeds with info"},{"location":"core-systems/constraints/#active-constraints","title":"Active Constraints","text":""},{"location":"core-systems/constraints/#security-2-100-detection","title":"Security (2) - 100% Detection","text":"Constraint Severity <code>no-hardcoded-secrets</code> CRITICAL <code>no-eval-usage</code> CRITICAL"},{"location":"core-systems/constraints/#architecture-3-100-detection","title":"Architecture (3) - 100% Detection","text":"Constraint Severity <code>no-parallel-files</code> CRITICAL <code>debug-not-speculate</code> ERROR <code>no-evolutionary-names</code> ERROR"},{"location":"core-systems/constraints/#code-quality-7","title":"Code Quality (7)","text":"Constraint Severity <code>proper-error-handling</code> ERROR <code>no-console-log</code> WARNING <code>no-console-error</code> WARNING <code>no-console-warn</code> WARNING <code>no-var-declarations</code> WARNING <code>proper-function-naming</code> INFO <code>no-magic-numbers</code> INFO"},{"location":"core-systems/constraints/#plantuml-5","title":"PlantUML (5)","text":"Constraint Severity <code>plantuml-standard-styling</code> ERROR <code>plantuml-file-organization</code> INFO <code>plantuml-file-location</code> WARNING <code>plantuml-diagram-workflow</code> INFO <code>plantuml-readability-guidelines</code> INFO"},{"location":"core-systems/constraints/#dashboard","title":"Dashboard","text":"<p>URL: <code>http://localhost:3030</code></p> <p>Features:</p> <ul> <li>Real-time violation feed</li> <li>Compliance score gauge (0-10)</li> <li>7-day trend chart</li> <li>Project selector</li> <li>Constraint toggles</li> </ul>"},{"location":"core-systems/constraints/#api-endpoints-port-3031","title":"API Endpoints (Port 3031)","text":"Endpoint Method Description <code>/api/violations</code> GET List violations <code>/api/violations</code> POST Log violation <code>/api/compliance/:project</code> GET Project compliance score <code>/api/constraints</code> GET List enabled constraints <code>/api/health</code> GET Health check"},{"location":"core-systems/constraints/#configuration","title":"Configuration","text":"<p>File: <code>integrations/mcp-constraint-monitor/constraints.yaml</code></p> <pre><code>- id: no-hardcoded-secrets\n  group: security\n  pattern: 'API_KEY|SECRET|TOKEN pattern here'\n  message: 'CRITICAL: Potential hardcoded secret detected'\n  severity: critical\n  enabled: true\n  suggestion: Use environment variables instead\n</code></pre>"},{"location":"core-systems/constraints/#enabledisable","title":"Enable/Disable","text":"<pre><code>- id: no-console-log\n  enabled: false  # Disable this constraint\n</code></pre>"},{"location":"core-systems/constraints/#key-files","title":"Key Files","text":"File Purpose <code>src/hooks/pre-tool-hook-wrapper.js</code> PreToolUse hook entry <code>src/enforcement/ConstraintEnforcer.js</code> Enforcement engine <code>constraints.yaml</code> Constraint definitions <code>src/dashboard/api/</code> REST API <code>src/dashboard/ui/</code> Next.js dashboard"},{"location":"core-systems/constraints/#status-line-integration","title":"Status Line Integration","text":"<p>Format: <code>[SHIELD {compliance}% {trajectory}]</code></p> <p>Example: <code>[SHIELD 94% IMP]</code> shows 94% compliance and \"implementing\" state.</p>"},{"location":"core-systems/lsl/","title":"LSL - Live Session Logging","text":"<p>Real-time conversation monitoring and intelligent classification with zero data loss.</p> <p></p> <p></p>"},{"location":"core-systems/lsl/#what-it-does","title":"What It Does","text":"<ul> <li>Real-Time Monitoring - Captures every Claude conversation as it happens</li> <li>Intelligent Classification - 5-layer system routes content (LOCAL vs CODING)</li> <li>Zero Data Loss - 4-layer monitoring architecture ensures reliability</li> <li>Multi-Project Support - Handles multiple projects with foreign session tracking</li> <li>Security Redaction - Automatic sanitization of secrets and credentials</li> </ul>"},{"location":"core-systems/lsl/#5-layer-classification","title":"5-Layer Classification","text":"Layer Name Function Speed 0 Session Filter Conversation context and bias tracking Instant 1 PathAnalyzer File operation pattern matching &lt;1ms 2 KeywordMatcher Fast keyword-based classification &lt;10ms 3 EmbeddingClassifier Semantic vector similarity ~50ms 4 SemanticAnalyzer LLM-powered deep understanding &lt;10ms (cached) <p>Early exit optimization: Classification stops at first confident decision.</p>"},{"location":"core-systems/lsl/#4-layer-monitoring-architecture","title":"4-Layer Monitoring Architecture","text":"Layer Component Function 1 Watchdog Top-level supervisor, restarts failed processes 2 Coordinator Manages monitors across all projects 3 Verifier Health checks, detects stuck processes 4 Self-Monitoring Per-monitor health files with metrics"},{"location":"core-systems/lsl/#content-routing","title":"Content Routing","text":"<p>LOCAL Content (Project-Specific):</p> <ul> <li>Stored in: <code>project/.specstory/history/</code></li> <li>Format: <code>YYYY-MM-DD_HHMM-HHMM_&lt;userhash&gt;.md</code></li> </ul> <p>CODING Content (Infrastructure):</p> <ul> <li>Redirected to: <code>coding/.specstory/history/</code></li> <li>Format: <code>YYYY-MM-DD_HHMM-HHMM_&lt;userhash&gt;_from-&lt;project&gt;.md</code></li> </ul>"},{"location":"core-systems/lsl/#security-redaction","title":"Security Redaction","text":"<p>13 pattern types automatically sanitized:</p> <ul> <li>API keys and tokens</li> <li>Passwords and credentials</li> <li>URLs with embedded passwords</li> <li>Email addresses</li> <li>Corporate user IDs</li> </ul> <p>Performance: &lt;5ms overhead per exchange.</p>"},{"location":"core-systems/lsl/#configuration","title":"Configuration","text":"<p>File: <code>config/live-logging-config.json</code></p> <pre><code>{\n  \"session_filter\": {\n    \"enabled\": true,\n    \"bias_threshold\": 0.65,\n    \"window_size\": 5\n  },\n  \"embedding_classifier\": {\n    \"enabled\": true,\n    \"similarity_threshold\": 0.65,\n    \"model\": \"Xenova/all-MiniLM-L6-v2\"\n  },\n  \"semantic_analyzer\": {\n    \"enabled\": true,\n    \"provider\": \"groq\",\n    \"model\": \"llama-3.3-70b\"\n  }\n}\n</code></pre>"},{"location":"core-systems/lsl/#key-files","title":"Key Files","text":"File Purpose <code>scripts/enhanced-transcript-monitor.js</code> Core monitoring process <code>src/live-logging/ReliableCodingClassifier.js</code> 5-layer classification <code>src/live-logging/ConfigurableRedactor.js</code> Security redaction <code>monitoring/global-monitor-watchdog.js</code> System-level watchdog"},{"location":"core-systems/lsl/#troubleshooting","title":"Troubleshooting","text":""},{"location":"core-systems/lsl/#monitor-not-starting","title":"Monitor not starting","text":"<pre><code># Check if running\nps aux | grep enhanced-transcript-monitor\n\n# Check health file\ncat .health/coding-transcript-monitor-health.json\n\n# Restart via coding command\ncoding --restart-monitor\n</code></pre>"},{"location":"core-systems/lsl/#lsl-files-not-generated","title":"LSL files not generated","text":"<pre><code># Verify monitor is processing\ntail -50 .logs/transcript-monitor-test.log\n\n# Check today's files\nls -la .specstory/history/ | grep \"$(date +%Y-%m-%d)\"\n\n# Recover from transcripts\nPROJECT_PATH=/path/to/project CODING_REPO=/path/to/coding \\\n  node scripts/batch-lsl-processor.js from-transcripts ~/.claude/projects/-path-to-project\n</code></pre>"},{"location":"core-systems/lsl/#classification-issues","title":"Classification issues","text":"<pre><code># Check classification logs\nls -la .specstory/logs/classification/\n\n# Verify config\ncat config/live-logging-config.json | jq '.embedding_classifier'\n</code></pre>"},{"location":"core-systems/trajectories/","title":"Trajectories - Development State Analysis","text":"<p>AI-powered development activity tracking and project capability documentation.</p> <p></p>"},{"location":"core-systems/trajectories/#what-it-does","title":"What It Does","text":"<ul> <li>Real-Time State Tracking - AI classifies current development activity</li> <li>Comprehensive Reports - Automated project capability documentation</li> <li>Status Line Integration - Real-time trajectory state display</li> <li>MCP-Powered Analysis - Deep semantic understanding of code patterns</li> </ul>"},{"location":"core-systems/trajectories/#two-trajectory-systems","title":"Two Trajectory Systems","text":""},{"location":"core-systems/trajectories/#1-real-time-analysis","title":"1. Real-Time Analysis","text":"<p>AI-powered session state classification during active development.</p> <ul> <li>Integrated with LSL for continuous monitoring</li> <li>Updates status line in real-time</li> <li>Smart analysis limits (50 analyses/hour)</li> </ul>"},{"location":"core-systems/trajectories/#2-report-generation","title":"2. Report Generation","text":"<p>Comprehensive project capability documentation.</p> <ul> <li>Repository scanning with semantic analysis</li> <li>Light analysis (50 files, ~2 min) or deep analysis (200 files, ~10 min)</li> <li>Capability extraction and categorization</li> </ul>"},{"location":"core-systems/trajectories/#trajectory-states","title":"Trajectory States","text":"State Icon Meaning Exploring EX Information gathering and analysis On Track ON Productive trajectory progression Off Track OFF Deviating from optimal path Implementing IMP Active code modification Verifying VER Testing and validation Blocked BLK Intervention preventing action"},{"location":"core-systems/trajectories/#status-line-display","title":"Status Line Display","text":"<p>Format: <code>[SHIELD {compliance}% {trajectory}]</code></p> <p>Example: <code>[SHIELD 94% IMP]</code></p> <ul> <li>94% constraint compliance</li> <li>Currently in \"implementing\" state</li> </ul>"},{"location":"core-systems/trajectories/#configuration","title":"Configuration","text":"<p>File: <code>config/live-logging-config.json</code></p> <pre><code>{\n  \"trajectory_analysis\": {\n    \"enabled\": true,\n    \"inference_provider\": \"groq\",\n    \"inference_model\": \"gpt-oss-20b\",\n    \"fallback_provider\": \"openai\",\n    \"analysis_interval\": 5000,\n    \"smart_analysis\": {\n      \"enabled\": true,\n      \"only_significant_exchanges\": true,\n      \"skip_consecutive_reads\": true,\n      \"max_analyses_per_hour\": 50\n    }\n  }\n}\n</code></pre>"},{"location":"core-systems/trajectories/#usage","title":"Usage","text":""},{"location":"core-systems/trajectories/#real-time-tracking-automatic","title":"Real-Time Tracking (Automatic)","text":"<p>No manual intervention required. Works when:</p> <ul> <li>Enhanced Transcript Monitor is active</li> <li>Trajectory analysis is enabled in config</li> <li>LSL system is capturing conversations</li> </ul>"},{"location":"core-systems/trajectories/#generate-reports-manual","title":"Generate Reports (Manual)","text":"<pre><code># Light analysis\nnode scripts/repository-trajectory-generator.js --level=light\n\n# Deep analysis\nnode scripts/repository-trajectory-generator.js --level=deep\n\n# With LSL integration\nnode scripts/repository-trajectory-generator.js --include-lsl-data\n</code></pre>"},{"location":"core-systems/trajectories/#report-structure","title":"Report Structure","text":"<pre><code># Project Trajectory Report\n\n## System Capabilities\n- Core infrastructure analysis\n- Feature capabilities\n- Integration points\n\n## Architectural Insights\n- Design patterns detected\n- System architecture overview\n\n## Technology Stack\n- Dependencies and frameworks\n- Development tools\n\n## Recent Evolution\n- Change log integration\n- LSL session insights\n</code></pre>"},{"location":"core-systems/trajectories/#key-files","title":"Key Files","text":"<p>Real-Time Analysis:</p> <ul> <li><code>src/live-logging/RealTimeTrajectoryAnalyzer.js</code> - AI state classification</li> <li><code>.specstory/trajectory/live-state.json</code> - Current state</li> <li><code>scripts/combined-status-line.js</code> - Status line integration</li> </ul> <p>Report Generation:</p> <ul> <li><code>scripts/repository-trajectory-generator.js</code> - Main orchestrator</li> <li><code>config/trajectory-analysis.json</code> - Generation config</li> <li><code>.specstory/comprehensive-project-trajectory.md</code> - Generated report</li> </ul>"},{"location":"core-systems/trajectories/#state-persistence","title":"State Persistence","text":"<p>File: <code>.specstory/trajectory/live-state.json</code></p> <pre><code>{\n  \"currentState\": \"implementing\",\n  \"confidence\": 0.85,\n  \"timestamp\": \"2025-01-15T10:30:00.000Z\",\n  \"history\": [\n    {\"state\": \"exploring\", \"timestamp\": \"...\"},\n    {\"state\": \"implementing\", \"timestamp\": \"...\"}\n  ]\n}\n</code></pre>"},{"location":"core-systems/ukb-vkb/","title":"UKB/VKB - Knowledge Management","text":"<p>Two complementary approaches for capturing and visualizing development insights.</p> <p></p>"},{"location":"core-systems/ukb-vkb/#two-systems","title":"Two Systems","text":"System Trigger Purpose UKB (Update Knowledge Base) Manual/MCP Curated insights, team sharing Continuous Learning Automatic Real-time session learning VKB (Visualize) <code>vkb</code> command Web-based visualization <p>Not Parallel Systems</p> <p>UKB and Continuous Learning serve different purposes:</p> <ul> <li>UKB: Manual curation, git-tracked, team collaboration</li> <li>Continuous Learning: Automatic, private, semantic retrieval</li> </ul>"},{"location":"core-systems/ukb-vkb/#ukb-manualbatch","title":"UKB (Manual/Batch)","text":""},{"location":"core-systems/ukb-vkb/#what-it-does","title":"What It Does","text":"<ul> <li>Analyzes git commits for patterns</li> <li>Interactive structured capture</li> <li>Ontology classification (4-layer pipeline)</li> <li>Git-tracked JSON exports for team sharing</li> </ul>"},{"location":"core-systems/ukb-vkb/#usage-within-claude-code","title":"Usage (Within Claude Code)","text":"<pre><code># Incremental analysis (recent changes)\n\"ukb\"\n\n# Full analysis (entire codebase)\n\"full ukb\"\n</code></pre>"},{"location":"core-systems/ukb-vkb/#storage","title":"Storage","text":"<pre><code>.data/knowledge-graph/     # Graphology + LevelDB\n.data/knowledge-export/    # Git-tracked JSON exports\n  coding.json\n  other-project.json\n</code></pre>"},{"location":"core-systems/ukb-vkb/#ontology-classification","title":"Ontology Classification","text":"<p>5 entity classes:</p> Class Description ImplementationPattern Code patterns and best practices ArchitecturalDecision System design choices TechnicalSolution Problem-solving approaches WorkflowPattern Development process patterns ConfigurationPattern Setup and configuration knowledge"},{"location":"core-systems/ukb-vkb/#continuous-learning-automatic","title":"Continuous Learning (Automatic)","text":""},{"location":"core-systems/ukb-vkb/#what-it-does_1","title":"What It Does","text":"<ul> <li>Real-time extraction from LSL exchanges</li> <li>Embedding generation (384-dim or 1536-dim)</li> <li>Semantic search across sessions</li> <li>Budget-aware LLM usage ($8.33/month limit)</li> </ul>"},{"location":"core-systems/ukb-vkb/#storage_1","title":"Storage","text":"<pre><code>Qdrant (Vector Database):\n  knowledge_patterns (1536-dim)\n  knowledge_patterns_small (384-dim)\n  session_memory (384-dim)\n\nSQLite (.cache/knowledge.db):\n  budget_events\n  knowledge_extractions\n  embedding_cache\n</code></pre>"},{"location":"core-systems/ukb-vkb/#privacy-first","title":"Privacy-First","text":"<p>5-layer sensitivity classification routes data:</p> <ul> <li>Sensitive data goes to local models (free, private)</li> <li>Safe data goes to remote models (fast, accurate)</li> </ul>"},{"location":"core-systems/ukb-vkb/#vkb-visualization","title":"VKB (Visualization)","text":"<pre><code># Start visualization server\nvkb\n\n# Opens browser to http://localhost:8080\n</code></pre>"},{"location":"core-systems/ukb-vkb/#features","title":"Features","text":"<ul> <li>Interactive force-directed graph</li> <li>Color-coding by entity type</li> <li>Full-text search</li> <li>Filter by type, significance, source</li> <li>Entity relationship exploration</li> </ul>"},{"location":"core-systems/ukb-vkb/#comparison","title":"Comparison","text":"Aspect UKB Continuous Learning Trigger Manual MCP command Automatic Input Git commits, prompts LSL exchanges Storage GraphDB Qdrant + SQLite Collaboration Git-tracked Local only Search Name/type-based Semantic similarity"},{"location":"core-systems/ukb-vkb/#when-to-use-ukb","title":"When to Use UKB","text":"<ul> <li>Documenting architectural decisions</li> <li>Post-sprint knowledge capture</li> <li>Creating team knowledge base</li> <li>Recording bug fix patterns</li> </ul>"},{"location":"core-systems/ukb-vkb/#when-to-use-continuous-learning","title":"When to Use Continuous Learning","text":"<ul> <li>Automatic (always on)</li> <li>Semantic search during development</li> <li>Cross-session continuity</li> <li>Private session learning</li> </ul>"},{"location":"core-systems/ukb-vkb/#key-files","title":"Key Files","text":"<p>UKB:</p> <ul> <li><code>lib/knowledge-api/</code> - Core implementation</li> <li><code>.data/knowledge-graph/</code> - GraphDB storage</li> <li><code>.data/knowledge-export/</code> - JSON exports</li> </ul> <p>Continuous Learning:</p> <ul> <li><code>src/live-logging/StreamingKnowledgeExtractor.js</code></li> <li><code>src/knowledge-management/EmbeddingGenerator.js</code></li> <li><code>.cache/knowledge.db</code> - SQLite analytics</li> </ul> <p>VKB:</p> <ul> <li><code>bin/vkb</code> - Start server</li> <li><code>integrations/vkb-visualizer/</code> - Web UI</li> </ul>"},{"location":"getting-started/","title":"Getting Started","text":"<p>Get coding running in under 5 minutes.</p> <p></p>"},{"location":"getting-started/#installation-options","title":"Installation Options","text":"<p>Choose your deployment mode:</p> Docker (Recommended)Native <p></p> <p>Benefits:</p> <ul> <li>Isolated services in containers</li> <li>Persistent state survives restarts</li> <li>Multiple Claude sessions share browser</li> <li>Consistent behavior across machines</li> <li>Easy cleanup (just stop containers)</li> </ul> <p>Requirements: Docker Desktop or Docker Engine</p> <p>Install with Docker</p> <p>Benefits:</p> <ul> <li>Lower resource usage (no Docker overhead)</li> <li>Direct access to processes for debugging</li> <li>Works without Docker installed</li> <li>Faster startup</li> </ul> <p>Requirements: Node.js 18+ only</p> <p>Install Native</p>"},{"location":"getting-started/#prerequisites","title":"Prerequisites","text":"Tool Required Purpose Node.js 18+ Yes Runtime for all services Git Yes Clone repository, submodules jq Yes JSON processing in scripts Docker For Docker mode Container runtime"},{"location":"getting-started/#quick-install","title":"Quick Install","text":"macOSLinux (Ubuntu/Debian)Windows (WSL2) <pre><code>brew install git node jq\nbrew install --cask docker  # For Docker mode\n</code></pre> <pre><code>sudo apt update &amp;&amp; sudo apt install -y git nodejs npm jq\ncurl -fsSL https://get.docker.com | sh  # For Docker mode\n</code></pre> <p>Install Docker Desktop, then in WSL2: <pre><code>sudo apt update &amp;&amp; sudo apt install -y git nodejs npm jq\n</code></pre></p>"},{"location":"getting-started/#quick-start","title":"Quick Start","text":"<pre><code># 1. Clone repository with submodules\ngit clone --recurse-submodules https://github.com/fwornle/coding ~/Agentic/coding\ncd ~/Agentic/coding\n\n# 2. Run installer (Docker mode is default)\n./install.sh\n\n# 3. Reload shell\nsource ~/.bashrc  # or ~/.zshrc\n\n# 4. Start coding\ncoding\n</code></pre> <p>That's it! The installer handles everything automatically.</p>"},{"location":"getting-started/#what-gets-installed","title":"What Gets Installed","text":"Component Description <code>coding</code> Launch Claude Code with all integrations <code>vkb</code> View Knowledge Base (web visualization) <code>ukb</code> Update Knowledge Base (knowledge extraction) MCP Servers Semantic Analysis, Constraint Monitor, Browser Access, Code Graph LSL Live Session Logging with 4-layer monitoring Hooks PreToolUse (constraints) and PostToolUse (logging)"},{"location":"getting-started/#installation-safety","title":"Installation Safety","text":"<p>The installer follows a non-intrusive policy:</p> <ul> <li>Prompts before any system-level changes</li> <li>Creates timestamped backups of shell config</li> <li>Supports <code>--skip-all</code> to decline all system changes</li> <li>All data stays in <code>~/Agentic/coding/</code></li> </ul>"},{"location":"getting-started/#verification","title":"Verification","text":"<p>After installation, verify everything is working:</p> <pre><code>coding --health\n</code></pre> <p></p> <p>All services should show green. If you see issues, run:</p> <pre><code>./scripts/test-coding.sh --interactive\n</code></pre> <p>Full Verification Guide</p>"},{"location":"getting-started/#first-usage","title":"First Usage","text":""},{"location":"getting-started/#start-a-session","title":"Start a Session","text":"<pre><code># Launch Claude Code with all systems\ncoding\n\n# Or specify a project directory\ncoding --project ~/my-project\n</code></pre>"},{"location":"getting-started/#view-knowledge-graph","title":"View Knowledge Graph","text":"<pre><code>vkb  # Opens browser to http://localhost:8080\n</code></pre>"},{"location":"getting-started/#update-knowledge-base","title":"Update Knowledge Base","text":"<p>Within a Claude Code session:</p> <pre><code># Incremental analysis (recent changes)\n\"ukb\" or \"update knowledge base\"\n\n# Full analysis (entire codebase history)\n\"ukb full\" or \"fully update knowledge base\"\n\n# Debug mode (single-stepping)\n\"ukb debug\"\n</code></pre>"},{"location":"getting-started/#next-steps","title":"Next Steps","text":"<ul> <li> <p> Configuration</p> <p>Set up API keys for LLM providers</p> <p> Configure</p> </li> <li> <p> Docker Mode</p> <p>Deep dive into Docker deployment</p> <p> Docker details</p> </li> <li> <p> Verify &amp; Repair</p> <p>Troubleshoot installation issues</p> <p> Verify</p> </li> <li> <p> Core Systems</p> <p>Learn about LSL, UKB/VKB, Constraints</p> <p> Explore</p> </li> </ul>"},{"location":"getting-started/configuration/","title":"Configuration","text":"<p>API keys, port assignments, and MCP server configuration.</p>"},{"location":"getting-started/configuration/#api-keys","title":"API Keys","text":"<p>Create <code>.env</code> file with your provider keys:</p> <pre><code>cp .env.example .env\n</code></pre> <pre><code># LLM Providers (configure at least ONE)\nGROQ_API_KEY=your-groq-key           # Recommended - fastest\nANTHROPIC_API_KEY=sk-ant-...         # High quality\nOPENAI_API_KEY=sk-...                # GPT models\nGOOGLE_API_KEY=...                   # Gemini\n\n# Auto-configured by installer\nCODING_TOOLS_PATH=/Users/&lt;username&gt;/Agentic/coding\nCODING_REPO=/Users/&lt;username&gt;/Agentic/coding\n</code></pre> <p>Port Configuration</p> <p>All ports (including DMR, browser automation, etc.) are centralized in <code>.env.ports</code>. See the Port Configuration section below for details.</p>"},{"location":"getting-started/configuration/#port-configuration","title":"Port Configuration","text":"<p>All ports are centralized in <code>.env.ports</code>:</p> Port Service 8080 VKB Server (Knowledge visualization) 3030 Constraint Dashboard UI 3031 Constraint Monitor API 3032 System Health Dashboard UI 3033 System Health API 7687 Memgraph (Bolt protocol) 3100 Memgraph Lab UI 12434 Docker Model Runner"},{"location":"getting-started/configuration/#docker-mode-ports","title":"Docker Mode Ports","text":"Port Service 3847 Browser Access SSE 3848 Semantic Analysis SSE 3849 Constraint Monitor SSE 3850 Code Graph RAG SSE 6333 Qdrant HTTP 6379 Redis"},{"location":"getting-started/configuration/#mcp-hook-configuration","title":"MCP &amp; Hook Configuration","text":"<p>MCP servers and hooks are configured automatically by the installer. No manual configuration required.</p> <p>Troubleshooting</p> <p>If you need to inspect or repair configurations:</p> <ul> <li>MCP config: <code>~/.claude/claude_desktop_config.json</code> (macOS/Linux) or <code>%APPDATA%/Claude/</code> (Windows)</li> <li>Hooks config: <code>~/.claude/settings.json</code></li> <li>Re-run installer: <code>./install.sh</code> will repair any missing configuration</li> </ul>"},{"location":"getting-started/configuration/#key-directories","title":"Key Directories","text":"Path Purpose <code>~/Agentic/coding/</code> Main repository <code>~/.coding-tools/</code> Installed binaries <code>~/.claude/</code> Claude Code configs <code>.data/knowledge-graph/</code> GraphDB storage <code>.data/knowledge-export/</code> Git-tracked JSON exports <code>.specstory/history/</code> LSL session logs"},{"location":"getting-started/docker-mode/","title":"Docker Mode","text":"<p>Containerized deployment for persistent services and shared resources.</p> <p></p>"},{"location":"getting-started/docker-mode/#benefits","title":"Benefits","text":"<ul> <li>Persistent Services - MCP servers survive session restarts</li> <li>Shared Browser - Multiple Claude sessions share browser instance</li> <li>Isolated Databases - Qdrant, Redis, Memgraph in containers</li> <li>Consistent Environment - Same behavior across machines</li> </ul>"},{"location":"getting-started/docker-mode/#prerequisites","title":"Prerequisites","text":"<pre><code># macOS\nbrew install --cask docker\n\n# Linux\ncurl -fsSL https://get.docker.com | sh\n</code></pre>"},{"location":"getting-started/docker-mode/#enable-docker-mode","title":"Enable Docker Mode","text":"<pre><code># Create marker file\ntouch .docker-mode\n\n# Launch (services start automatically)\ncoding --claude\n</code></pre> <p>The <code>coding --claude</code> command:</p> <ol> <li>Detects Docker mode via <code>.docker-mode</code> marker</li> <li>Starts containers via Docker Compose</li> <li>Waits for health checks to pass</li> <li>Launches Claude with Docker MCP config</li> </ol> <p>Alternative</p> <p>Set environment variable instead of marker file: <pre><code>export CODING_DOCKER_MODE=true\n</code></pre></p>"},{"location":"getting-started/docker-mode/#verify-health","title":"Verify Health","text":"<pre><code># Container status\ndocker compose -f docker/docker-compose.yml ps\n\n# Health endpoints\ncurl http://localhost:3848/health  # Semantic Analysis\ncurl http://localhost:3847/health  # Browser Access\ncurl http://localhost:3849/health  # Constraint Monitor\ncurl http://localhost:3850/health  # Code Graph RAG\n</code></pre>"},{"location":"getting-started/docker-mode/#port-mapping","title":"Port Mapping","text":"Port Service Protocol 3847 Browser Access SSE HTTP/SSE 3848 Semantic Analysis SSE HTTP/SSE 3849 Constraint Monitor SSE HTTP/SSE 3850 Code Graph RAG SSE HTTP/SSE 8080 VKB Server HTTP 6333 Qdrant HTTP 6334 Qdrant gRPC 6379 Redis TCP 7687 Memgraph Bolt 3100 Memgraph Lab HTTP"},{"location":"getting-started/docker-mode/#architecture","title":"Architecture","text":"<p>The Docker architecture consists of:</p> <ul> <li>Host Machine: Claude CLI with lightweight stdio proxies</li> <li>Container: MCP SSE servers (semantic-analysis, browser-access, constraint-monitor, code-graph-rag)</li> <li>Databases: Qdrant, Redis, Memgraph running in containers</li> </ul> <p>See Architecture &gt; Data Flow for detailed diagrams.</p>"},{"location":"getting-started/docker-mode/#switch-between-modes","title":"Switch Between Modes","text":""},{"location":"getting-started/docker-mode/#enable-docker-mode_1","title":"Enable Docker Mode","text":"<pre><code>touch .docker-mode\ncoding --claude  # Services start automatically\n</code></pre>"},{"location":"getting-started/docker-mode/#disable-docker-mode","title":"Disable Docker Mode","text":"<pre><code>rm .docker-mode\ndocker compose -f docker/docker-compose.yml down\ncoding --claude  # Now runs in native mode\n</code></pre>"},{"location":"getting-started/docker-mode/#common-operations","title":"Common Operations","text":"<pre><code># View logs\ndocker compose -f docker/docker-compose.yml logs -f coding-services\n\n# Restart services\ndocker compose -f docker/docker-compose.yml restart\n\n# Rebuild after code changes\ndocker compose -f docker/docker-compose.yml build --no-cache\ndocker compose -f docker/docker-compose.yml up -d\n\n# Full stop\ndocker compose -f docker/docker-compose.yml down\n\n# Stop and remove volumes (data loss!)\ndocker compose -f docker/docker-compose.yml down -v\n</code></pre>"},{"location":"getting-started/docker-mode/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/docker-mode/#container-wont-start","title":"Container Won't Start","text":"<pre><code># Check logs\ndocker compose -f docker/docker-compose.yml logs coding-services\n\n# Force rebuild\ndocker compose -f docker/docker-compose.yml build --no-cache\ndocker compose -f docker/docker-compose.yml up -d\n</code></pre>"},{"location":"getting-started/docker-mode/#port-conflicts","title":"Port Conflicts","text":"<pre><code># Find process using port\nlsof -i :3848\n\n# Kill conflicting process or change ports in .env.ports\n</code></pre>"},{"location":"getting-started/docker-mode/#connection-refused","title":"Connection Refused","text":"<pre><code># Verify Docker mode is active\nls -la .docker-mode\n\n# Check container status\ndocker compose -f docker/docker-compose.yml ps\n\n# Test health endpoint\ncurl -v http://localhost:3848/health\n</code></pre>"},{"location":"getting-started/docker-mode/#volume-permission-issues","title":"Volume Permission Issues","text":"<pre><code># Fix directory permissions\nmkdir -p .data/knowledge-graph .specstory/history\nchmod -R 755 .data/ .specstory/\n\n# Restart\ndocker compose -f docker/docker-compose.yml restart\n</code></pre>"},{"location":"getting-started/installation/","title":"Installation","text":"<p>Step-by-step guide to install coding on your system.</p>"},{"location":"getting-started/installation/#prerequisites","title":"Prerequisites","text":"<p>Before installing, ensure you have these tools:</p> macOSLinux (Ubuntu/Debian)Windows (WSL2) <pre><code># Install prerequisites\nbrew install git node jq\n\n# Install Docker Desktop (for recommended Docker mode)\nbrew install --cask docker\n</code></pre> <pre><code># Install prerequisites\nsudo apt update &amp;&amp; sudo apt install -y git nodejs npm jq\n\n# Install Docker\ncurl -fsSL https://get.docker.com | sh\nsudo usermod -aG docker $USER  # Log out and back in\n</code></pre> <ol> <li>Install WSL2</li> <li>Install Docker Desktop</li> <li>In WSL2:    <pre><code>sudo apt update &amp;&amp; sudo apt install -y git nodejs npm jq\n</code></pre></li> </ol>"},{"location":"getting-started/installation/#version-requirements","title":"Version Requirements","text":"Tool Minimum Version Check Command Node.js 18+ <code>node --version</code> Git 2.0+ <code>git --version</code> Docker 20+ <code>docker --version</code> jq 1.6+ <code>jq --version</code>"},{"location":"getting-started/installation/#docker-installation-recommended","title":"Docker Installation (Recommended)","text":"<p>Docker mode provides the best experience with isolated services, persistent state, and easy management.</p> <p></p>"},{"location":"getting-started/installation/#step-1-clone-repository","title":"Step 1: Clone Repository","text":"<pre><code>git clone --recurse-submodules https://github.com/fwornle/coding ~/Agentic/coding\ncd ~/Agentic/coding\n</code></pre> <p>Existing Clone?</p> <p>If you already cloned without submodules: <pre><code>git submodule update --init --recursive\n</code></pre></p>"},{"location":"getting-started/installation/#step-2-run-installer","title":"Step 2: Run Installer","text":"<pre><code>./install.sh\n</code></pre> <p>The installer will:</p> <ol> <li>Detect Docker availability</li> <li>Create <code>.docker-mode</code> marker (enables Docker mode)</li> <li>Build Docker containers</li> <li>Configure Claude MCP servers for SSE/HTTP communication</li> <li>Set up Claude hooks (LSL, constraints)</li> <li>Initialize knowledge store</li> <li>Add <code>coding</code> and <code>vkb</code> commands to your PATH</li> </ol> <p>Non-Intrusive Installation</p> <p>The installer prompts before any system changes and creates timestamped backups of your shell configuration. Use <code>--skip-all</code> to decline all system-level changes.</p>"},{"location":"getting-started/installation/#step-3-reload-shell","title":"Step 3: Reload Shell","text":"<pre><code>source ~/.bashrc  # or ~/.zshrc for Zsh\n</code></pre>"},{"location":"getting-started/installation/#step-4-verify-installation","title":"Step 4: Verify Installation","text":"<pre><code>coding --health\n</code></pre> <p>You should see all services reporting healthy (green).</p>"},{"location":"getting-started/installation/#step-5-start-coding","title":"Step 5: Start Coding","text":"<pre><code>coding\n</code></pre>"},{"location":"getting-started/installation/#native-installation","title":"Native Installation","text":"<p>Native mode runs MCP servers as direct Node.js processes. Use this if you prefer not to use Docker or need lower resource usage.</p>"},{"location":"getting-started/installation/#installation-steps","title":"Installation Steps","text":"<pre><code># Clone repository\ngit clone --recurse-submodules https://github.com/fwornle/coding ~/Agentic/coding\ncd ~/Agentic/coding\n\n# Remove Docker mode marker (ensures native mode)\nrm -f .docker-mode\n\n# Run installer\n./install.sh\n\n# Reload shell\nsource ~/.bashrc  # or ~/.zshrc\n</code></pre>"},{"location":"getting-started/installation/#native-vs-docker-comparison","title":"Native vs Docker Comparison","text":"Aspect Docker Mode Native Mode Isolation Full container isolation Runs in your environment Persistence Services survive restarts Restarted each session Resources Higher (Docker overhead) Lower Setup Requires Docker Node.js only Browser sharing Multiple sessions share browser Per-session browser Debugging Container logs Direct process logs"},{"location":"getting-started/installation/#switching-modes","title":"Switching Modes","text":"<p>You can switch between Docker and Native modes at any time.</p>"},{"location":"getting-started/installation/#docker-to-native","title":"Docker to Native","text":"<pre><code>coding --switch-to-native\n</code></pre> <p>Or manually:</p> <pre><code>rm -f .docker-mode\ndocker compose -f docker/docker-compose.yml down\n</code></pre>"},{"location":"getting-started/installation/#native-to-docker","title":"Native to Docker","text":"<pre><code>coding --switch-to-docker\n</code></pre> <p>Or manually:</p> <pre><code>touch .docker-mode\n./install.sh  # Rebuilds Docker config\n</code></pre> <p></p> <p>For detailed transition documentation, see Docker Mode Setup Guide.</p>"},{"location":"getting-started/installation/#what-gets-installed","title":"What Gets Installed","text":"Component Location Purpose <code>coding</code> command <code>~/Agentic/coding/bin/</code> Launch Claude with all integrations <code>vkb</code> command <code>~/Agentic/coding/bin/</code> View Knowledge Base <code>ukb</code> command <code>~/Agentic/coding/bin/</code> Update Knowledge Base MCP Servers Docker or native Semantic Analysis, Constraints, etc. Claude Hooks <code>~/.claude/settings.json</code> LSL monitoring, constraint checks Knowledge Store <code>.data/knowledge-graph/</code> Graph database Session Logs <code>.specstory/history/</code> LSL files"},{"location":"getting-started/installation/#configuration-files-created","title":"Configuration Files Created","text":"File Purpose <code>~/.claude/settings.json</code> Claude hooks configuration <code>.env</code> API keys and settings <code>.env.ports</code> Port configuration <code>.docker-mode</code> Docker mode marker (if Docker)"},{"location":"getting-started/installation/#troubleshooting-installation","title":"Troubleshooting Installation","text":""},{"location":"getting-started/installation/#docker-not-found","title":"Docker Not Found","text":"<pre><code># Verify Docker is installed\ndocker --version\n\n# Verify Docker daemon is running\ndocker info\n\n# On macOS, ensure Docker Desktop is running\n</code></pre>"},{"location":"getting-started/installation/#permission-denied","title":"Permission Denied","text":"<pre><code># Fix Docker socket permissions (Linux)\nsudo usermod -aG docker $USER\n# Log out and back in\n\n# Fix directory permissions\nchmod -R 755 ~/Agentic/coding\n</code></pre>"},{"location":"getting-started/installation/#submodules-missing","title":"Submodules Missing","text":"<pre><code>cd ~/Agentic/coding\ngit submodule update --init --recursive\n</code></pre>"},{"location":"getting-started/installation/#port-conflicts","title":"Port Conflicts","text":"<pre><code># Check what's using a port\nlsof -i :8080\n\n# Change ports in .env.ports\ncat .env.ports\n</code></pre>"},{"location":"getting-started/installation/#reinstallation","title":"Reinstallation","text":"<p>To completely reinstall:</p> <pre><code>cd ~/Agentic/coding\n\n# Stop all services\ndocker compose -f docker/docker-compose.yml down 2&gt;/dev/null\npkill -f \"coding\"\n\n# Clean state (preserves knowledge base)\nrm -f .docker-mode .transition-in-progress\n\n# Reinstall\n./install.sh\n</code></pre>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<ul> <li>Verify Installation - Detailed verification and repair</li> <li>Configuration - API keys and provider setup</li> <li>First Usage - Start using coding</li> </ul>"},{"location":"getting-started/installation/#related-documentation","title":"Related Documentation","text":"<ul> <li>Docker Mode Details - In-depth Docker configuration</li> <li>Docker Mode Setup Guide - Advanced transition scenarios</li> <li>Troubleshooting - Common issues and solutions</li> </ul>"},{"location":"getting-started/verify-repair/","title":"Verify &amp; Repair Installation","text":"<p>Test your installation and fix common issues.</p>"},{"location":"getting-started/verify-repair/#quick-health-check","title":"Quick Health Check","text":"<p>Run the comprehensive health check:</p> <pre><code>coding --health\n</code></pre> <p></p> <p>A healthy system shows all services in green. If you see red indicators, follow the troubleshooting steps below.</p>"},{"location":"getting-started/verify-repair/#automated-test-suite","title":"Automated Test Suite","text":"<p>The test script verifies all components:</p> <pre><code># Check-only mode (default)\n./scripts/test-coding.sh\n\n# Interactive repair mode\n./scripts/test-coding.sh --interactive\n\n# Verbose output\n./scripts/test-coding.sh --verbose\n</code></pre>"},{"location":"getting-started/verify-repair/#test-categories","title":"Test Categories","text":"Test What It Checks Prerequisites Node.js, Git, jq, Docker versions Commands <code>coding</code>, <code>vkb</code>, <code>ukb</code> in PATH Configuration <code>.env</code>, hooks, MCP config Services Docker containers or native processes Connectivity Health endpoints, port availability Knowledge Base Graph database accessibility"},{"location":"getting-started/verify-repair/#detailed-verification","title":"Detailed Verification","text":""},{"location":"getting-started/verify-repair/#1-check-prerequisites","title":"1. Check Prerequisites","text":"<pre><code># Node.js 18+\nnode --version\n\n# Git\ngit --version\n\n# jq\njq --version\n\n# Docker (if Docker mode)\ndocker --version\ndocker info\n</code></pre>"},{"location":"getting-started/verify-repair/#2-verify-commands-available","title":"2. Verify Commands Available","text":"<pre><code># Should show help\ncoding --help\nvkb --help\n\n# Check locations\nwhich coding\nwhich vkb\n</code></pre> <p>If commands not found, check your PATH:</p> <pre><code>echo $PATH | grep -q \"Agentic/coding/bin\" &amp;&amp; echo \"OK\" || echo \"Missing from PATH\"\n</code></pre>"},{"location":"getting-started/verify-repair/#3-check-docker-services-docker-mode","title":"3. Check Docker Services (Docker Mode)","text":"<pre><code># List running containers\ndocker compose -f ~/Agentic/coding/docker/docker-compose.yml ps\n\n# Expected output shows these services running:\n# - coding-services (main MCP servers)\n# - memgraph (graph database)\n# - qdrant (vector database)\n</code></pre>"},{"location":"getting-started/verify-repair/#4-test-health-endpoints","title":"4. Test Health Endpoints","text":"<pre><code># Semantic Analysis MCP\ncurl -s http://localhost:3848/health | jq .\n\n# Constraint Monitor MCP\ncurl -s http://localhost:3031/health | jq .\n\n# VKB Server\ncurl -s http://localhost:8080/health | jq .\n\n# Health Dashboard\ncurl -s http://localhost:3032/health | jq .\n</code></pre>"},{"location":"getting-started/verify-repair/#5-verify-lsl-monitor","title":"5. Verify LSL Monitor","text":"<pre><code># Check monitor health file\ncat .health/coding-transcript-monitor-health.json | jq '{status, activity, lastCheck}'\n\n# Check if monitor process is running\nps aux | grep -v grep | grep \"enhanced-transcript-monitor\"\n</code></pre>"},{"location":"getting-started/verify-repair/#6-test-knowledge-base","title":"6. Test Knowledge Base","text":"<pre><code># Check knowledge store exists\nls -la .data/knowledge-graph/\n\n# Test VKB connection\ncurl -s http://localhost:8080/api/entities | jq 'length'\n</code></pre>"},{"location":"getting-started/verify-repair/#common-issues-and-fixes","title":"Common Issues and Fixes","text":""},{"location":"getting-started/verify-repair/#services-not-starting","title":"Services Not Starting","text":"<p>Symptoms: Health check shows services as red/unavailable</p> <p>Docker Mode Fix: <pre><code># Restart Docker services\ndocker compose -f docker/docker-compose.yml restart\n\n# If that fails, rebuild\ndocker compose -f docker/docker-compose.yml down\ndocker compose -f docker/docker-compose.yml up -d --build\n</code></pre></p> <p>Native Mode Fix: <pre><code># Restart services\ncoding --restart-services\n</code></pre></p>"},{"location":"getting-started/verify-repair/#port-conflicts","title":"Port Conflicts","text":"<p>Symptoms: \"Address already in use\" errors</p> <p>Fix: <pre><code># Find what's using the port\nlsof -i :8080\n\n# Kill the process or change port in .env.ports\nnano .env.ports\n\n# Restart services after port change\ndocker compose -f docker/docker-compose.yml down\ndocker compose -f docker/docker-compose.yml up -d\n</code></pre></p>"},{"location":"getting-started/verify-repair/#mcp-connection-errors","title":"MCP Connection Errors","text":"<p>Symptoms: Claude can't connect to MCP servers</p> <p>Fix: <pre><code># Verify MCP config\ncat ~/.claude/settings.json | jq '.mcpServers'\n\n# Reinstall hooks and config\n./install.sh --mcp-only\n</code></pre></p>"},{"location":"getting-started/verify-repair/#lsl-not-recording","title":"LSL Not Recording","text":"<p>Symptoms: No files in <code>.specstory/history/</code></p> <p>Fix: <pre><code># Check monitor status\ncat .health/coding-transcript-monitor-health.json\n\n# Restart monitor\ncoding --restart-monitor\n\n# If still failing, check logs\ntail -100 .logs/transcript-monitor-test.log\n</code></pre></p>"},{"location":"getting-started/verify-repair/#knowledge-base-corrupted","title":"Knowledge Base Corrupted","text":"<p>Symptoms: VKB shows errors, <code>ukb</code> fails</p> <p>Fix: <pre><code># Backup current data\ncp -r .data/knowledge-graph .data/knowledge-graph.backup\n\n# Reset knowledge base\nrm -rf .data/knowledge-graph\nmkdir -p .data/knowledge-graph\n\n# Re-run full analysis\n# (within Claude session)\nukb full\n</code></pre></p>"},{"location":"getting-started/verify-repair/#docker-mode-not-detected","title":"Docker Mode Not Detected","text":"<p>Symptoms: Services run in native mode despite Docker installed</p> <p>Fix: <pre><code># Create Docker mode marker\ntouch .docker-mode\n\n# Verify\nls -la .docker-mode\n\n# Restart\ncoding\n</code></pre></p>"},{"location":"getting-started/verify-repair/#repair-commands","title":"Repair Commands","text":""},{"location":"getting-started/verify-repair/#full-repair","title":"Full Repair","text":"<pre><code>./install.sh --repair\n</code></pre> <p>This will: 1. Check all prerequisites 2. Reinstall missing components 3. Rebuild Docker containers (if Docker mode) 4. Reset configuration to defaults 5. Restart all services</p>"},{"location":"getting-started/verify-repair/#selective-repair","title":"Selective Repair","text":"<pre><code># Repair only MCP configuration\n./install.sh --mcp-only\n\n# Repair only hooks\n./install.sh --hooks-only\n\n# Rebuild Docker containers\ncd docker &amp;&amp; docker-compose build --no-cache &amp;&amp; docker-compose up -d\n</code></pre>"},{"location":"getting-started/verify-repair/#reset-to-clean-state","title":"Reset to Clean State","text":"<p>Data Loss</p> <p>This removes all local data including knowledge base and session logs.</p> <pre><code># Stop everything\ndocker compose -f docker/docker-compose.yml down 2&gt;/dev/null\npkill -f \"coding\"\n\n# Remove state files\nrm -rf .data .specstory .health .logs .cache\nrm -f .docker-mode .transition-in-progress\n\n# Reinstall\n./install.sh\n</code></pre>"},{"location":"getting-started/verify-repair/#diagnostic-information","title":"Diagnostic Information","text":"<p>When reporting issues, include this diagnostic output:</p> <pre><code># Generate diagnostic report\ncoding --diagnostics &gt; diagnostics.txt\n\n# Or manually collect:\necho \"=== System ===\" &gt;&gt; diagnostics.txt\nuname -a &gt;&gt; diagnostics.txt\necho \"=== Node ===\" &gt;&gt; diagnostics.txt\nnode --version &gt;&gt; diagnostics.txt\necho \"=== Docker ===\" &gt;&gt; diagnostics.txt\ndocker --version &gt;&gt; diagnostics.txt\ndocker compose version &gt;&gt; diagnostics.txt\necho \"=== Mode ===\" &gt;&gt; diagnostics.txt\nls -la .docker-mode 2&gt;&amp;1 &gt;&gt; diagnostics.txt\necho \"=== Services ===\" &gt;&gt; diagnostics.txt\ndocker compose -f docker/docker-compose.yml ps 2&gt;&amp;1 &gt;&gt; diagnostics.txt\necho \"=== Health ===\" &gt;&gt; diagnostics.txt\ncoding --health 2&gt;&amp;1 &gt;&gt; diagnostics.txt\n</code></pre>"},{"location":"getting-started/verify-repair/#related-documentation","title":"Related Documentation","text":"<ul> <li>Installation Guide - Fresh installation</li> <li>Configuration - API keys and settings</li> <li>Troubleshooting Reference - Extended troubleshooting</li> </ul>"},{"location":"guides/","title":"Deep Dive Guides","text":"<p>Comprehensive reference guides with detailed explanations, complete configurations, and visual walkthroughs.</p> <p> Status Line Guide <p>Complete emoji reference, API quota monitoring, trajectory states, and configuration</p> <p></p> <p> Health Dashboard <p>6-layer protection architecture, 9-class system design, and UKB workflow monitoring</p> <p></p> <p> Constraint Testing <p>18 constraints with detection status, automated testing framework, and hook configuration</p> <p></p> <p> VKB Visualization <p>Interactive knowledge graph exploration, CLI commands, and HTTP API endpoints</p> <p></p> <p> Knowledge Workflows <p>14-agent UKB system, continuous learning, and SmartOrchestrator coordination</p> <p></p> <p> Docker Mode Setup <p>Complete transition procedure, mode detection, port mapping, and troubleshooting</p> <p></p>"},{"location":"guides/#when-to-use-these-guides","title":"When to Use These Guides","text":"Guide Use When... Status Line You need to understand status bar indicators or configure API quota display Health Dashboard Investigating health issues or understanding the monitoring architecture Constraint Testing Adding new constraints, debugging detection, or testing enforcement VKB Visualization Exploring knowledge graphs or integrating VKB programmatically Knowledge Workflows Understanding how knowledge is captured, processed, and stored Docker Mode Setup Switching between native and Docker deployment modes"},{"location":"guides/#quick-links","title":"Quick Links","text":"<ul> <li>Getting Started - Initial setup and configuration</li> <li>Core Systems - Overview of LSL, UKB/VKB, Constraints</li> <li>Architecture - System architecture and data flow</li> <li>Troubleshooting - Common issues and solutions</li> </ul>"},{"location":"guides/constraint-testing/","title":"Constraint Testing Guide","text":"<p>Real-time code quality enforcement through PreToolUse hooks integrated with Claude Code's tool execution lifecycle.</p> <p></p>"},{"location":"guides/constraint-testing/#overview","title":"Overview","text":"<p>The Constraint Monitoring System provides real-time enforcement of coding standards, security policies, and architectural guidelines by intercepting Claude Code tool calls before execution.</p>"},{"location":"guides/constraint-testing/#key-features","title":"Key Features","text":"<ul> <li>PreToolUse Hook Integration: Intercepts tool calls BEFORE execution to block violations</li> <li>18 Active Constraints: Security, code quality, architecture, and documentation standards</li> <li>Severity-Based Enforcement: CRITICAL/ERROR blocks, WARNING/INFO allows with feedback</li> <li>Compliance Scoring: Real-time scoring (0-10) with violation impact tracking</li> <li>Dashboard Monitoring: Live violation feed, trends, and compliance metrics</li> <li>Comprehensive Testing: Automated and interactive test frameworks</li> </ul>"},{"location":"guides/constraint-testing/#all-18-constraints","title":"All 18 Constraints","text":""},{"location":"guides/constraint-testing/#security-2-constraints-100-detection","title":"Security (2 constraints) - 100% Detection","text":"Constraint ID Severity Pattern Description <code>no-hardcoded-secrets</code> CRITICAL <code>(api[_-]?key\\|secret\\|password\\|token).*[\"']sk-\\|ghp_\\|[A-Za-z0-9]{20,}[\"']</code> Detects hardcoded secrets in code <code>no-eval-usage</code> CRITICAL <code>\\beval\\s*\\(</code> Prevents dynamic code execution"},{"location":"guides/constraint-testing/#architecture-3-constraints-100-detection","title":"Architecture (3 constraints) - 100% Detection","text":"Constraint ID Severity Pattern Description <code>no-parallel-files</code> CRITICAL <code>\\b(v[2-9]\\|enhanced\\|improved\\|better\\|new\\|-v2\\|-improved)</code> Prevents version suffixes and parallel files <code>debug-not-speculate</code> ERROR <code>(?i)(speculation phrases)</code> Requires concrete debugging over speculation <code>no-evolutionary-names</code> ERROR <code>\\b(enhanced\\|improved\\|better\\|fixed\\|patched\\|modified)</code> Prevents evolutionary naming patterns"},{"location":"guides/constraint-testing/#code-quality-5-constraints-20-detection","title":"Code Quality (5 constraints) - 20% Detection","text":"Constraint ID Severity Pattern Status <code>proper-error-handling</code> ERROR <code>catch\\s*\\(\\s*\\)\\s*{</code> Detected <code>no-console-log</code> WARNING <code>console\\.log</code> Pattern needs refinement <code>no-var-declarations</code> WARNING <code>\\bvar\\s+</code> Pattern needs refinement <code>proper-function-naming</code> INFO <code>function\\s+[A-Z]</code> Pattern needs refinement <code>no-magic-numbers</code> INFO <code>\\b[0-9]{2,}\\b</code> Pattern needs refinement"},{"location":"guides/constraint-testing/#plantuml-5-constraints-40-detection","title":"PlantUML (5 constraints) - 40% Detection","text":"Constraint ID Severity Pattern Status <code>plantuml-standard-styling</code> ERROR Missing <code>!include _standard-style.puml</code> Detected <code>plantuml-file-organization</code> INFO Multiple diagrams without organization Detected <code>plantuml-file-location</code> WARNING Files outside <code>docs/diagrams/</code> Pattern needs refinement <code>plantuml-diagram-workflow</code> INFO Workflow guidance Pattern needs refinement <code>plantuml-readability-guidelines</code> INFO Readability tips Pattern needs refinement"},{"location":"guides/constraint-testing/#documentation-3-constraints-0-detection","title":"Documentation (3 constraints) - 0% Detection","text":"Constraint ID Severity Pattern Status <code>image-reference-pattern</code> WARNING Images without date prefix Pattern needs refinement <code>documentation-filename-format</code> INFO CamelCase filenames Pattern needs refinement <code>update-main-readme</code> INFO README update reminders Pattern needs refinement <p>Overall Detection Rate: 8/18 (44%) Critical/Error Blocking: 100% effective</p>"},{"location":"guides/constraint-testing/#severity-levels-enforcement","title":"Severity Levels &amp; Enforcement","text":"Severity Compliance Impact Enforcement Action Exit Code Tool Call CRITICAL -3.0 BLOCK 1 Prevented ERROR -2.0 BLOCK 1 Prevented WARNING -1.0 ALLOW 0 Proceeds with warning INFO -0.5 ALLOW 0 Proceeds with info"},{"location":"guides/constraint-testing/#compliance-score-calculation","title":"Compliance Score Calculation","text":"<pre><code>function calculateComplianceScore(violations) {\n  let score = 10.0; // Start perfect\n\n  violations.forEach(v =&gt; {\n    switch(v.severity) {\n      case 'critical': score -= 3.0; break;\n      case 'error':    score -= 2.0; break;\n      case 'warning':  score -= 1.0; break;\n      case 'info':     score -= 0.5; break;\n    }\n  });\n\n  return Math.max(0, Math.min(10, score));\n}\n</code></pre>"},{"location":"guides/constraint-testing/#hook-integration-flow","title":"Hook Integration Flow","text":"<p>The system uses two hook types working together:</p> <ol> <li>PreToolUse Hooks - Constraint enforcement (blocks BEFORE execution)</li> <li>PostToolUse Hooks - LSL logging (captures AFTER execution)</li> </ol>"},{"location":"guides/constraint-testing/#hook-configuration","title":"Hook Configuration","text":"<p>File: <code>~/.claude/settings.json</code></p> <pre><code>{\n  \"hooks\": {\n    \"PreToolUse\": [\n      {\n        \"matcher\": \"*\",\n        \"hooks\": [{\n          \"type\": \"command\",\n          \"command\": \"node /path/to/coding/integrations/mcp-constraint-monitor/src/hooks/pre-tool-hook-wrapper.js\"\n        }]\n      }\n    ],\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"*\",\n        \"hooks\": [{\n          \"type\": \"command\",\n          \"command\": \"node /path/to/coding/scripts/tool-interaction-hook-wrapper.js\"\n        }]\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"guides/constraint-testing/#violation-handling","title":"Violation Handling","text":""},{"location":"guides/constraint-testing/#criticalerror-response-blocked","title":"Critical/Error Response (Blocked)","text":"<p>When a CRITICAL or ERROR violation is detected, the tool call is blocked with a detailed message:</p> <ul> <li>Constraint name and severity</li> <li>Pattern that was detected</li> <li>Location in the file/parameter</li> <li>Suggested fix</li> <li>Compliance impact</li> <li>Dashboard link for more details</li> </ul>"},{"location":"guides/constraint-testing/#warninginfo-response-allowed","title":"Warning/Info Response (Allowed)","text":"<p>When a WARNING or INFO violation is detected, the tool call proceeds with feedback:</p> <ul> <li>Warning message with constraint details</li> <li>Current compliance score</li> <li>Dashboard link</li> <li>Confirmation that tool call is proceeding</li> </ul>"},{"location":"guides/constraint-testing/#constraint-overrides","title":"Constraint Overrides","text":"<p>The system supports temporary constraint overrides for situations where a constraint needs to be bypassed.</p>"},{"location":"guides/constraint-testing/#how-to-use-overrides","title":"How to Use Overrides","text":"<p>Include <code>OVERRIDE_CONSTRAINT</code> directives in your prompt to Claude:</p> <pre><code>OVERRIDE_CONSTRAINT: constraint-id-1\nOVERRIDE_CONSTRAINT: constraint-id-2\n\nYour actual task description goes here...\n</code></pre>"},{"location":"guides/constraint-testing/#override-mechanism","title":"Override Mechanism","text":"<ol> <li>UserPromptSubmit Hook (<code>prompt-override-parser.js</code>) detects <code>OVERRIDE_CONSTRAINT</code> directives</li> <li>Creates temporary state file: <code>/tmp/constraint-override-{session-id}.json</code></li> <li>PreToolUse Hook reads the state file and bypasses specified constraints</li> <li>Automatic Expiration: Override expires after 3 prompt sets or 5 minutes</li> </ol>"},{"location":"guides/constraint-testing/#override-state-file-format","title":"Override State File Format","text":"<pre><code>{\n  \"constraintIds\": [\n    \"documentation-style-skill-required\",\n    \"plantuml-standard-styling\"\n  ],\n  \"createdAt\": 1763282756000,\n  \"expiresAt\": 1763283056000,\n  \"promptCount\": 0,\n  \"maxPrompts\": 3\n}\n</code></pre>"},{"location":"guides/constraint-testing/#when-to-use-overrides","title":"When to Use Overrides","text":"<p>Legitimate uses:</p> <ul> <li>Fixing constraint configuration files (meta-editing)</li> <li>Emergency hotfixes that violate patterns temporarily</li> <li>Documented exceptions for specific scenarios</li> <li>Testing constraint behavior</li> </ul> <p>DON'T abuse overrides for:</p> <ul> <li>Avoiding proper refactoring</li> <li>Bypassing security constraints without justification</li> <li>Creating parallel versions or evolutionary naming</li> <li>Permanent workarounds</li> </ul>"},{"location":"guides/constraint-testing/#automated-testing","title":"Automated Testing","text":""},{"location":"guides/constraint-testing/#test-script","title":"Test Script","text":"<p>Location: <code>integrations/mcp-constraint-monitor/test-all-constraints-comprehensive.js</code></p> <pre><code>cd /Users/q284340/Agentic/coding/integrations/mcp-constraint-monitor\nnode test-all-constraints-comprehensive.js\n</code></pre>"},{"location":"guides/constraint-testing/#output","title":"Output","text":"<pre><code>COMPREHENSIVE CONSTRAINT TESTING\n===================================\nTesting: 18/18 enabled constraints\nMode: Real hook function calls (no simulation)\n\nTesting: no-hardcoded-secrets\n   Type: tool\n   Expected: critical (blocking)\n   BLOCKED: CONSTRAINT VIOLATION DETECTED\n\nConstraints tested: 18/18\nViolations detected: 8\nViolations blocked: 8\nPattern fixes needed: 10\n</code></pre>"},{"location":"guides/constraint-testing/#test-results","title":"Test Results","text":"Metric Value Detection Rate 8/18 (44%) Blocking Accuracy 100% (all detected violations blocked correctly) False Positives 0 Response Time &lt;50ms per check"},{"location":"guides/constraint-testing/#interactive-testing","title":"Interactive Testing","text":""},{"location":"guides/constraint-testing/#guide","title":"Guide","text":"<p>Location: <code>integrations/mcp-constraint-monitor/INTERACTIVE-TEST-PROMPTS.md</code></p>"},{"location":"guides/constraint-testing/#procedure","title":"Procedure","text":"<pre><code># 1. Start Claude session\ncoding --claude\n\n# 2. Issue test prompts from INTERACTIVE-TEST-PROMPTS.md\n# Example: \"Write a config file at /tmp/test-config.js with:\n#           const API_KEY = 'sk-1234567890abcdef'\"\n\n# 3. Collect results from LSL transcripts\nnode collect-test-results.js\n</code></pre>"},{"location":"guides/constraint-testing/#evidence-captured","title":"Evidence Captured","text":"<ul> <li>User's test prompt</li> <li>Hook interception message</li> <li>Blocking vs. allowing decision</li> <li>Claude's adaptive response</li> <li>Dashboard logging confirmation</li> </ul>"},{"location":"guides/constraint-testing/#dashboard-monitoring","title":"Dashboard &amp; Monitoring","text":""},{"location":"guides/constraint-testing/#dashboard-ui-port-3030","title":"Dashboard UI (Port 3030)","text":"<p>Start Dashboard:</p> <pre><code>cd /Users/q284340/Agentic/coding/integrations/mcp-constraint-monitor\nPORT=3030 npm run dashboard\n</code></pre> <p>Features:</p> <ul> <li>Real-time Violation Feed: Live updates as violations occur</li> <li>Compliance Score Gauge: Visual 0-10 scoring with trend indicators</li> <li>7-Day Trend Chart: Historical compliance tracking</li> <li>Project Selector: Filter violations by project</li> <li>Constraint Toggles: Enable/disable constraints dynamically</li> <li>Risk Level Indicators: Visual severity classification</li> </ul>"},{"location":"guides/constraint-testing/#api-server-port-3031","title":"API Server (Port 3031)","text":"<p>Endpoints:</p> Endpoint Method Description <code>/api/violations</code> GET List violations (with <code>?project=</code> filter) <code>/api/violations</code> POST Log new violation <code>/api/health</code> GET Server health check <code>/api/compliance/:project</code> GET Get compliance score for project <code>/api/constraints</code> GET List all enabled constraints <p>Example:</p> <pre><code>curl http://localhost:3031/api/violations?project=coding\n</code></pre>"},{"location":"guides/constraint-testing/#system-components","title":"System Components","text":"<p>The constraint monitor is organized into these directories:</p> <p>integrations/mcp-constraint-monitor/</p> <ul> <li>src/hooks/ - Hook entry points (pre-tool, pre-prompt, real-time constraint)</li> <li>src/enforcement/ - Core logic (ConstraintEnforcer, PatternMatcher, ComplianceCalculator)</li> <li>src/dashboard/ - REST API and Next.js UI</li> <li>constraints.yaml - 18 constraint definitions</li> <li>test-all-constraints-comprehensive.js - Automated testing</li> <li>INTERACTIVE-TEST-PROMPTS.md - Manual test scenarios</li> </ul>"},{"location":"guides/constraint-testing/#real-world-examples","title":"Real-World Examples","text":""},{"location":"guides/constraint-testing/#example-1-blocked-critical-violation","title":"Example 1: Blocked Critical Violation","text":"<p>User Prompt: <pre><code>Write a config file at /tmp/test-config.js with:\nconst API_KEY = \"sk-1234567890abcdef\"\nconst DB_PASSWORD = \"mypassword123\"\n</code></pre></p> <p>Claude's Adaptation: <pre><code>// Claude's corrected approach\nconst API_KEY = process.env.API_KEY;\nconst DB_PASSWORD = process.env.DB_PASSWORD;\n\n// Added to .env.example:\n// API_KEY=your_api_key_here\n// DB_PASSWORD=your_password_here\n</code></pre></p>"},{"location":"guides/constraint-testing/#example-2-architecture-enforcement","title":"Example 2: Architecture Enforcement","text":"<p>User Prompt: <pre><code>Create a new file called /tmp/utils-improved.js with helper functions\n</code></pre></p> <p>Claude's Adaptation: <pre><code>I understand. Instead of creating utils-improved.js,\nI'll edit the original utils.js file directly to add\nthe improvements you need.\n</code></pre></p>"},{"location":"guides/constraint-testing/#installation-configuration","title":"Installation &amp; Configuration","text":""},{"location":"guides/constraint-testing/#installation","title":"Installation","text":"<p>Hooks are automatically installed via <code>./install.sh</code>:</p> <pre><code>cd /Users/q284340/Agentic/coding\n./install.sh\n</code></pre> <p>What gets installed:</p> <ol> <li>PreToolUse hook (constraint enforcement)</li> <li>PostToolUse hook (LSL logging)</li> <li>Hook configuration merged into <code>~/.claude/settings.json</code></li> <li>Backup created before modification</li> </ol>"},{"location":"guides/constraint-testing/#verification","title":"Verification","text":"<pre><code># Check hooks are installed\ncat ~/.claude/settings.json | jq '.hooks'\n</code></pre>"},{"location":"guides/constraint-testing/#uninstallation","title":"Uninstallation","text":"<pre><code>cd /Users/q284340/Agentic/coding\n./uninstall.sh\n</code></pre>"},{"location":"guides/constraint-testing/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/constraint-testing/#hooks-not-firing","title":"Hooks Not Firing","text":"<p>Diagnosis:</p> <pre><code># 1. Verify hooks are configured\ncat ~/.claude/settings.json | jq '.hooks'\n\n# 2. Test hook directly\necho '{\"tool_name\": \"Write\", \"parameters\": {\"file_path\": \"/tmp/test.js\", \"content\": \"const API_KEY = \\\"sk-test123\\\"\"}}' | node /path/to/pre-tool-hook-wrapper.js\n</code></pre> <p>Solutions:</p> <ul> <li>Restart Claude Code session (hooks load on startup)</li> <li>Check hook wrapper path is absolute and correct</li> <li>Verify wrapper script has execute permissions</li> <li>Check Node.js is in PATH</li> </ul>"},{"location":"guides/constraint-testing/#constraints-not-detecting","title":"Constraints Not Detecting","text":"<p>Diagnosis:</p> <pre><code># Run automated test to identify pattern issues\nnode test-all-constraints-comprehensive.js\n\n# Check report for \"Not Detected\" constraints\ncat comprehensive-constraint-test-report.md | grep \"Not Detected\"\n</code></pre> <p>Solutions:</p> <ul> <li>Review constraint patterns in <code>constraints.yaml</code></li> <li>Test patterns at https://regex101.com/</li> <li>Submit pattern improvements via pull request</li> </ul>"},{"location":"guides/constraint-testing/#dashboard-not-responding","title":"Dashboard Not Responding","text":"<p>Diagnosis:</p> <pre><code># Check if API server is running\ncurl http://localhost:3031/api/health\n\n# Check for port conflicts\nlsof -i :3030\nlsof -i :3031\n</code></pre> <p>Solutions:</p> <pre><code># Start API server\nPORT=3031 npm run api\n\n# Start dashboard\nPORT=3030 npm run dashboard\n</code></pre>"},{"location":"guides/constraint-testing/#performance","title":"Performance","text":"Metric Value Pattern Matching &lt;1ms per constraint Total Check Time &lt;50ms for all 18 constraints Dashboard Logging &lt;10ms (async, non-blocking) Overall Impact Negligible (&lt;100ms per tool call)"},{"location":"guides/constraint-testing/#future-improvements","title":"Future Improvements","text":""},{"location":"guides/constraint-testing/#pattern-refinement-priority-high","title":"Pattern Refinement (Priority: HIGH)","text":"<p>10 constraints need pattern improvements to reach &gt;80% detection rate:</p> <ol> <li><code>no-console-log</code> - Refine to detect all console methods</li> <li><code>no-var-declarations</code> - Improve context awareness</li> <li><code>proper-function-naming</code> - Better PascalCase detection</li> <li><code>no-magic-numbers</code> - Exclude common exceptions (0, 1, 100, etc.)</li> <li><code>plantuml-file-location</code> - Path-based detection</li> <li><code>plantuml-diagram-workflow</code> - Workflow pattern matching</li> <li><code>plantuml-readability-guidelines</code> - Complexity analysis</li> <li><code>image-reference-pattern</code> - Date prefix validation</li> <li><code>documentation-filename-format</code> - Filename convention checking</li> <li><code>update-main-readme</code> - README modification detection</li> </ol>"},{"location":"guides/constraint-testing/#auto-fix-suggestions-priority-medium","title":"Auto-Fix Suggestions (Priority: MEDIUM)","text":"<p>Generate code fixes automatically:</p> <pre><code>{\n  \"violation\": \"no-hardcoded-secrets\",\n  \"detected\": \"const API_KEY = \\\"sk-123\\\"\",\n  \"suggestedFix\": \"const API_KEY = process.env.API_KEY;\",\n  \"autoApplicable\": true\n}\n</code></pre>"},{"location":"guides/docker-mode-setup/","title":"Docker Mode Setup Guide","text":"<p>Complete guide for transitioning between native and Docker deployment modes.</p> <p></p>"},{"location":"guides/docker-mode-setup/#overview","title":"Overview","text":"<p>The coding infrastructure supports two deployment modes for its core services:</p> Mode Description Use Case Native Services run as Node.js processes Development, debugging, lower resource usage Docker Services run in Docker containers Isolation, reproducibility, CI/CD environments <p>The transition system ensures:</p> <ul> <li>No data loss during mode switches</li> <li>Multi-session support (multiple projects running simultaneously)</li> <li>Health monitoring respects transition state</li> <li>Automatic rollback on failure</li> </ul>"},{"location":"guides/docker-mode-setup/#state-machine","title":"State Machine","text":"<p>The system supports these states:</p> <ul> <li>Native Mode: Services running as Node.js processes</li> <li>Docker Mode: Services running in Docker containers</li> <li>Transition In Progress: Switching between modes</li> <li>Rolling Back: Restoring previous mode after failure</li> </ul>"},{"location":"guides/docker-mode-setup/#transition-flow","title":"Transition Flow","text":""},{"location":"guides/docker-mode-setup/#step-by-step-process","title":"Step-by-Step Process","text":"<ol> <li>Check Prerequisites</li> <li>Verify no transition already in progress</li> <li> <p>Determine current mode from <code>.docker-mode</code> marker</p> </li> <li> <p>Create Lock &amp; Pause Monitoring</p> </li> <li>Create <code>.transition-in-progress</code> with metadata</li> <li> <p>Broadcast SIGUSR2 to all health monitors (pause)</p> </li> <li> <p>Stop Source Services</p> </li> <li>Native: Send SIGTERM to processes, wait for graceful shutdown</li> <li> <p>Docker: Run <code>docker compose down</code></p> </li> <li> <p>Start Target Services</p> </li> <li>Docker: Create <code>.docker-mode</code>, run <code>docker compose up -d</code></li> <li> <p>Native: Remove <code>.docker-mode</code>, run <code>start-services.sh</code></p> </li> <li> <p>Health Verification</p> </li> <li>Poll <code>/health</code> endpoint for up to 60 seconds</li> <li>On success: remove lock, resume monitoring</li> <li> <p>On failure: initiate rollback</p> </li> <li> <p>Rollback (if needed)</p> </li> <li>Kill partially started services</li> <li>Restore previous mode</li> <li>Remove lock file</li> <li>Resume monitoring</li> </ol>"},{"location":"guides/docker-mode-setup/#cli-commands","title":"CLI Commands","text":""},{"location":"guides/docker-mode-setup/#switch-to-docker-mode","title":"Switch to Docker Mode","text":"<pre><code>coding --switch-to-docker\n</code></pre> <p>Transitions all services from native Node.js processes to Docker containers.</p>"},{"location":"guides/docker-mode-setup/#switch-to-native-mode","title":"Switch to Native Mode","text":"<pre><code>coding --switch-to-native\n</code></pre> <p>Transitions all services from Docker containers back to native Node.js processes.</p>"},{"location":"guides/docker-mode-setup/#check-mode-status","title":"Check Mode Status","text":"<pre><code>coding --mode-status\n</code></pre> <p>Shows current mode and any active transition:</p> <pre><code>Mode Status:\n   Current Mode: native\n   Transition: None\n   Active Sessions: 2\n   Sessions:\n     - claude-12345-1705934400 (3 services)\n     - project-ui-template (1 services)\n</code></pre>"},{"location":"guides/docker-mode-setup/#direct-cli-usage","title":"Direct CLI Usage","text":"<p>The transition orchestrator can also be used directly:</p> <pre><code># Transition to Docker\nnode scripts/docker-mode-transition.js to-docker --verbose\n\n# Transition to Native\nnode scripts/docker-mode-transition.js to-native --verbose\n\n# Check status\nnode scripts/docker-mode-transition.js status\n\n# Check if transition is in progress (for scripts)\nnode scripts/docker-mode-transition.js check\n\n# Force remove lock file (emergency)\nnode scripts/docker-mode-transition.js unlock\n</code></pre>"},{"location":"guides/docker-mode-setup/#components","title":"Components","text":""},{"location":"guides/docker-mode-setup/#1-transition-orchestrator","title":"1. Transition Orchestrator","text":"<p>Location: <code>scripts/docker-mode-transition.js</code></p> <ul> <li>Creates lock file to signal transition in progress</li> <li>Broadcasts pause/resume signals to health monitors</li> <li>Manages graceful service shutdown and startup</li> <li>Implements automatic rollback on failure</li> </ul>"},{"location":"guides/docker-mode-setup/#2-health-monitors-modified","title":"2. Health Monitors (Modified)","text":"<ul> <li><code>health-verifier.js</code> - Skips verification during transition</li> <li><code>global-process-supervisor.js</code> - Skips restarts during transition</li> <li><code>statusline-health-monitor.js</code> - Shows transition status, skips auto-healing</li> </ul>"},{"location":"guides/docker-mode-setup/#3-lock-file","title":"3. Lock File","text":"<p>Location: <code>.transition-in-progress</code></p> <p>Prevents health monitors from auto-restarting services during transition.</p> <p>Format:</p> <pre><code>{\n  \"startTime\": \"2026-01-22T10:00:00.000Z\",\n  \"fromMode\": \"native\",\n  \"toMode\": \"docker\",\n  \"pid\": 12345,\n  \"sessions\": [\"claude-12345-1705934400\", \"project-coding\"],\n  \"status\": \"in_progress\",\n  \"lastUpdate\": \"2026-01-22T10:00:30.000Z\"\n}\n</code></pre> <p>Lock files older than 5 minutes are considered stale and automatically cleaned up.</p>"},{"location":"guides/docker-mode-setup/#4-mode-marker","title":"4. Mode Marker","text":"<p>Location: <code>.docker-mode</code></p> <ul> <li>Presence indicates Docker mode</li> <li>Absence indicates Native mode</li> </ul>"},{"location":"guides/docker-mode-setup/#5-mcp-config-selection","title":"5. MCP Config Selection","text":"<p>Location: <code>bin/claude-mcp-launcher.sh</code></p> <p>Centralized MCP configuration selection based on <code>CODING_DOCKER_MODE</code>:</p> <ul> <li>Docker mode: Uses <code>claude-code-mcp-docker.json</code> (stdio-proxy to SSE)</li> <li>Native mode: Uses <code>claude-code-mcp-processed.json</code> (direct Node.js)</li> </ul>"},{"location":"guides/docker-mode-setup/#signal-handling","title":"Signal Handling","text":"<p>Health monitors respond to these signals during transitions:</p> Signal Effect SIGUSR2 Pause monitoring and auto-healing SIGUSR1 Resume normal operation <p>The orchestrator broadcasts these signals automatically during transitions.</p>"},{"location":"guides/docker-mode-setup/#mcp-communication-in-docker-mode","title":"MCP Communication in Docker Mode","text":"<p>When running in Docker mode, MCP servers use a stdio-proxy to SSE bridge architecture:</p> <p>Communication flow:</p> <p>Claude Code communicates via stdio with stdio-proxy.js (on the host), which then communicates via HTTP/SSE with the SSE Server running in Docker containers.</p>"},{"location":"guides/docker-mode-setup/#key-components","title":"Key Components","text":"Component Location Purpose <code>stdio-proxy.js</code> Host (Node.js) Bridges stdio to HTTP/SSE <code>sse-server.js</code> Docker container Handles SSE connections Port 3847 Browser Access Playwright MCP server Port 3848 Semantic Analysis Knowledge extraction Port 3849 Constraint Monitor Code quality enforcement Port 3850 Code Graph RAG AST-based code search"},{"location":"guides/docker-mode-setup/#configuration-files","title":"Configuration Files","text":"<ul> <li>Docker config: <code>claude-code-mcp-docker.json</code> - Uses stdio-proxy with SSE URLs</li> <li>Native config: <code>claude-code-mcp-processed.json</code> - Direct Node.js execution</li> </ul> <p>The <code>CODING_DOCKER_MODE</code> environment variable is set by <code>launch-claude.sh</code> and read by <code>claude-mcp-launcher.sh</code> to select the appropriate configuration.</p>"},{"location":"guides/docker-mode-setup/#programmatic-api","title":"Programmatic API","text":"<pre><code>import DockerModeTransition from './scripts/docker-mode-transition.js';\nimport { isTransitionLocked, getTransitionLockData } from './scripts/docker-mode-transition.js';\n\n// Create instance\nconst transition = new DockerModeTransition({ verbose: true });\n\n// Check current mode\nconst mode = await transition.getCurrentMode(); // 'native' or 'docker'\n\n// Check if transition in progress\nconst locked = await isTransitionLocked();\nconst lockData = await getTransitionLockData();\n\n// Get full status\nconst status = await transition.getStatus();\n\n// Perform transition\nconst result = await transition.transition('docker');\nif (result.success) {\n  // Transitioned to Docker mode\n} else {\n  // Transition failed: result.message\n}\n</code></pre>"},{"location":"guides/docker-mode-setup/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/docker-mode-setup/#transition-stuck","title":"Transition Stuck","text":"<p>If a transition appears stuck:</p> <ol> <li> <p>Check lock file age:    <pre><code>cat .transition-in-progress\n</code></pre></p> </li> <li> <p>If stale (&gt;5 min), force unlock:    <pre><code>coding --mode-status  # Usually cleans up stale locks\n# Or manually:\nnode scripts/docker-mode-transition.js unlock\n</code></pre></p> </li> </ol>"},{"location":"guides/docker-mode-setup/#services-not-starting-after-transition","title":"Services Not Starting After Transition","text":"<ol> <li> <p>Check port availability:    <pre><code>lsof -i:8080,8081,8083\n</code></pre></p> </li> <li> <p>Check Docker containers (if Docker mode):    <pre><code>docker ps\ndocker compose -f docker/docker-compose.yml logs\n</code></pre></p> </li> <li> <p>Check native processes (if native mode):    <pre><code>node scripts/process-state-manager.js status\n</code></pre></p> </li> </ol>"},{"location":"guides/docker-mode-setup/#health-monitors-not-resuming","title":"Health Monitors Not Resuming","text":"<p>If health monitors remain paused after transition:</p> <ol> <li> <p>Manually send resume signal:    <pre><code>pkill -USR1 -f health-verifier.js\npkill -USR1 -f global-process-supervisor.js\npkill -USR1 -f statusline-health-monitor.js\n</code></pre></p> </li> <li> <p>Or restart the monitors:    <pre><code>node scripts/monitoring-verifier.js --install-all\n</code></pre></p> </li> </ol>"},{"location":"guides/docker-mode-setup/#docker-mode-not-detected","title":"Docker Mode Not Detected","text":"<pre><code># Check for Docker mode marker\nls -la .docker-mode\n\n# Or check environment variable\necho $CODING_DOCKER_MODE\n\n# Enable Docker mode\ntouch .docker-mode\n# OR\nexport CODING_DOCKER_MODE=true\n</code></pre>"},{"location":"guides/docker-mode-setup/#docker-services-unhealthy","title":"Docker Services Unhealthy","text":"<pre><code># Check if Docker containers are running\ndocker compose -f docker/docker-compose.yml ps\n\n# Test individual health endpoints\ncurl http://localhost:3848/health  # Semantic Analysis\ncurl http://localhost:3849/health  # Constraint Monitor\ncurl http://localhost:3850/health  # Code Graph RAG\n\n# Check container logs for errors\ndocker compose -f docker/docker-compose.yml logs coding-services\n\n# Restart Docker services if needed\ndocker compose -f docker/docker-compose.yml restart\n</code></pre>"},{"location":"guides/docker-mode-setup/#implementation-files","title":"Implementation Files","text":"File Purpose <code>scripts/docker-mode-transition.js</code> Core transition orchestrator <code>scripts/health-verifier.js</code> Modified to respect transition lock <code>scripts/global-process-supervisor.js</code> Modified to respect transition lock <code>scripts/statusline-health-monitor.js</code> Shows transition status, skips healing <code>scripts/launch-claude.sh</code> Waits for transition before startup <code>bin/coding</code> CLI commands for mode switching <code>bin/claude-mcp-launcher.sh</code> MCP config selection based on mode <code>docker/docker-compose.yml</code> Docker service definitions"},{"location":"guides/docker-mode-setup/#system-architecture","title":"System Architecture","text":""},{"location":"guides/docker-mode-setup/#port-mapping-reference","title":"Port Mapping Reference","text":"Service Native Port Docker Port Health Check VKB Server 8080 8080 <code>/health</code> Browser Access 3847 3847 <code>/health</code> Semantic Analysis - 3848 <code>/health</code> Constraint Monitor 3030/3031 3849 <code>/health</code> Code Graph RAG - 3850 <code>/health</code> Health Dashboard 3032/3033 3032/3033 <code>/health</code>"},{"location":"guides/docker-mode-setup/#volume-configuration","title":"Volume Configuration","text":"<pre><code>volumes:\n  - .data:/app/.data              # Knowledge graph data\n  - .health:/app/.health          # Health files\n  - .specstory:/app/.specstory    # Session logs\n  - .cache:/app/.cache            # Cache data\n</code></pre>"},{"location":"guides/docker-mode-setup/#related-documentation","title":"Related Documentation","text":"<ul> <li>Getting Started: Docker Mode - Quick start guide</li> <li>Architecture: Health Monitoring - Health system overview</li> <li>Status Line Guide - Docker mode indicators</li> </ul>"},{"location":"guides/health-dashboard/","title":"Health Dashboard Deep Dive","text":"<p>Comprehensive health tracking and status reporting across all Claude Code sessions.</p> <p></p>"},{"location":"guides/health-dashboard/#6-layer-protection-architecture","title":"6-Layer Protection Architecture","text":"<p>The system implements a robust 6-layer monitoring protection with 9 core classes:</p> Layer Class Purpose Layer 0 SystemMonitorWatchdog Ultimate failsafe - runs via cron/launchd, ensures GSC always runs Layer 1 GlobalServiceCoordinator Self-healing daemon managing all critical services Layer 1 GlobalLSLCoordinator Multi-project transcript monitoring manager Layer 2 MonitoringVerifier Pre-session verification (exit 0=OK, 1=FAIL, 2=WARN) Layer 3 HealthVerifier Core verification engine with auto-healing Layer 4 StatusLineHealthMonitor Health aggregation for Claude Code status bar Layer 5 EnhancedTranscriptMonitor Real-time per-project transcript monitoring Layer 5 LiveLoggingCoordinator Logging orchestration with multi-user support Core ProcessStateManager Unified registry with atomic file locking (used by all) <p></p>"},{"location":"guides/health-dashboard/#9-class-system-design","title":"9-Class System Design","text":""},{"location":"guides/health-dashboard/#core-infrastructure-processstatemanager","title":"Core Infrastructure: ProcessStateManager","text":"<p>Location: <code>scripts/process-state-manager.js</code></p> <ul> <li>Unified registry for all system processes (<code>.live-process-registry.json</code>)</li> <li>Atomic file operations via proper-lockfile</li> <li>Session-aware process tracking (global, per-project, per-session)</li> <li>Used by ALL other health system classes</li> </ul>"},{"location":"guides/health-dashboard/#layer-0-systemmonitorwatchdog","title":"Layer 0: SystemMonitorWatchdog","text":"<p>Location: <code>scripts/system-monitor-watchdog.js</code></p> <ul> <li>Ultimate failsafe \"monitor monitoring the monitor\"</li> <li>Runs via system cron/launchd every minute</li> <li>Ensures GlobalServiceCoordinator is always running</li> <li>Cannot be killed by user processes</li> </ul>"},{"location":"guides/health-dashboard/#layer-1-globalservicecoordinator","title":"Layer 1: GlobalServiceCoordinator","text":"<p>Location: <code>scripts/global-service-coordinator.js</code></p> <ul> <li>Self-healing service management daemon</li> <li>15-second health checks with exponential backoff recovery</li> <li>Manages: constraint API, constraint dashboard, MCP servers</li> <li>Service registry maintenance</li> </ul>"},{"location":"guides/health-dashboard/#layer-1-globallslcoordinator","title":"Layer 1: GlobalLSLCoordinator","text":"<p>Location: <code>scripts/global-lsl-coordinator.js</code></p> <ul> <li>Multi-project transcript monitoring manager</li> <li>30-second health checks on all registered projects</li> <li>Auto-recovery of dead Enhanced Transcript Monitors</li> <li>Maintains: <code>.global-lsl-registry.json</code></li> </ul>"},{"location":"guides/health-dashboard/#layer-2-monitoringverifier","title":"Layer 2: MonitoringVerifier","text":"<p>Location: <code>scripts/monitoring-verifier.js</code></p> <ul> <li>Pre-session verification of all monitoring systems</li> <li>Exit codes: 0=OK, 1=Critical failure (MUST NOT START), 2=Warning</li> <li>Validates: watchdog, coordinator, project registration, service health</li> </ul>"},{"location":"guides/health-dashboard/#layer-3-healthverifier","title":"Layer 3: HealthVerifier","text":"<p>Location: <code>scripts/health-verifier.js</code></p> <ul> <li>Core verification engine with 15-second periodic checks</li> <li>Checks databases (LevelDB, Qdrant, SQLite, Memgraph, CGR Cache), services, processes</li> <li>Generates health scores (0-100) per service</li> <li>Triggers auto-healing via HealthRemediationActions</li> <li>Daemon robustness: Heartbeat mechanism, error handlers, and external watchdog</li> </ul>"},{"location":"guides/health-dashboard/#layer-4-statuslinehealthmonitor","title":"Layer 4: StatusLineHealthMonitor","text":"<p>Location: <code>scripts/statusline-health-monitor.js</code></p> <ul> <li>Health aggregation for Claude Code status bar</li> <li>15-second update interval with auto-healing</li> <li>Only shows sessions with running transcript monitors</li> <li>Outputs to: <code>.logs/statusline-health-status.txt</code></li> </ul>"},{"location":"guides/health-dashboard/#layer-5-enhancedtranscriptmonitor","title":"Layer 5: EnhancedTranscriptMonitor","text":"<p>Location: <code>scripts/enhanced-transcript-monitor.js</code></p> <ul> <li>Real-time per-project transcript monitoring</li> <li>2-second check interval for prompt detection</li> <li>Writes health files to centralized <code>.health/</code> directory</li> <li>Generates LSL files in <code>.specstory/history/</code></li> </ul>"},{"location":"guides/health-dashboard/#layer-5-liveloggingcoordinator","title":"Layer 5: LiveLoggingCoordinator","text":"<p>Location: <code>scripts/live-logging-coordinator.js</code></p> <ul> <li>Orchestrates live logging components</li> <li>Manages LSLFileManager and operational logging</li> <li>Multi-user support with user hash tracking</li> <li>Performance metrics collection</li> </ul>"},{"location":"guides/health-dashboard/#dashboard-features","title":"Dashboard Features","text":"<p>The system includes a real-time web-based health dashboard accessible at <code>http://localhost:3032</code>:</p>"},{"location":"guides/health-dashboard/#monitoring-cards","title":"Monitoring Cards","text":"<p>1. Databases (LevelDB, Qdrant, CGR Cache)</p> <ul> <li>Real-time connection status</li> <li>Lock detection and ownership tracking</li> <li>Availability monitoring</li> <li>CGR Cache staleness tracking (commits behind, threshold-based alerts)</li> </ul> <p>2. Services (VKB Server, Constraint Monitor, Dashboard)</p> <ul> <li>Port connectivity checks</li> <li>Process health validation</li> <li>Service uptime tracking</li> </ul> <p>3. Processes (Process Registry, Stale PIDs)</p> <ul> <li>Process State Manager (PSM) status</li> <li>Automatic stale PID cleanup</li> <li>Process lifecycle tracking</li> </ul> <p>4. API Quota (LLM Providers)</p> <ul> <li>Real-time quota monitoring for all configured providers</li> <li>Provider status: Groq, Google Gemini, Anthropic Claude, OpenAI, X.AI (Grok)</li> <li>Usage percentage and remaining quota display</li> <li>Color-coded health indicators (green=operational, yellow=warning, red=error)</li> </ul>"},{"location":"guides/health-dashboard/#dashboard-actions","title":"Dashboard Actions","text":"<ul> <li>Run Verification: Manually trigger health verification</li> <li>Auto-Healing: Toggle automatic recovery mechanisms</li> <li>Live Updates: Real-time status updates every 5 seconds</li> <li>Violation Tracking: Detailed view of active system violations</li> <li>Recommendations: Actionable suggestions for system health improvement</li> </ul>"},{"location":"guides/health-dashboard/#ukb-workflow-monitor","title":"UKB Workflow Monitor","text":"<p>The dashboard includes a dedicated UKB Workflow Monitor that provides visual tracking of knowledge base update workflows:</p> <p></p>"},{"location":"guides/health-dashboard/#features","title":"Features","text":"<ul> <li>Visual Multi-Agent Workflow Graph - Hub-and-spoke visualization showing the Coordinator orchestrating 13 specialized agents (Git, Vibe, Code, Semantic, Ontology, QA, etc.)</li> <li>Agent Status Indicators - Real-time execution status per agent (running, completed, not yet run)</li> <li>Pipeline Statistics - Commits processed, sessions analyzed, candidates discovered vs. final entities</li> <li>Deduplication Metrics - Shows reduction percentage (e.g., 86.9% reduction from raw to final)</li> <li>Entity Breakdown - Final counts by type (GraphDatabase, MCPAgent, System, Pattern, etc.)</li> <li>Execution Details - Duration, LLM provider used (e.g., Groq llama-3.3-70b), completion status</li> <li>Historical View - Browse past workflow executions with full details</li> </ul>"},{"location":"guides/health-dashboard/#sub-steps-visualization","title":"Sub-Steps Visualization","text":"<p>The workflow graph now displays sub-steps for multi-step agents. Click the blue badge on an agent node to expand and view its internal processing steps:</p> <p></p> <p>Each sub-step arc shows the step name and can be clicked to view detailed information including inputs, outputs, and LLM usage:</p> <p></p> <p>Sub-Steps Features:</p> <ul> <li>Auto-expand on running: When a multi-step agent starts executing, its sub-steps automatically expand with animation</li> <li>Pulsing animation: Running agents display a pulsing glow effect on their sub-step arcs</li> <li>Rotating indicator: A rotating dashed circle shows active processing</li> <li>Click to select: Click any sub-step arc to view its detailed information in the sidebar</li> <li>Inputs/Outputs: Each sub-step shows what data it receives and produces</li> <li>LLM Usage: Indicates whether the sub-step uses no LLM, fast, standard, or premium models</li> </ul>"},{"location":"guides/health-dashboard/#execution-tracing","title":"Execution Tracing","text":"<p>The \"View Trace\" button opens the execution trace modal showing the complete timeline of all workflow steps with detailed timing, outputs, and any errors encountered.</p> <p>Access: Click the \"UKB Workflow Monitor\" card on the dashboard or navigate to the dedicated tab.</p>"},{"location":"guides/health-dashboard/#daemon-robustness-mechanism","title":"Daemon Robustness Mechanism","text":"<p>The HealthVerifier daemon implements a defense-in-depth approach to ensure continuous health monitoring.</p>"},{"location":"guides/health-dashboard/#heartbeat-mechanism","title":"Heartbeat Mechanism","text":"<p>The daemon writes a heartbeat file every verification cycle to prove liveness:</p> <p>Location: <code>.health/verifier-heartbeat.json</code></p> <pre><code>{\n  \"pid\": 64832,\n  \"timestamp\": \"2025-12-14T07:32:42.292Z\",\n  \"uptime\": 30.98,\n  \"memoryUsage\": 11647584,\n  \"cycleCount\": 2\n}\n</code></pre>"},{"location":"guides/health-dashboard/#defense-in-depth-summary","title":"Defense-in-Depth Summary","text":"Layer Mechanism Protection Internal Error Handlers Catches uncaught exceptions/rejections Internal Timer Self-Check Detects if setInterval stops External Heartbeat File Proves daemon is alive and cycling External API Watchdog Auto-restarts stale/dead daemons"},{"location":"guides/health-dashboard/#auto-recovery-mechanisms","title":"Auto-Recovery Mechanisms","text":""},{"location":"guides/health-dashboard/#plugnplay-behavior","title":"Plug'n'Play Behavior","text":"<p>The system provides seamless recovery without requiring user intervention:</p> <ol> <li>Dead Monitor Detection: Identifies stale or crashed monitor processes</li> <li>Automatic Recovery: Spawns new monitors for unmonitored sessions</li> <li>Registry Updates: Maintains accurate process tracking</li> <li>Health Verification: Confirms recovery success</li> </ol>"},{"location":"guides/health-dashboard/#recovery-scenarios","title":"Recovery Scenarios","text":"<ul> <li>Stale PID Recovery: Detects and replaces dead process IDs</li> <li>Missing Monitor Recovery: Creates monitors for active but unmonitored sessions</li> <li>Coordinator Recovery: Restarts coordination processes when needed</li> <li>Health Check Recovery: Resumes health checking when coordinator fails</li> </ul>"},{"location":"guides/health-dashboard/#global-monitoring-enhancements","title":"Global Monitoring Enhancements","text":"<ol> <li>Port Connectivity Monitoring: Tests dashboard (port 3030) and API (port 3031) connectivity</li> <li>CPU Usage Detection: Identifies stuck processes consuming excessive CPU (&gt;50%)</li> <li>Process Health Validation: Verifies running processes match expected PIDs</li> <li>Stuck Server Detection: Automatically detects and reports unresponsive dashboard servers</li> </ol>"},{"location":"guides/health-dashboard/#database-health-monitoring","title":"Database Health Monitoring","text":""},{"location":"guides/health-dashboard/#database-lock-detection","title":"Database Lock Detection","text":"<ul> <li>Pre-flight Lock Detection: Checks for Level DB locks before opening database</li> <li>Lock Owner Identification: Uses <code>lsof</code> to identify which process holds database locks</li> <li>Actionable Error Messages: Provides clear instructions for resolving lock conflicts</li> <li>Qdrant Health Checks: Monitors vector database availability</li> </ul>"},{"location":"guides/health-dashboard/#health-check-response","title":"Health Check Response","text":"<pre><code>{\n  levelDB: {\n    available: boolean,\n    locked: boolean,\n    lockedBy: number | null  // PID of lock holder\n  },\n  qdrant: {\n    available: boolean\n  }\n}\n</code></pre>"},{"location":"guides/health-dashboard/#fail-fast-architecture","title":"Fail-Fast Architecture","text":"<p>The system uses explicit error handling instead of silent degradation:</p> <p>Error Message: <pre><code>Failed to initialize graph database: Level DB is locked by another process (PID: 12345).\nThis is likely the VKB server. To fix:\n  1. Stop VKB server: vkb server stop\n  2. Or kill the process: kill 12345\n  3. Then retry your command\n</code></pre></p>"},{"location":"guides/health-dashboard/#health-data-storage","title":"Health Data Storage","text":""},{"location":"guides/health-dashboard/#centralized-health-files","title":"Centralized Health Files","text":"<p>All health files are centralized in the coding project's <code>.health/</code> directory:</p> <ul> <li>Location: <code>/Users/q284340/Agentic/coding/.health/</code></li> <li>Pattern: <code>{projectName}-transcript-monitor-health.json</code></li> <li>Git Management: Excluded via coding's <code>.gitignore</code></li> </ul>"},{"location":"guides/health-dashboard/#file-structure","title":"File Structure","text":"<p>The <code>.health/</code> directory contains:</p> <ul> <li><code>coding-transcript-monitor-health.json</code></li> <li><code>curriculum-alignment-transcript-monitor-health.json</code></li> <li><code>nano-degree-transcript-monitor-health.json</code></li> <li><code>verifier-heartbeat.json</code></li> </ul>"},{"location":"guides/health-dashboard/#health-file-format","title":"Health File Format","text":"<pre><code>{\n  \"timestamp\": 1759046473900,\n  \"projectPath\": \"/Users/q284340/Agentic/coding\",\n  \"transcriptPath\": \"/Users/.../coding/ff78b04f-7bf1-47f3-8bd5-95fad54132bf.jsonl\",\n  \"status\": \"running\",\n  \"userHash\": \"g9b30a\",\n  \"metrics\": {\n    \"memoryMB\": 14,\n    \"memoryTotalMB\": 27,\n    \"cpuUser\": 6114958,\n    \"cpuSystem\": 1783796,\n    \"uptimeSeconds\": 6812,\n    \"processId\": 78580\n  },\n  \"transcriptInfo\": {\n    \"status\": \"active\",\n    \"sizeBytes\": 2453561,\n    \"ageMs\": 1417,\n    \"lastFileSize\": 2453561\n  },\n  \"activity\": {\n    \"lastExchange\": \"b23853b3-26e9-42b2-ac52-a50817818382\",\n    \"exchangeCount\": 20,\n    \"isSuspicious\": false,\n    \"suspicionReason\": null\n  },\n  \"streamingActive\": true,\n  \"errors\": []\n}\n</code></pre>"},{"location":"guides/health-dashboard/#psm-singleton-pattern","title":"PSM Singleton Pattern","text":"<p>The StatusLine Health Monitor daemon implements a robust singleton pattern via PSM integration:</p>"},{"location":"guides/health-dashboard/#registration-flow","title":"Registration Flow","text":"<ol> <li>On startup, daemon checks PSM for existing healthy instance</li> <li>If found and <code>--force</code> not specified, exits with error message</li> <li>If not found or <code>--force</code> specified, registers as global service</li> <li>Refreshes health check timestamp every 30 seconds</li> <li>On graceful shutdown, unregisters from PSM</li> </ol>"},{"location":"guides/health-dashboard/#cli-options","title":"CLI Options","text":"<pre><code># Start daemon (will fail if already running)\nnode scripts/statusline-health-monitor.js --daemon\n\n# Force start (kills existing instance)\nnode scripts/statusline-health-monitor.js --daemon --force\n\n# With auto-healing enabled\nnode scripts/statusline-health-monitor.js --daemon --auto-heal\n</code></pre>"},{"location":"guides/health-dashboard/#viewing-psm-status","title":"Viewing PSM Status","text":"<pre><code>node scripts/process-state-manager.js status\n</code></pre> <p>Output: <pre><code>Process Health Status:\n   Total: 5 | Healthy: 5 | Unhealthy: 0\n\nGlobal Services:\n   global-service-coordinator (PID: 13296, uptime: 9492m)\n   global-lsl-coordinator (PID: 13816, uptime: 9491m)\n   vkb-server (PID: 6074, uptime: 858m)\n   statusline-health-monitor (PID: 39770, uptime: 1m)\n\nProject Services:\n   /Users/q284340/Agentic/coding:\n     enhanced-transcript-monitor (PID: 40417, uptime: 0m)\n</code></pre></p>"},{"location":"guides/health-dashboard/#performance-metrics","title":"Performance Metrics","text":""},{"location":"guides/health-dashboard/#resource-usage","title":"Resource Usage","text":"Metric Value Memory per Monitor ~5-15MB CPU Usage &lt;1% per monitor during normal operation Disk I/O Minimal (health file updates every 15 seconds) Network None (local file system only)"},{"location":"guides/health-dashboard/#scalability","title":"Scalability","text":"Metric Value Supported Sessions Unlimited (tested with 10+ concurrent sessions) Discovery Time &lt;100ms for session discovery Recovery Time &lt;5 seconds for auto-recovery StatusLine Update Real-time (sub-second updates)"},{"location":"guides/health-dashboard/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/health-dashboard/#common-issues","title":"Common Issues","text":"<p>\"Level DB is locked by another process\"</p> <pre><code># Check what's holding the lock\nlsof .data/knowledge-graph/LOCK\n\n# Stop VKB server\nvkb server stop\n\n# Or kill the process\nkill &lt;PID&gt;\n</code></pre> <p>Sessions Not Appearing in StatusLine</p> <ol> <li>Check Global LSL Registry: Verify project is registered</li> <li>Check Claude Transcript Directory: Ensure session has active transcript</li> <li>Verify Monitor Process: Check if transcript monitor is running</li> </ol> <p>Auto-Recovery Not Working</p> <ol> <li>Check Coordinator PID: Verify coordinator process is current</li> <li>Check Health Check Interval: Ensure health checks are running</li> <li>Manual Recovery: <code>node scripts/global-lsl-coordinator.js health-check</code></li> </ol>"},{"location":"guides/health-dashboard/#health-check-commands","title":"Health Check Commands","text":"<pre><code># Verify all components are working\nnode scripts/statusline-health-monitor.js --verify\n\n# Test session discovery\nnode scripts/statusline-health-monitor.js --discover\n\n# Check auto-recovery status\nnode scripts/global-lsl-coordinator.js status\n\n# Check all process health\nps aux | grep -E \"(transcript-monitor|global-lsl-coordinator)\"\n</code></pre>"},{"location":"guides/knowledge-workflows/","title":"Knowledge Workflows Guide","text":"<p>Complete guide to the knowledge capture, processing, and storage systems.</p> <p></p>"},{"location":"guides/knowledge-workflows/#overview","title":"Overview","text":"<p>The coding infrastructure uses two complementary knowledge management systems:</p> System Purpose Trigger Storage MCP Semantic Analysis Deep, on-demand code analysis with 14 specialized agents Type \"ukb\" in Claude chat GraphDB to LevelDB to JSON Continuous Learning Real-time session learning with budget control Automatic during sessions Qdrant + SQLite"},{"location":"guides/knowledge-workflows/#ukb-update-knowledge-base","title":"UKB - Update Knowledge Base","text":""},{"location":"guides/knowledge-workflows/#current-system-mcp-integration","title":"Current System: MCP Integration","text":"<p>The UKB CLI tool has been replaced with MCP (Model Context Protocol) integration. Type \"ukb\" in Claude chat to trigger knowledge updates.</p>"},{"location":"guides/knowledge-workflows/#quick-start","title":"Quick Start","text":"<pre><code># In Claude chat (NOT terminal):\nUser: \"ukb\"\n\n# Claude executes incremental analysis automatically\n# Shows summary of entities created, relations, insights generated\n</code></pre>"},{"location":"guides/knowledge-workflows/#full-analysis","title":"Full Analysis","text":"<pre><code>User: \"ukb full\"\n</code></pre> <p>This processes entire git history and all session logs instead of just changes since last checkpoint.</p>"},{"location":"guides/knowledge-workflows/#what-happens-when-you-type-ukb","title":"What Happens When You Type \"ukb\"","text":"<ol> <li>Claude detects knowledge update request</li> <li>Decides: incremental or full analysis</li> <li>Calls MCP semantic-analysis tool</li> <li>Executes 14-agent workflow with SmartOrchestrator</li> <li>QA agent provides semantic routing (proceed/retry/skip/escalate)</li> <li>Stores to GraphDB to LevelDB to JSON export</li> <li>Shows you a summary with confidence metrics</li> </ol>"},{"location":"guides/knowledge-workflows/#14-agent-multi-agent-system","title":"14-Agent Multi-Agent System","text":""},{"location":"guides/knowledge-workflows/#smart-orchestrator-flow","title":"Smart Orchestrator Flow","text":""},{"location":"guides/knowledge-workflows/#orchestration-layer","title":"Orchestration Layer","text":"<ul> <li>SmartOrchestrator - Semantic coordination with confidence propagation and intelligent retry</li> <li>CoordinatorAgent - Executes workflow definitions, manages agent lifecycle</li> </ul>"},{"location":"guides/knowledge-workflows/#data-extraction-agents","title":"Data Extraction Agents","text":"<ol> <li>GitHistoryAgent - LLM-powered commit pattern analysis and evolution extraction</li> <li>VibeHistoryAgent - Analyzes session logs with LLM context extraction</li> <li>CodeGraphAgent - AST-based indexing via Memgraph (requires Docker)</li> </ol>"},{"location":"guides/knowledge-workflows/#analysis-enrichment-agents","title":"Analysis &amp; Enrichment Agents","text":"<ol> <li>SemanticAnalysisAgent - Deep semantic analysis with LLM fallback chain</li> <li>OntologyClassificationAgent - Maps entities to project ontology</li> <li>WebSearchAgent - Researches patterns with optional LLM result ranking</li> </ol>"},{"location":"guides/knowledge-workflows/#knowledge-generation-agents","title":"Knowledge Generation Agents","text":"<ol> <li>InsightGenerationAgent - Creates structured insights with PlantUML diagrams</li> <li>ObservationGenerationAgent - Adds observations using LLM structuring</li> <li>DocumentationLinkerAgent - LLM-powered semantic doc-to-code matching</li> </ol>"},{"location":"guides/knowledge-workflows/#quality-persistence-agents","title":"Quality &amp; Persistence Agents","text":"<ol> <li>QualityAssuranceAgent - Semantic Router: validates quality, generates routing decisions (proceed/retry/skip/escalate), provides confidence scoring</li> <li>DeduplicationAgent - Semantic duplicate detection using OpenAI embeddings</li> <li>ContentValidationAgent - Final validation and entity refresh</li> <li>PersistenceAgent - Stores entities to GraphDB</li> </ol>"},{"location":"guides/knowledge-workflows/#smartorchestrator-features","title":"SmartOrchestrator Features","text":"<ul> <li>Semantic Retry: Not mechanical threshold tightening - provides specific guidance on what went wrong</li> <li>Confidence Propagation: Each step reports confidence; downstream agents are aware of upstream quality</li> <li>Routing Decisions: QA generates proceed/retry/skip/escalate based on semantic analysis</li> <li>LLM-Assisted Decisions: Uses AI to interpret failures and suggest remediation</li> </ul>"},{"location":"guides/knowledge-workflows/#storage-architecture","title":"Storage Architecture","text":"<p>The storage flows through three layers:</p> <ol> <li>Graphology (in-memory) - Fast graph operations with 1-second auto-persist</li> <li>LevelDB (persistent) - Durable storage at <code>.data/knowledge-graph/</code></li> <li>JSON Files (git-tracked) - Team sync via <code>.data/knowledge-export/coding.json</code></li> </ol> Layer Location Purpose GraphDB In-memory Graphology Fast graph operations LevelDB <code>.data/knowledge-graph/</code> Persistent storage JSON Export <code>.data/knowledge-export/coding.json</code> Git-tracked team sync Checkpoint <code>.data/ukb-last-run.json</code> Incremental processing"},{"location":"guides/knowledge-workflows/#team-synchronization","title":"Team Synchronization","text":"<p>Developer A workflow:</p> <ol> <li>Types \"ukb\" in Claude</li> <li>Workflow executes</li> <li>Updates: .data/knowledge-export/coding.json</li> <li>Updates: .data/ukb-last-run.json</li> <li>Git commits both files</li> <li>Git pushes to remote</li> </ol> <p>Developer B workflow:</p> <ol> <li>Git pulls from remote</li> <li>Gets updated coding.json (knowledge)</li> <li>Gets updated ukb-last-run.json (checkpoint)</li> <li>Types \"ukb\" in Claude</li> <li>Only processes commits/sessions since checkpoint (avoiding duplicate work)</li> </ol>"},{"location":"guides/knowledge-workflows/#continuous-learning-system","title":"Continuous Learning System","text":""},{"location":"guides/knowledge-workflows/#key-features","title":"Key Features","text":"<ul> <li>Agent-Agnostic Design: Currently optimized for Claude Code; designed to support other AI assistants in future</li> <li>Real-Time Extraction: Learns as you code, not after the fact</li> <li>Semantic Search: Find relevant knowledge using vector similarity</li> <li>Budget-Aware: Tracks LLM costs and enforces monthly limits ($8.33/month)</li> <li>Privacy-First: Automatically routes sensitive data to local models</li> <li>Cross-Session Learning: Share knowledge across different coding sessions</li> </ul>"},{"location":"guides/knowledge-workflows/#system-components","title":"System Components","text":"<p>Inference Layer:</p> <ul> <li><code>UnifiedInferenceEngine</code> - Central LLM inference with multi-provider support</li> <li><code>BudgetTracker</code> - Cost tracking and $8.33/month enforcement</li> <li><code>SensitivityClassifier</code> - 5-layer privacy detection</li> <li><code>CircuitBreaker</code> - Failure detection and provider failover</li> </ul> <p>Knowledge Management:</p> <ul> <li><code>StreamingKnowledgeExtractor</code> - Real-time knowledge extraction with buffering</li> <li><code>KnowledgeRetriever</code> - Semantic search with temporal decay</li> <li><code>ConceptAbstractionAgent</code> - Pattern generalization (3+ instances)</li> <li><code>TemporalDecayTracker</code> - Knowledge aging and freshness management</li> </ul>"},{"location":"guides/knowledge-workflows/#knowledge-extraction-flow","title":"Knowledge Extraction Flow","text":"<ol> <li>Exchange Processing: Developer interacts with coding agent</li> <li>Intent Classification: Trajectory analyzer classifies developer intent</li> <li>Budget Check: Budget tracker verifies cost allowance</li> <li>Sensitivity Detection: Classifier routes sensitive data to local models</li> <li>Knowledge Extraction: Buffered exchanges are processed and stored</li> <li>Budget Fallback: Automatic fallback to local models when budget exceeded</li> </ol>"},{"location":"guides/knowledge-workflows/#knowledge-retrieval-flow","title":"Knowledge Retrieval Flow","text":"<ol> <li>Search Request: Developer queries for knowledge patterns</li> <li>Cache Check: System checks for cached results first</li> <li>Embedding Generation: Query converted to vector embedding</li> <li>Vector Search: Qdrant performs HNSW search with filters</li> <li>Temporal Decay: Results adjusted based on knowledge age</li> <li>Ranking &amp; Filtering: Results ranked by relevance and filtered by threshold</li> <li>Cache Storage: Results cached for future queries (5-minute TTL)</li> </ol> <p>Performance: Cache hits return results in ~20ms vs ~300ms for vector search.</p>"},{"location":"guides/knowledge-workflows/#dual-database-strategy","title":"Dual-Database Strategy","text":"Database Purpose Location Qdrant Vector search (semantic similarity) localhost:6333 SQLite Analytics, budget tracking, metadata <code>.cache/knowledge.db</code>"},{"location":"guides/knowledge-workflows/#qdrant-collections","title":"Qdrant Collections","text":"Collection Dimensions Purpose <code>knowledge_patterns</code> 1536-dim High-quality long-term storage <code>knowledge_patterns_small</code> 384-dim Fast local embeddings <code>trajectory_analysis</code> 384-dim Development trajectory tracking <code>session_memory</code> 384-dim Session-specific memory"},{"location":"guides/knowledge-workflows/#sqlite-tables","title":"SQLite Tables","text":"<ul> <li><code>budget_events</code> - LLM cost tracking</li> <li><code>knowledge_extractions</code> - Extraction metadata</li> <li><code>session_metrics</code> - Session analytics</li> <li><code>embedding_cache</code> - Cached embeddings</li> </ul>"},{"location":"guides/knowledge-workflows/#budget-configuration","title":"Budget Configuration","text":""},{"location":"guides/knowledge-workflows/#monthly-limit","title":"Monthly Limit","text":"<p>Default: $8.33/month</p> <pre><code>const system = new KnowledgeLearningSystem({\n  budgetLimit: 8.33,\n  budgetAlerts: [\n    { threshold: 50, action: 'log' },\n    { threshold: 80, action: 'warn' },\n    { threshold: 90, action: 'notify' }\n  ],\n  budgetAwareRouting: true  // Prefer cheaper providers when budget tight\n});\n</code></pre>"},{"location":"guides/knowledge-workflows/#provider-costs","title":"Provider Costs","text":"Provider Input (per 1K tokens) Output (per 1K tokens) Groq $0.0004 $0.0006 OpenRouter $0.001 $0.001 Local (Ollama) $0 $0"},{"location":"guides/knowledge-workflows/#fallback-chain","title":"Fallback Chain","text":"<p>The system tries providers in order: groq (remote, fast) then openrouter (remote, accurate) then local (free, private)</p>"},{"location":"guides/knowledge-workflows/#temporal-decay","title":"Temporal Decay","text":"<p>Knowledge ages over time with configurable decay rates:</p> Category Max Age Rank Adjustment Fresh 30 days +20% Aging 90 days No change Stale 180 days -30% Deprecated 365 days -70% <p>Exceptions (never decay):</p> <ul> <li><code>coding_principle</code></li> <li><code>architecture_pattern</code></li> </ul>"},{"location":"guides/knowledge-workflows/#status-indicators","title":"Status Indicators","text":""},{"location":"guides/knowledge-workflows/#knowledge-system-status","title":"Knowledge System Status","text":"Status Icon Meaning Ready <code>[\ud83d\udcda\u2705]</code> Knowledge extraction ready and operational Processing <code>[\ud83d\udcda\u23f3]</code> Actively extracting knowledge from session Idle <code>[\ud83d\udcda\ud83d\udca4]</code> Operational but waiting/sleeping Warning <code>[\ud83d\udcda\u26a0\ufe0f \u26a0\ufe0fN]</code> Has N errors but still operational Paused/Disabled <code>[\ud83d\udcda\u23f8\ufe0f ]</code> Knowledge extraction disabled in config Offline <code>[\ud83d\udcda\u274c]</code> System offline or initialization failed"},{"location":"guides/knowledge-workflows/#initialization","title":"Initialization","text":""},{"location":"guides/knowledge-workflows/#automatic-initialization","title":"Automatic Initialization","text":"<p>Knowledge system is automatically initialized during fresh installations:</p> <pre><code># Run the installer (automatically initializes knowledge system)\n./install.sh\n\n# Or initialize manually if needed\nnode scripts/initialize-knowledge-system.js\n</code></pre>"},{"location":"guides/knowledge-workflows/#verification","title":"Verification","text":"<pre><code># Check health status\ncat .health/coding-transcript-monitor-health.json | jq '.knowledgeExtraction'\n\n# Check status line\nCODING_REPO=/path/to/coding node scripts/combined-status-line.js\n\n# Run E2E tests\nnode scripts/test-knowledge-extraction.js [--verbose]\n</code></pre>"},{"location":"guides/knowledge-workflows/#visualization","title":"Visualization","text":""},{"location":"guides/knowledge-workflows/#start-vkb-server","title":"Start VKB Server","text":"<pre><code># In terminal:\nvkb server start\n\n# Open browser to http://localhost:8080\n</code></pre>"},{"location":"guides/knowledge-workflows/#vkb-features","title":"VKB Features","text":"<ul> <li>Interactive graph visualization</li> <li>Entity browsing and search</li> <li>Relation exploration</li> <li>Real-time updates via WebSocket</li> </ul> <p>See VKB Visualization Guide for complete documentation.</p>"},{"location":"guides/knowledge-workflows/#migration-guide","title":"Migration Guide","text":""},{"location":"guides/knowledge-workflows/#what-to-stop-doing","title":"What to Stop Doing","text":"<ul> <li><code>ukb --interactive</code> (command doesn't exist)</li> <li><code>ukb --auto</code> (command doesn't exist)</li> <li><code>ukb entity add ...</code> (command doesn't exist)</li> <li>Manual JSON file editing</li> </ul>"},{"location":"guides/knowledge-workflows/#what-to-start-doing","title":"What to Start Doing","text":"<ul> <li>Type \"ukb\" in Claude chat</li> <li>Let Claude call MCP semantic-analysis tool</li> <li>Trust the 14-agent workflow with SmartOrchestrator</li> <li>Review auto-generated insights and confidence metrics</li> <li>Commit <code>.data/knowledge-export/*.json</code> and <code>.data/ukb-last-run.json</code></li> </ul>"},{"location":"guides/knowledge-workflows/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/knowledge-workflows/#qdrant-connection-errors","title":"Qdrant Connection Errors","text":"<pre><code># Check if Qdrant is running\ncurl http://localhost:6333/health\n\n# Start Qdrant with Docker\ndocker run -p 6333:6333 qdrant/qdrant\n</code></pre>"},{"location":"guides/knowledge-workflows/#budget-exceeded","title":"Budget Exceeded","text":"<pre><code>// Check budget status\nconst budget = await system.getBudgetStatus();\n// Review budget.used, budget.remaining, budget.percentage\n\n// Force heuristic mode (no LLM costs)\nconst system = new KnowledgeLearningSystem({\n  forceHeuristic: true\n});\n</code></pre>"},{"location":"guides/knowledge-workflows/#slow-vector-search","title":"Slow Vector Search","text":"<ul> <li>Enable quantization for faster searches</li> <li>Reduce search limit</li> <li>Use 384-dim embeddings instead of 1536-dim</li> </ul>"},{"location":"guides/knowledge-workflows/#key-files","title":"Key Files","text":"File Purpose <code>.data/knowledge-graph/</code> LevelDB persistent storage <code>.data/knowledge-export/coding.json</code> Git-tracked knowledge export <code>.data/ukb-last-run.json</code> Incremental processing checkpoint <code>.cache/knowledge.db</code> SQLite analytics database <code>.health/coding-transcript-monitor-health.json</code> Knowledge extraction health <code>.specstory/config/knowledge-system.json</code> Knowledge system configuration"},{"location":"guides/status-line/","title":"Status Line Complete Guide","text":"<p>Real-time visual indicators of system health and development activity in the Claude Code status bar.</p> <p></p>"},{"location":"guides/status-line/#reading-the-status-line","title":"Reading the Status Line","text":""},{"location":"guides/status-line/#example-display","title":"Example Display","text":"<p>Native Mode: <pre><code>[\ud83c\udfe5\u2705] [Gq$2JAN A$18 O\u25cb X$25] [C\ud83d\udfe2 UT\ud83e\uded2] [\ud83d\udee1\ufe0f 67% \ud83d\udd0dEX] [\ud83d\udcda\u2705] \ud83d\udccb17-18\n</code></pre></p> <p>Docker Mode: <pre><code>[\ud83d\udc33] [\ud83d\udc33MCP:SA\u2705CM\u2705CGR\u2705] [\ud83c\udfe5\u2705] [Gq$2JAN A$18 O\u25cb X$25] [C\ud83d\udfe2 UT\ud83e\uded2] [\ud83d\udee1\ufe0f 67% \ud83d\udd0dEX] [\ud83d\udcda\u2705] \ud83d\udccb17-18\n</code></pre></p>"},{"location":"guides/status-line/#component-breakdown","title":"Component Breakdown","text":"Component Example Description Docker Mode <code>[\ud83d\udc33]</code> Indicator that system is running in Docker mode Docker MCP Health <code>[\ud83d\udc33MCP:SA\u2705CM\u2705CGR\u2705]</code> Health of containerized MCP SSE servers System Health <code>[\ud83c\udfe5\u2705]</code> Unified health (infrastructure + services) API Quota <code>[Gq$2JAN A$18 O\u25cb X$25]</code> LLM provider availability Active Sessions <code>[C\ud83d\udfe2 UT\ud83e\uded2]</code> Project abbreviations with activity icons Constraint Compliance <code>\ud83d\udee1\ufe0f 67%</code> Code quality compliance percentage Trajectory State <code>\ud83d\udd0d EX</code> Current development activity Knowledge System <code>[\ud83d\udcda\u2705]</code> Knowledge extraction status LSL Time Window <code>\ud83d\udccb17-18</code> Session time range (HHMM-HHMM)"},{"location":"guides/status-line/#complete-emoji-reference","title":"Complete Emoji Reference","text":""},{"location":"guides/status-line/#system-health-indicators","title":"System Health Indicators","text":"Display Meaning Action <code>[\ud83c\udfe5\u2705]</code> All systems healthy None needed <code>[\ud83c\udfe5\u26a0\ufe0f]</code> Issues detected Check dashboard for details <code>[\ud83c\udfe5\u23f0]</code> Stale - verification data &gt;2 minutes old Health verifier may have crashed <code>[\ud83c\udfe5\u274c]</code> Critical issues or error Immediate attention required <code>[\ud83c\udfe5\ud83d\udca4]</code> Health verifier offline Start health verifier"},{"location":"guides/status-line/#session-activity-indicators","title":"Session Activity Indicators","text":"<p>Sessions use a graduated color scheme based on time since last activity. Only sessions active within 24 hours are displayed.</p> Icon Status Time Since Activity Description \ud83d\udfe2 Active &lt; 5 minutes Active session with recent activity \ud83c\udf32 Cooling 5 - 15 minutes Session cooling down \ud83e\uded2 Fading 15 min - 1 hour Session fading, still tracked \ud83e\udea8 Dormant 1 - 6 hours Session dormant but alive \u26ab Inactive 6 - 24 hours Session inactive (last shown before filtering) \ud83d\udca4 Sleeping &gt; 24 hours Hidden from display \u274c Error Any Health check failed or service crash <p>Visual progression: <pre><code>\ud83d\udfe2 Active \u2192 \ud83c\udf32 Cooling \u2192 \ud83e\uded2 Fading \u2192 \ud83e\udea8 Dormant \u2192 \u26ab Inactive \u2192 [hidden]\n   &lt;5min      5-15min     15m-1hr     1-6hr        6-24hr       &gt;24hr\n</code></pre></p>"},{"location":"guides/status-line/#trajectory-states","title":"Trajectory States","text":"Icon State Description \ud83d\udd0d EX (Exploring) Information gathering and analysis \ud83d\udcc8 ON (On Track) Productive progression \ud83d\udcc9 OFF (Off Track) Deviating from optimal path \u2699\ufe0f IMP (Implementing) Active code modification \u2705 VER (Verifying) Testing and validation \ud83d\udeab BLK (Blocked) Intervention preventing action"},{"location":"guides/status-line/#knowledge-system-indicators","title":"Knowledge System Indicators","text":"Status Icon Meaning Ready <code>[\ud83d\udcda\u2705]</code> Knowledge extraction ready and operational Processing <code>[\ud83d\udcda\u23f3]</code> Actively extracting knowledge from session Idle <code>[\ud83d\udcda\ud83d\udca4]</code> Operational but waiting/sleeping Warning <code>[\ud83d\udcda\u26a0\ufe0f \u26a0\ufe0fN]</code> Has N errors but still operational Paused/Disabled <code>[\ud83d\udcda\u23f8\ufe0f ]</code> Knowledge extraction disabled in config Offline <code>[\ud83d\udcda\u274c]</code> System offline or initialization failed"},{"location":"guides/status-line/#internal-health-components","title":"Internal Health Components","text":"<p>The statusline-health-monitor writes detailed health to <code>.logs/statusline-health-status.txt</code>:</p> <pre><code>[GCM:\u2705] [Sessions: C:\ud83d\udfe2] [Guards:\u2705] [DB:\u2705] [VKB:\u2705] [Browser:\u2705] [Dash:\u2705]\n</code></pre> Label Ports Service Description <code>GCM</code> - Global Process Supervisor Session coordinator and auto-restart <code>Sessions</code> - Transcript Monitors Per-project Claude session health <code>Guards</code> 3030/3031 Constraint Monitor Dashboard and API for code quality <code>DB</code> - Databases LevelDB, SQLite, Qdrant, Memgraph <code>VKB</code> 8080 Knowledge Visualization Graph visualization server <code>Browser</code> 3847 Browser Automation SSE server for parallel sessions <code>Dash</code> 3032/3033 System Health Dashboard UI and API for health monitoring"},{"location":"guides/status-line/#api-quota-monitoring","title":"API Quota Monitoring","text":""},{"location":"guides/status-line/#format","title":"Format","text":"<p><code>[Provider$X ...]</code> or <code>[Provider\u25cf ...]</code></p>"},{"location":"guides/status-line/#provider-abbreviations","title":"Provider Abbreviations","text":"Abbreviation Provider Notes <code>Gq</code> Groq Free tier or monthly billing <code>Ggl</code> Google Gemini Free tier: 15 RPM, 1M TPD <code>A</code> Anthropic Claude Requires Admin API key for usage data <code>O</code> OpenAI Requires Admin API key for usage data <code>X</code> X.AI Grok Free credits: $25"},{"location":"guides/status-line/#display-logic","title":"Display Logic","text":"Scenario Display Meaning Monthly billing (Groq) <code>Gq$2JAN</code> $2 spent in January Prepaid credits configured <code>A$18</code> $18 remaining of prepaid amount Free tier (Groq, Google) <code>Gq\u25cf</code> Available (rate-limited only) No admin key <code>O\u25cb</code> Cannot get usage data"},{"location":"guides/status-line/#pie-chart-symbols","title":"Pie Chart Symbols","text":"Symbol Name Remaining <code>\u25cf</code> Full &gt;87.5% <code>\u25d5</code> Three-quarters 62.5-87.5% <code>\u25d0</code> Half 37.5-62.5% <code>\u25d4</code> Quarter 12.5-37.5% <code>\u25cb</code> Empty &lt;12.5% or no data"},{"location":"guides/status-line/#configuration","title":"Configuration","text":"<p>Configure provider credits in <code>config/live-logging-config.json</code>:</p> <pre><code>{\n  \"provider_credits\": {\n    \"groq\": {\n      \"billingType\": \"monthly\",\n      \"monthlySpend\": 2,\n      \"billingMonth\": \"JAN\",\n      \"spendLimit\": null\n    },\n    \"anthropic\": { \"prepaidCredits\": 20 },\n    \"openai\": { \"prepaidCredits\": 50 },\n    \"xai\": { \"prepaidCredits\": 25 }\n  }\n}\n</code></pre> <p>Groq Billing Types:</p> <ul> <li><code>\"billingType\": \"free\"</code> - Free tier, shows pie symbol (<code>Gq\u25cf</code>)</li> <li><code>\"billingType\": \"monthly\"</code> - Monthly billing, shows spend + month (<code>Gq$2JAN</code>)</li> <li><code>monthlySpend</code> - Current month spend (update from console.groq.com)</li> <li><code>billingMonth</code> - 3-letter month abbreviation (JAN, FEB, etc.)</li> <li><code>spendLimit</code> - Optional spend limit for warnings</li> </ul> <p>Admin API Keys (required for real-time usage tracking):</p> <ul> <li>Anthropic: <code>ANTHROPIC_ADMIN_API_KEY</code> - Get at console.anthropic.com \u2192 Settings \u2192 Admin API Keys</li> <li>OpenAI: <code>OPENAI_ADMIN_API_KEY</code> - Get at platform.openai.com/settings/organization/admin-keys</li> <li>Groq: No public billing API yet - update <code>monthlySpend</code> manually from console.groq.com</li> </ul>"},{"location":"guides/status-line/#docker-mode-indicators","title":"Docker Mode Indicators","text":""},{"location":"guides/status-line/#detection","title":"Detection","text":"<p>Docker mode is detected when: - The <code>.docker-mode</code> marker file exists in the coding repository - OR the <code>CODING_DOCKER_MODE=true</code> environment variable is set</p>"},{"location":"guides/status-line/#docker-mcp-health-display","title":"Docker MCP Health Display","text":"Abbreviation Service Port Health Check <code>SA</code> Semantic Analysis 3848 <code>http://localhost:3848/health</code> <code>CM</code> Constraint Monitor 3849 <code>http://localhost:3849/health</code> <code>CGR</code> Code Graph RAG 3850 <code>http://localhost:3850/health</code>"},{"location":"guides/status-line/#status-icons","title":"Status Icons","text":"<ul> <li><code>\u2705</code> - Service healthy and responding</li> <li><code>\u274c</code> - Service down or not responding</li> <li><code>\u26a0\ufe0f</code> - Service responding but with issues</li> </ul>"},{"location":"guides/status-line/#examples","title":"Examples","text":"Display Meaning <code>[\ud83d\udc33MCP:SA\u2705CM\u2705CGR\u2705]</code> All Docker MCP services healthy <code>[\ud83d\udc33MCP:SA\u2705CM\u274cCGR\u2705]</code> Constraint Monitor is down <code>[\ud83d\udc33MCP:SA\u26a0\ufe0fCM\u2705CGR\u2705]</code> Semantic Analysis has issues"},{"location":"guides/status-line/#architecture","title":"Architecture","text":""},{"location":"guides/status-line/#6-layer-health-system","title":"6-Layer Health System","text":"<p>The StatusLineHealthMonitor (Layer 4) aggregates health from all other layers and outputs to the Combined Status Line display.</p> <p></p>"},{"location":"guides/status-line/#status-line-update-flow","title":"Status Line Update Flow","text":"<p>Update Sequence:</p> <ol> <li>Health Check Trigger: Pre-prompt hook fires</li> <li>Status Collection:</li> <li>Read health verification status</li> <li>Query constraint monitor API</li> <li>Read trajectory state file</li> <li>Check API quota for all providers</li> <li>Scan LSL registry</li> <li>Status Aggregation: Combine all indicators</li> <li>Display Update: Update Claude Code status bar</li> <li>Cache: Store for next check</li> </ol>"},{"location":"guides/status-line/#caching","title":"Caching","text":"Data Cache Duration Health status 5 minutes Constraint compliance 1 minute API quota (real-time) 30 seconds API quota (estimated) 5 minutes Trajectory state Read on every update LSL status Read on every update"},{"location":"guides/status-line/#service-lifecycle-states","title":"Service Lifecycle States","text":""},{"location":"guides/status-line/#state-transitions","title":"State Transitions","text":"<p>Health States (for <code>[\ud83c\udfe5...]</code> indicator): - Health check success \u2192 Healthy (\u2705) - GCM or Health Verifier issues \u2192 Warning (\u26a0\ufe0f) - Critical failures \u2192 Critical (\u274c)</p> <p>Session States (graduated cooling scheme): - Time passage \u2192 \ud83d\udfe2 \u2192 \ud83c\udf32 \u2192 \ud83e\uded2 \u2192 \ud83e\udea8 \u2192 \u26ab \u2192 [hidden] - Sessions &gt;24 hours are filtered from display</p>"},{"location":"guides/status-line/#session-discovery","title":"Session Discovery","text":""},{"location":"guides/status-line/#discovery-methods","title":"Discovery Methods","text":"<ol> <li>Running Monitor Detection: Checks <code>ps aux</code> for running <code>enhanced-transcript-monitor.js</code> processes</li> <li>Registry-based Discovery: Uses Global LSL Registry for registered sessions</li> <li>Dynamic Discovery: Scans Claude transcript directories for unregistered sessions</li> <li>Health File Validation: Uses centralized health files from <code>.health/</code> directory</li> </ol>"},{"location":"guides/status-line/#key-behavior","title":"Key Behavior","text":"<ul> <li>Sessions WITH running transcript monitors are shown with full activity status</li> <li>Sessions WITHOUT running monitors BUT with recent transcripts (within 48h) are shown as \ud83d\udca4</li> <li>Sessions older than 48 hours without a monitor are hidden</li> <li>The Global Process Supervisor automatically restarts dead monitors within 30 seconds</li> </ul>"},{"location":"guides/status-line/#smart-abbreviation-engine","title":"Smart Abbreviation Engine","text":"<p>Project names are automatically abbreviated:</p> Project Name Abbreviation coding C curriculum-alignment CA nano-degree ND project-management PM user-interface UI <p>Algorithm Handles: - Single words: First letter (coding \u2192 C) - Hyphenated words: First letter of each part (curriculum-alignment \u2192 CA) - Camel case: Capital letters (projectManagement \u2192 PM)</p>"},{"location":"guides/status-line/#configuration_1","title":"Configuration","text":""},{"location":"guides/status-line/#status-line-configuration","title":"Status Line Configuration","text":"<p>File: <code>config/status-line-config.json</code></p> <pre><code>{\n  \"enabled\": true,\n  \"update_interval_ms\": 5000,\n  \"cache_duration_ms\": 300000,\n  \"health_source\": \".health/verification-status.json\",\n  \"trajectory_source\": \".specstory/trajectory/live-state.json\",\n  \"lsl_registry\": \".lsl/global-registry.json\",\n  \"constraint_api\": \"http://localhost:3031/api/compliance/{project}\",\n  \"abbreviation_style\": \"smart\",\n  \"multi_session_display\": true,\n  \"max_sessions_displayed\": 5\n}\n</code></pre>"},{"location":"guides/status-line/#configuration-options","title":"Configuration Options","text":"Option Description Default <code>enabled</code> Toggle status line on/off <code>true</code> <code>update_interval_ms</code> How often to check for updates 5000ms <code>cache_duration_ms</code> How long to cache health status 5 minutes <code>abbreviation_style</code> <code>smart</code> | <code>first-letter</code> | <code>full-name</code> <code>smart</code> <code>multi_session_display</code> Show multiple sessions or just active one <code>true</code> <code>max_sessions_displayed</code> Maximum sessions to show 5"},{"location":"guides/status-line/#terminal-title-broadcasting","title":"Terminal Title Broadcasting","text":""},{"location":"guides/status-line/#how-it-works","title":"How It Works","text":"<p>Every 15 seconds, the statusline-health-monitor broadcasts status to all Claude session terminals via ANSI escape codes:</p> <pre><code>Terminal Tab: \"C\ud83d\udfe2 | UT\ud83e\uded2 CA\ud83c\udf32\"\n              \u2191          \u2191\n        Current     Other active sessions\n        project     (sleeping sessions hidden)\n</code></pre>"},{"location":"guides/status-line/#terminal-compatibility","title":"Terminal Compatibility","text":"Terminal Status Notes iTerm2 \u2705 Works Full OSC 0 support Terminal.app \u2705 Works Native macOS terminal VS Code Terminal \u274c Limited Does not process OSC 0 from external TTY writes tmux \u26a0\ufe0f Partial Requires <code>set -g set-titles on</code>"},{"location":"guides/status-line/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/status-line/#status-line-not-updating","title":"Status line not updating?","text":"<pre><code># Check if health verifier is running\nps aux | grep health-verifier\n\n# Manually trigger health check\nnode scripts/health-verifier.js\n\n# Check status files exist\nls -la .health/verification-status.json\nls -la .specstory/trajectory/live-state.json\n</code></pre>"},{"location":"guides/status-line/#wrong-project-showing-as-active","title":"Wrong project showing as active?","text":"<pre><code># Check LSL registry\ncat .lsl/global-registry.json | jq '.'\n\n# Verify activity timestamps\ncat .lsl/global-registry.json | jq '.sessions[] | {project, last_activity}'\n</code></pre>"},{"location":"guides/status-line/#session-not-showing-that-should-be","title":"Session not showing that should be?","text":"<pre><code># Check if transcript monitor is running for that project\nps aux | grep enhanced-transcript-monitor | grep PROJECT_NAME\n\n# Only sessions with running monitors are shown\n</code></pre>"},{"location":"guides/status-line/#docker-mcp-services-showing-unhealthy","title":"Docker MCP services showing unhealthy?","text":"<pre><code># Check if Docker containers are running\ndocker compose -f docker/docker-compose.yml ps\n\n# Test individual health endpoints\ncurl http://localhost:3848/health  # Semantic Analysis\ncurl http://localhost:3849/health  # Constraint Monitor\ncurl http://localhost:3850/health  # Code Graph RAG\n\n# Check container logs for errors\ndocker compose -f docker/docker-compose.yml logs coding-services\n</code></pre>"},{"location":"guides/status-line/#key-files","title":"Key Files","text":"<p>Core System:</p> File Purpose <code>scripts/combined-status-line.js</code> Main status line script <code>scripts/statusline-health-monitor.js</code> Session health monitor daemon <code>scripts/health-verifier.js</code> Health status provider <code>lib/api-quota-checker.js</code> API quota provider <code>.lsl/global-registry.json</code> LSL session registry <code>.health/verification-status.json</code> Health status cache <code>.logs/statusline-health-status.txt</code> Rendered status line output <p>Configuration:</p> File Purpose <code>config/status-line-config.json</code> Status line configuration <code>config/live-logging-config.json</code> API quota and provider config"},{"location":"guides/vkb-visualization/","title":"VKB Visualization Guide","text":"<p>Interactive knowledge graph visualization and exploration.</p> <p></p>"},{"location":"guides/vkb-visualization/#overview","title":"Overview","text":"<p>VKB (Visualize Knowledge Base) is a cross-platform knowledge visualization server that provides interactive web-based exploration of knowledge graphs. It offers comprehensive server lifecycle management, real-time data updates, and programmatic control.</p>"},{"location":"guides/vkb-visualization/#key-features","title":"Key Features","text":"<ul> <li>Interactive Visualization: Explore knowledge graphs in browser</li> <li>Server Management: Start, stop, restart with automatic recovery</li> <li>Real-time Updates: Refresh data without restart</li> <li>Health Monitoring: Automatic health checks and status reporting</li> <li>Cross-Platform: Works on Windows, macOS, and Linux</li> <li>Programmatic API: Control server from Node.js code</li> </ul>"},{"location":"guides/vkb-visualization/#visualization-screenshots","title":"Visualization Screenshots","text":""},{"location":"guides/vkb-visualization/#quick-reference","title":"Quick Reference","text":""},{"location":"guides/vkb-visualization/#basic-commands","title":"Basic Commands","text":"<pre><code># Start visualization server (default command)\nvkb\nvkb start\n\n# Stop server gracefully\nvkb stop\n\n# Restart server\nvkb restart\n\n# Check server status\nvkb status\n\n# View server logs\nvkb logs\n\n# Start in foreground for debugging\nvkb fg\n\n# Check what's using the port\nvkb port\n</code></pre>"},{"location":"guides/vkb-visualization/#access-visualization","title":"Access Visualization","text":"<p>Once started, visualization is available at:</p> <pre><code>http://localhost:8080\n</code></pre> <p>Server automatically opens browser on startup (disable with <code>--no-browser</code>)</p>"},{"location":"guides/vkb-visualization/#usage-modes","title":"Usage Modes","text":""},{"location":"guides/vkb-visualization/#1-background-server-default","title":"1. Background Server (Default)","text":"<pre><code>vkb start\n</code></pre> <p>What it does:</p> <ul> <li>Starts server in background</li> <li>Opens browser automatically</li> <li>Runs as daemon process</li> <li>PID tracked for management</li> <li>Logs to <code>/tmp/vkb-server.log</code></li> </ul> <p>Use when:</p> <ul> <li>Daily development sessions</li> <li>Long-running visualization access</li> <li>Team knowledge sharing</li> <li>Production-like deployment</li> </ul>"},{"location":"guides/vkb-visualization/#2-foreground-mode","title":"2. Foreground Mode","text":"<pre><code>vkb fg\nvkb foreground\n</code></pre> <p>What it does:</p> <ul> <li>Runs server in foreground</li> <li>Logs output to console</li> <li>Blocks terminal</li> <li>Useful for debugging</li> </ul> <p>Use when:</p> <ul> <li>Debugging server issues</li> <li>Development and testing</li> <li>Monitoring real-time logs</li> <li>Troubleshooting startup problems</li> </ul>"},{"location":"guides/vkb-visualization/#3-server-management","title":"3. Server Management","text":"<pre><code># Check status\nvkb status --json --verbose\n\n# View logs\nvkb logs -n 100 --follow\n\n# Check port usage\nvkb port --kill\n\n# Force restart\nvkb stop --force &amp;&amp; vkb start\n</code></pre>"},{"location":"guides/vkb-visualization/#server-lifecycle","title":"Server Lifecycle","text":""},{"location":"guides/vkb-visualization/#startup-sequence","title":"Startup Sequence","text":"<ol> <li>Pre-startup Validation</li> <li>Environment dependency checking (Node.js, Python 3)</li> <li>Project structure validation</li> <li>Port availability verification</li> <li> <p>Existing process detection</p> </li> <li> <p>Data Preparation</p> </li> <li>Knowledge base loading and parsing</li> <li>Format conversion (JSON to NDJSON)</li> <li>Symlink creation for file serving</li> <li> <p>Asset verification</p> </li> <li> <p>Server Initialization</p> </li> <li>HTTP server process spawning</li> <li>PID tracking and management</li> <li>Health verification</li> <li> <p>Browser integration (optional)</p> </li> <li> <p>Runtime Monitoring</p> </li> <li>Process health checks</li> <li>Log monitoring</li> <li>Error detection and recovery</li> <li>Resource usage tracking</li> </ol>"},{"location":"guides/vkb-visualization/#shutdown-sequence","title":"Shutdown Sequence","text":"<ol> <li>Graceful Termination</li> <li>Server process signaling (SIGTERM)</li> <li>Connection draining</li> <li>Resource cleanup</li> <li> <p>PID file removal</p> </li> <li> <p>Forced Cleanup</p> </li> <li>Process termination (SIGKILL if needed)</li> <li>Port release verification</li> <li>Temporary file cleanup</li> <li>Log file finalization</li> </ol>"},{"location":"guides/vkb-visualization/#data-management","title":"Data Management","text":""},{"location":"guides/vkb-visualization/#real-time-data-refresh","title":"Real-time Data Refresh","text":"<pre><code># Refresh data without restarting server\nvkb-cli data refresh\n\n# Validate data integrity\nvkb-cli data validate\n\n# Export data in various formats\nvkb-cli data export --format json --output kb-export.json\n</code></pre>"},{"location":"guides/vkb-visualization/#workflow-integration","title":"Workflow Integration","text":"<pre><code># Knowledge capture happens via:\n# 1. Continuous Learning (automatic during coding)\n# 2. MCP Semantic Analysis (type \"ukb\" in Claude chat)\n\n# Refresh visualization after knowledge updates\nvkb-cli data refresh\n\n# Or restart for comprehensive refresh\nvkb restart\n</code></pre>"},{"location":"guides/vkb-visualization/#http-api-endpoints","title":"HTTP API Endpoints","text":"<p>When running, VKB exposes HTTP endpoints for integration:</p>"},{"location":"guides/vkb-visualization/#health-check","title":"Health Check","text":"<pre><code>curl http://localhost:8080/health\n</code></pre> <p>Response: <pre><code>{\n  \"status\": \"healthy\",\n  \"uptime\": 135000,\n  \"version\": \"2.0.0\",\n  \"timestamp\": \"2025-06-20T10:30:00.000Z\"\n}\n</code></pre></p>"},{"location":"guides/vkb-visualization/#server-status","title":"Server Status","text":"<pre><code>curl http://localhost:8080/api/status\n</code></pre> <p>Response: <pre><code>{\n  \"running\": true,\n  \"pid\": 12345,\n  \"port\": 8080,\n  \"memory\": {\n    \"rss\": 47284224,\n    \"heapTotal\": 32768000,\n    \"heapUsed\": 18234000\n  }\n}\n</code></pre></p>"},{"location":"guides/vkb-visualization/#knowledge-base-info","title":"Knowledge Base Info","text":"<pre><code>curl http://localhost:8080/api/kb/info\n</code></pre> <p>Response: <pre><code>{\n  \"entities\": 45,\n  \"relations\": 123,\n  \"lastUpdated\": \"2025-06-20T10:25:00.000Z\"\n}\n</code></pre></p>"},{"location":"guides/vkb-visualization/#data-refresh","title":"Data Refresh","text":"<pre><code>curl -X POST http://localhost:8080/api/kb/refresh\n</code></pre> <p>Response: <pre><code>{\n  \"success\": true,\n  \"entities\": 45,\n  \"relations\": 123,\n  \"duration\": 1250\n}\n</code></pre></p>"},{"location":"guides/vkb-visualization/#programmatic-api","title":"Programmatic API","text":""},{"location":"guides/vkb-visualization/#vkbserver-class","title":"VKBServer Class","text":"<pre><code>const { VKBServer } = require('vkb-server');\n\n// Create server instance\nconst server = new VKBServer({\n  port: 8080,\n  projectRoot: process.cwd(),\n  logLevel: 'info',\n  autoRestart: true\n});\n\n// Start server\nawait server.start({\n  foreground: false,\n  openBrowser: true\n});\n\n// Get server status\nconst status = await server.status();\n// Use status.port for debugging\n\n// Refresh data\nconst result = await server.refreshData();\n// result.entities and result.relations available\n\n// Health check\nconst health = await server.healthCheck();\nif (!health.healthy) {\n  // Handle unhealthy server\n}\n\n// View logs\nconst logs = await server.logs({ lines: 100, level: 'error' });\n\n// Stop server\nawait server.stop();\n</code></pre>"},{"location":"guides/vkb-visualization/#event-handling","title":"Event Handling","text":"<pre><code>server.on('starting', () =&gt; {\n  // Server is starting\n});\n\nserver.on('started', (result) =&gt; {\n  // Server started at result.url\n});\n\nserver.on('stopped', (result) =&gt; {\n  // Server stopped, result.pid available\n});\n\nserver.on('error', (error) =&gt; {\n  // Handle error\n});\n\nserver.on('health-check', (result) =&gt; {\n  if (!result.healthy) {\n    // Health check failed\n  }\n});\n</code></pre>"},{"location":"guides/vkb-visualization/#common-use-cases","title":"Common Use Cases","text":""},{"location":"guides/vkb-visualization/#1-daily-development-session","title":"1. Daily Development Session","text":"<pre><code># Start development session\ncd /path/to/project\nvkb start\n\n# Server starts, opens browser automatically\n# Developer explores knowledge graph throughout day\n\n# End of day\nvkb stop\n</code></pre>"},{"location":"guides/vkb-visualization/#2-knowledge-base-updates","title":"2. Knowledge Base Updates","text":"<pre><code># Capture new insights (in Claude chat)\n# Type: \"ukb\"\n\n# Refresh without restart\nvkb-cli data refresh\n\n# Or full restart\nvkb restart\n</code></pre>"},{"location":"guides/vkb-visualization/#3-debugging-and-troubleshooting","title":"3. Debugging and Troubleshooting","text":"<pre><code># Start in foreground for debugging\nvkb fg --debug\n\n# Monitor logs in real-time\nvkb logs --follow\n\n# Check port conflicts\nvkb port\n\n# Check health status\nvkb status --verbose\n\n# Force restart if needed\nvkb stop --force &amp;&amp; vkb start\n</code></pre>"},{"location":"guides/vkb-visualization/#4-multi-project-development","title":"4. Multi-Project Development","text":"<pre><code># Project A\ncd /path/to/project-a\nvkb start --port 8080\n\n# Project B (different port)\ncd /path/to/project-b\nvkb start --port 8081\n\n# Check both servers\nvkb-cli server status --all\n\n# Access in browser\nopen http://localhost:8080  # Project A\nopen http://localhost:8081  # Project B\n\n# Cleanup\nvkb-cli server stop --all\n</code></pre>"},{"location":"guides/vkb-visualization/#5-team-knowledge-sharing","title":"5. Team Knowledge Sharing","text":"<pre><code># Presenter starts server\nvkb start\n\n# Allow network access\nvkb-cli config set host 0.0.0.0\nvkb restart\n\n# Team accesses via network: http://presenter-ip:8080\n\n# Refresh with latest insights during session\nvkb-cli data refresh\n\n# Generate sharing report after session\nvkb-cli server logs --since \"1 hour ago\" &gt; session-log.txt\nvkb-cli data export --format json --output session-knowledge.json\n</code></pre>"},{"location":"guides/vkb-visualization/#configuration","title":"Configuration","text":""},{"location":"guides/vkb-visualization/#environment-variables","title":"Environment Variables","text":"<pre><code># Default server port\nexport VKB_PORT=8080\n\n# Project root directory\nexport VKB_PROJECT_ROOT=/path/to/project\n\n# Logging level\nexport VKB_LOG_LEVEL=info\n\n# Enable auto-restart\nexport VKB_AUTO_RESTART=true\n\n# Disable automatic browser opening\nexport VKB_NO_BROWSER=true\n</code></pre>"},{"location":"guides/vkb-visualization/#configuration-file","title":"Configuration File","text":"<p>Create <code>.vkbrc</code> in project root:</p> <pre><code>{\n  \"port\": 8080,\n  \"logLevel\": \"info\",\n  \"autoRestart\": true,\n  \"healthCheckInterval\": 30000,\n  \"browser\": {\n    \"enabled\": true,\n    \"command\": \"open\"\n  },\n  \"server\": {\n    \"host\": \"localhost\",\n    \"workers\": 1\n  }\n}\n</code></pre>"},{"location":"guides/vkb-visualization/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/vkb-visualization/#common-issues","title":"Common Issues","text":"<pre><code># Port already in use\nvkb port --kill\nvkb start\n\n# Server not responding\nvkb stop --force\nvkb start\n\n# Data not updating\nvkb-cli data refresh\n\n# Permission issues\nsudo vkb start  # or fix file permissions\n\n# Check logs for errors\nvkb logs --level error\n</code></pre>"},{"location":"guides/vkb-visualization/#debug-mode","title":"Debug Mode","text":"<pre><code># Start with debug logging\nvkb fg --debug\n\n# Check detailed status\nvkb status --json --verbose\n\n# Monitor health\nwatch -n 5 'vkb status'\n</code></pre>"},{"location":"guides/vkb-visualization/#related-documentation","title":"Related Documentation","text":"<ul> <li>UKB - Update Knowledge Base</li> <li>Core Systems: UKB/VKB</li> <li>Knowledge Management Overview</li> </ul>"},{"location":"integrations/","title":"Integrations","text":"<p>MCP servers and tools that extend the coding infrastructure.</p> <p></p>"},{"location":"integrations/#mcp-servers","title":"MCP Servers","text":"<ul> <li> <p> Semantic Analysis</p> <p>14-agent AI system for code understanding and knowledge extraction.</p> <p></p> <ul> <li>Knowledge workflow orchestration</li> <li>Pattern recognition</li> <li>Ontology mapping</li> </ul> <p>Port: 3848 (Docker)</p> <p> Details</p> </li> <li> <p> Constraint Monitor</p> <p>Real-time code quality enforcement via PreToolUse hooks.</p> <p></p> <ul> <li>20+ configurable constraints</li> <li>Web dashboard</li> <li>Violation tracking</li> </ul> <p>Port: 3849 (Docker)</p> <p> Details</p> </li> <li> <p> Browser Access</p> <p>AI-powered browser automation via Stagehand.</p> <ul> <li>Visual scraping</li> <li>Form automation</li> <li>Screenshot capture</li> </ul> <p>Port: 3847 (Docker)</p> <p> Details</p> </li> <li> <p> Code Graph RAG</p> <p>AST-based code search with Memgraph graph database.</p> <ul> <li>Call graph analysis</li> <li>Natural language queries</li> <li>Similar code finding</li> </ul> <p>Port: 3850 (Docker)</p> <p> Details</p> </li> <li> <p> Serena</p> <p>AST-based code analysis (read-only).</p> <ul> <li>Deep code navigation</li> <li>Pattern matching</li> <li>Semantic search</li> </ul> <p>Mode: Native only</p> <p> Details</p> </li> <li> <p> Dashboard</p> <p>System monitoring and knowledge visualization.</p> <p></p> <ul> <li>VKB knowledge viewer</li> <li>Health monitoring</li> <li>Workflow visualization</li> </ul> <p>Port: 8080 (VKB), 3032 (Health)</p> <p> Details</p> </li> </ul>"},{"location":"integrations/#service-ports","title":"Service Ports","text":"Service Port Protocol Health Check Browser Access 3847 HTTP/SSE <code>/health</code> Semantic Analysis 3848 HTTP/SSE <code>/health</code> Constraint Monitor 3031/3849 HTTP <code>/health</code> Code Graph RAG 3850 HTTP/SSE <code>/health</code> VKB Server 8080 HTTP <code>/health</code> Health Dashboard 3032 HTTP <code>/health</code> Memgraph 7687 Bolt N/A Memgraph Lab 3100 HTTP N/A Qdrant 6333/6334 HTTP/gRPC <code>/health</code>"},{"location":"integrations/#architecture","title":"Architecture","text":"<pre><code>flowchart TB\n    CC[Claude Code] --&gt; MCP{MCP Protocol}\n    MCP --&gt; SA[Semantic Analysis]\n    MCP --&gt; CM[Constraint Monitor]\n    MCP --&gt; BA[Browser Access]\n    MCP --&gt; CGR[Code Graph RAG]\n    MCP --&gt; SER[Serena]\n\n    SA --&gt; GDB[(GraphDB)]\n    SA --&gt; QD[(Qdrant)]\n    CGR --&gt; MG[(Memgraph)]\n    CM --&gt; CMDB[(Violations DB)]\n\n    GDB --&gt; VKB[VKB Dashboard]\n    CMDB --&gt; CMD[Constraint Dashboard]</code></pre>"},{"location":"integrations/#mcp-configuration","title":"MCP Configuration","text":"<p>MCP servers are configured automatically by the installer. The configuration depends on your deployment mode.</p>"},{"location":"integrations/#docker-mode-default","title":"Docker Mode (Default)","text":"<p>MCP servers run as HTTP/SSE services in Docker containers. Claude communicates via stdio-proxy:</p> <pre><code>Claude Code &lt;-&gt; stdio-proxy.js &lt;-&gt; HTTP/SSE &lt;-&gt; Docker Container\n</code></pre>"},{"location":"integrations/#native-mode","title":"Native Mode","text":"<p>MCP servers run as direct Node.js processes managed by Claude CLI:</p> <pre><code>Claude Code &lt;-&gt; stdio &lt;-&gt; Node.js Process\n</code></pre>"},{"location":"integrations/#configuration-location","title":"Configuration Location","text":"<ul> <li>macOS/Linux: <code>~/.claude/settings.json</code></li> <li>Windows: <code>%APPDATA%/Claude/settings.json</code></li> </ul> <p>Auto-Configuration</p> <p>The installer creates and maintains MCP configuration. Manual editing is rarely needed.</p>"},{"location":"integrations/#available-tools","title":"Available Tools","text":"<p>Each MCP server provides tools accessible within Claude sessions:</p>"},{"location":"integrations/#semantic-analysis-tools","title":"Semantic Analysis Tools","text":"Tool Purpose <code>determine_insights</code> AI-powered content analysis <code>execute_workflow</code> Run multi-agent workflows <code>analyze_code</code> Code pattern analysis <code>analyze_repository</code> Repository-wide analysis <code>create_ukb_entity_with_insight</code> Create knowledge entities <code>refresh_entity</code> Update stale entities"},{"location":"integrations/#constraint-monitor-tools","title":"Constraint Monitor Tools","text":"Tool Purpose <code>check_constraints</code> Validate code against constraints <code>get_violation_history</code> View past violations <code>get_constraint_status</code> Current compliance metrics <code>update_constraints</code> Modify constraint rules"},{"location":"integrations/#browser-access-tools","title":"Browser Access Tools","text":"Tool Purpose <code>stagehand_navigate</code> Navigate to URL <code>stagehand_act</code> Perform page actions <code>stagehand_extract</code> Extract page content <code>stagehand_observe</code> Find interactive elements <code>screenshot</code> Capture page screenshot"},{"location":"integrations/#code-graph-rag-tools","title":"Code Graph RAG Tools","text":"Tool Purpose <code>query_code_graph</code> Natural language queries <code>index_repository</code> Build code graph <code>get_code_snippet</code> Retrieve source code <code>comprehensive_analysis</code> Deep code analysis"},{"location":"integrations/#health-checks","title":"Health Checks","text":""},{"location":"integrations/#docker-mode","title":"Docker Mode","text":"<pre><code># Check all health endpoints\nfor port in 3847 3848 3849 3850 8080 3032; do\n  echo \"Port $port: $(curl -s http://localhost:$port/health | jq -r '.status // \"N/A\"')\"\ndone\n</code></pre>"},{"location":"integrations/#native-mode_1","title":"Native Mode","text":"<pre><code># Check if MCP servers are registered\ncat ~/.claude/settings.json | jq '.mcpServers | keys'\n</code></pre>"},{"location":"integrations/#submodule-management","title":"Submodule Management","text":"<p>Integration components are git submodules:</p> <pre><code># Update all submodules\ngit submodule update --remote\n\n# Initialize missing submodules\ngit submodule update --init --recursive\n\n# Update specific submodule\ngit submodule update --remote integrations/mcp-server-semantic-analysis\n</code></pre>"},{"location":"integrations/#related-documentation","title":"Related Documentation","text":"<ul> <li>Configuration - API keys and settings</li> <li>Docker Mode - Container deployment</li> <li>Data Flow - Integration data flow</li> </ul>"},{"location":"integrations/browser-access/","title":"Browser Access","text":"<p>Stagehand browser automation via MCP.</p>"},{"location":"integrations/browser-access/#overview","title":"Overview","text":"Property Value Component <code>browser-access</code> Type MCP Server Port (Docker) 3847 Framework Stagehand"},{"location":"integrations/browser-access/#what-it-does","title":"What It Does","text":"<p>Browser automation for web interactions, testing, and data extraction.</p> <ul> <li>Navigate - Load URLs in automated browser</li> <li>Act - Perform atomic actions (click, type, select)</li> <li>Extract - Extract text content from pages</li> <li>Observe - Find actionable elements</li> <li>Screenshot - Capture page screenshots</li> </ul>"},{"location":"integrations/browser-access/#mcp-tools","title":"MCP Tools","text":"Tool Description <code>stagehand_navigate</code> Navigate to URL <code>stagehand_act</code> Perform page actions <code>stagehand_extract</code> Extract page text <code>stagehand_observe</code> Find actionable elements <code>screenshot</code> Capture page screenshot"},{"location":"integrations/browser-access/#usage-examples","title":"Usage Examples","text":""},{"location":"integrations/browser-access/#navigate","title":"Navigate","text":"<pre><code>stagehand_navigate {\n  \"url\": \"https://example.com\"\n}\n</code></pre>"},{"location":"integrations/browser-access/#act","title":"Act","text":"<p>Actions should be atomic and specific:</p> <pre><code>stagehand_act {\n  \"action\": \"Click the sign in button\"\n}\n\nstagehand_act {\n  \"action\": \"Type 'hello' into the search input\"\n}\n</code></pre> <p>Atomic Actions</p> <p>Avoid compound actions like \"Order me pizza\" or \"Send an email to Paul\". Break them into specific steps.</p>"},{"location":"integrations/browser-access/#extract","title":"Extract","text":"<pre><code>stagehand_extract {}\n</code></pre> <p>Returns all text content from current page.</p>"},{"location":"integrations/browser-access/#observe","title":"Observe","text":"<p>Use to find elements for subsequent actions:</p> <pre><code>stagehand_observe {\n  \"instruction\": \"find the login button\"\n}\n</code></pre>"},{"location":"integrations/browser-access/#screenshot","title":"Screenshot","text":"<pre><code>screenshot {}\n</code></pre>"},{"location":"integrations/browser-access/#configuration","title":"Configuration","text":"<p>Native Mode:</p> <pre><code>{\n  \"mcpServers\": {\n    \"browser-access\": {\n      \"command\": \"node\",\n      \"args\": [\"/path/to/browser-access/build/index.js\"],\n      \"env\": {\n        \"LOCAL_CDP_URL\": \"ws://localhost:9222\"\n      }\n    }\n  }\n}\n</code></pre> <p>Docker Mode:</p> <pre><code>{\n  \"mcpServers\": {\n    \"browser-access\": {\n      \"command\": \"node\",\n      \"args\": [\"/path/to/browser-access/dist/stdio-proxy.js\"],\n      \"env\": {\n        \"BROWSER_ACCESS_SSE_URL\": \"http://localhost:3847\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"integrations/browser-access/#docker-benefits","title":"Docker Benefits","text":"<p>In Docker mode, multiple Claude sessions can share the same browser instance:</p> <ul> <li>No browser startup overhead per session</li> <li>Persistent browser state</li> <li>Shared tabs and cookies</li> <li>Better resource utilization</li> </ul>"},{"location":"integrations/browser-access/#best-practices","title":"Best Practices","text":"<ol> <li>Use observe before act when unsure about element selectors</li> <li>Keep actions atomic - one action per tool call</li> <li>Extract for scraping - use when you need text, not interactions</li> <li>Screenshot sparingly - prefer observe/extract for data</li> </ol>"},{"location":"integrations/browser-access/#health-check","title":"Health Check","text":"<pre><code># Docker mode\ncurl http://localhost:3847/health\n</code></pre>"},{"location":"integrations/browser-access/#troubleshooting","title":"Troubleshooting","text":""},{"location":"integrations/browser-access/#browser-not-connecting","title":"Browser not connecting","text":"<pre><code># Check Chrome DevTools Protocol\ncurl http://localhost:9222/json/version\n\n# Verify Docker container\ndocker compose -f docker/docker-compose.yml logs browser-access\n</code></pre>"},{"location":"integrations/browser-access/#actions-failing","title":"Actions failing","text":"<ul> <li>Use <code>stagehand_observe</code> first to verify element exists</li> <li>Check that action description matches visible text</li> <li>Ensure page has fully loaded before acting</li> </ul>"},{"location":"integrations/code-graph-rag/","title":"Code Graph RAG","text":"<p>AST-based code indexing and semantic search via Memgraph.</p>"},{"location":"integrations/code-graph-rag/#overview","title":"Overview","text":"Property Value Component <code>code-graph-rag</code> Type MCP Server Port (Docker) 3850 Database Memgraph (port 7687) UI Memgraph Lab (port 3100)"},{"location":"integrations/code-graph-rag/#what-it-does","title":"What It Does","text":"<ul> <li>AST Indexing - Parses code into Abstract Syntax Tree</li> <li>Graph Storage - Stores entities and relationships in Memgraph</li> <li>Semantic Search - Natural language queries about codebase</li> <li>Call Graph - Function dependency analysis</li> <li>Similar Code - Find similar code patterns</li> </ul>"},{"location":"integrations/code-graph-rag/#mcp-tools","title":"MCP Tools","text":"Tool Description <code>index_repository</code> Build code graph from repository <code>query_code_graph</code> Natural language code queries <code>get_code_snippet</code> Retrieve source code by qualified name <code>surgical_replace_code</code> Targeted code replacement <code>read_file</code> Read file contents <code>write_file</code> Write file contents <code>list_directory</code> List directory contents <code>comprehensive_analysis</code> LLM-powered entity analysis"},{"location":"integrations/code-graph-rag/#actions","title":"Actions","text":""},{"location":"integrations/code-graph-rag/#index-repository","title":"Index Repository","text":"<pre><code>index_repository {}\n</code></pre> <p>Parses and indexes the entire codebase into Memgraph.</p>"},{"location":"integrations/code-graph-rag/#natural-language-query","title":"Natural Language Query","text":"<pre><code>query_code_graph {\n  \"natural_language_query\": \"What functions call UserService.create_user?\"\n}\n</code></pre>"},{"location":"integrations/code-graph-rag/#get-code-snippet","title":"Get Code Snippet","text":"<pre><code>get_code_snippet {\n  \"qualified_name\": \"app.services.UserService.create_user\"\n}\n</code></pre> <p>Returns source code, file path, line numbers, and docstring.</p>"},{"location":"integrations/code-graph-rag/#comprehensive-analysis","title":"Comprehensive Analysis","text":"<pre><code>comprehensive_analysis {\n  \"qualified_name\": \"app.services.UserService\",\n  \"scope\": \"full\"\n}\n</code></pre> <p>Scopes: <code>full</code>, <code>structure</code>, <code>behavior</code>, <code>dependencies</code></p>"},{"location":"integrations/code-graph-rag/#configuration","title":"Configuration","text":"<p>Native Mode:</p> <pre><code>{\n  \"mcpServers\": {\n    \"code-graph-rag\": {\n      \"command\": \"node\",\n      \"args\": [\"/path/to/code-graph-rag/build/index.js\"],\n      \"env\": {\n        \"MEMGRAPH_HOST\": \"localhost\",\n        \"MEMGRAPH_PORT\": \"7687\"\n      }\n    }\n  }\n}\n</code></pre> <p>Docker Mode:</p> <pre><code>{\n  \"mcpServers\": {\n    \"code-graph-rag\": {\n      \"command\": \"node\",\n      \"args\": [\"/path/to/code-graph-rag/dist/stdio-proxy.js\"],\n      \"env\": {\n        \"CODE_GRAPH_RAG_SSE_URL\": \"http://localhost:3850\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"integrations/code-graph-rag/#memgraph-database","title":"Memgraph Database","text":"<p>Bolt Protocol: port 7687 Lab UI: http://localhost:3100</p>"},{"location":"integrations/code-graph-rag/#direct-queries","title":"Direct Queries","text":"<pre><code># Connect via Memgraph Lab\nopen http://localhost:3100\n\n# Or via cypher-shell\ndocker exec memgraph cypher-shell -u memgraph -p memgraph \\\n  \"MATCH (n) RETURN count(n);\"\n</code></pre>"},{"location":"integrations/code-graph-rag/#indexed-entities","title":"Indexed Entities","text":"Entity Type Description <code>Function</code> Functions and methods <code>Class</code> Classes and types <code>Module</code> Files and packages <code>Import</code> Import relationships <code>Call</code> Function call relationships"},{"location":"integrations/code-graph-rag/#use-cases","title":"Use Cases","text":""},{"location":"integrations/code-graph-rag/#understanding-code","title":"Understanding Code","text":"<pre><code>\"What functions call registerWithPSM?\"\n\"Show me all classes that implement the Repository interface\"\n\"How does the authentication flow work?\"\n</code></pre>"},{"location":"integrations/code-graph-rag/#finding-dependencies","title":"Finding Dependencies","text":"<pre><code>\"What modules import UserService?\"\n\"Show the call graph for processPayment\"\n</code></pre>"},{"location":"integrations/code-graph-rag/#code-navigation","title":"Code Navigation","text":"<pre><code>\"Find the definition of handleError\"\n\"What files contain database queries?\"\n</code></pre>"},{"location":"integrations/code-graph-rag/#health-check","title":"Health Check","text":"<pre><code># MCP server\ncurl http://localhost:3850/health\n\n# Memgraph\ndocker exec memgraph cypher-shell -u memgraph -p memgraph \"RETURN 1;\"\n</code></pre>"},{"location":"integrations/code-graph-rag/#integration-with-ukb","title":"Integration with UKB","text":"<p>Code graph is automatically updated during <code>ukb</code> runs via the CodeGraphAgent in Semantic Analysis.</p>"},{"location":"integrations/code-graph-rag/#troubleshooting","title":"Troubleshooting","text":""},{"location":"integrations/code-graph-rag/#memgraph-not-connecting","title":"Memgraph not connecting","text":"<pre><code># Check container status\ndocker compose -f docker/docker-compose.yml ps memgraph\n\n# View logs\ndocker compose -f docker/docker-compose.yml logs memgraph\n\n# Restart Memgraph\ndocker compose -f docker/docker-compose.yml restart memgraph\n</code></pre>"},{"location":"integrations/code-graph-rag/#index-not-updating","title":"Index not updating","text":"<pre><code># Force re-index\nindex_repository {}\n\n# Check index status\nquery_code_graph { \"natural_language_query\": \"How many functions are indexed?\" }\n</code></pre>"},{"location":"integrations/constraint-monitor/","title":"Constraint Monitor","text":"<p>Real-time code quality enforcement via MCP and PreToolUse hooks.</p> <p></p>"},{"location":"integrations/constraint-monitor/#overview","title":"Overview","text":"Property Value Component <code>mcp-constraint-monitor</code> Type MCP Server + Hooks Port (Docker) 3849 Dashboard http://localhost:3030 API http://localhost:3031"},{"location":"integrations/constraint-monitor/#enforcement-mechanism","title":"Enforcement Mechanism","text":"<p>The constraint monitor uses PreToolUse hooks to intercept tool calls before execution:</p> <ol> <li>Claude initiates tool call</li> <li>PreToolUse hook fires</li> <li>Constraint Monitor evaluates parameters</li> <li>CRITICAL/ERROR: Block execution</li> <li>WARNING/INFO: Allow with feedback</li> </ol>"},{"location":"integrations/constraint-monitor/#mcp-tools","title":"MCP Tools","text":"Tool Description <code>check_constraints</code> Validate code against constraints <code>get_constraint_status</code> Current compliance metrics <code>get_violation_history</code> Past violations with resolutions <code>update_constraints</code> Modify constraint rules"},{"location":"integrations/constraint-monitor/#20-active-constraints","title":"20 Active Constraints","text":""},{"location":"integrations/constraint-monitor/#security-2","title":"Security (2)","text":"ID Severity Detection <code>no-hardcoded-secrets</code> CRITICAL 100% <code>no-eval-usage</code> CRITICAL 100%"},{"location":"integrations/constraint-monitor/#architecture-3","title":"Architecture (3)","text":"ID Severity Detection <code>no-parallel-files</code> CRITICAL 100% <code>debug-not-speculate</code> ERROR 100% <code>no-evolutionary-names</code> ERROR 100%"},{"location":"integrations/constraint-monitor/#code-quality-7","title":"Code Quality (7)","text":"ID Severity Detection <code>proper-error-handling</code> ERROR 100% <code>no-console-log</code> WARNING 100% <code>no-console-error</code> WARNING 100% <code>no-console-warn</code> WARNING 100% <code>no-var-declarations</code> WARNING Partial <code>proper-function-naming</code> INFO Partial <code>no-magic-numbers</code> INFO Partial"},{"location":"integrations/constraint-monitor/#plantuml-5","title":"PlantUML (5)","text":"ID Severity Detection <code>plantuml-standard-styling</code> ERROR 100% <code>plantuml-file-organization</code> INFO 100% <code>plantuml-file-location</code> WARNING Partial <code>plantuml-diagram-workflow</code> INFO Partial <code>plantuml-readability-guidelines</code> INFO Partial"},{"location":"integrations/constraint-monitor/#documentation-3","title":"Documentation (3)","text":"ID Severity Detection <code>image-reference-pattern</code> WARNING Partial <code>documentation-filename-format</code> INFO Partial <code>update-main-readme</code> INFO Partial"},{"location":"integrations/constraint-monitor/#configuration","title":"Configuration","text":"<p>Constraints File: <code>integrations/mcp-constraint-monitor/constraints.yaml</code></p> <pre><code>- id: no-hardcoded-secrets\n  group: security\n  pattern: 'API_KEY|SECRET|TOKEN pattern'\n  message: 'CRITICAL: Potential hardcoded secret detected'\n  severity: critical\n  enabled: true\n  suggestion: Use environment variables instead\n</code></pre> <p>Hook Configuration: <code>~/.claude/settings.json</code></p> <pre><code>{\n  \"hooks\": {\n    \"PreToolUse\": [{\n      \"matcher\": \"*\",\n      \"hooks\": [{\n        \"type\": \"command\",\n        \"command\": \"node /path/to/pre-tool-hook-wrapper.js\"\n      }]\n    }]\n  }\n}\n</code></pre>"},{"location":"integrations/constraint-monitor/#dashboard","title":"Dashboard","text":"<p>URL: http://localhost:3030</p> <p>Features:</p> <ul> <li>Real-time violation feed</li> <li>Compliance score gauge (0-10)</li> <li>7-day trend chart</li> <li>Project selector</li> <li>Constraint toggles</li> </ul>"},{"location":"integrations/constraint-monitor/#api-endpoints","title":"API Endpoints","text":"Endpoint Method Description <code>/api/violations</code> GET List violations <code>/api/violations</code> POST Log new violation <code>/api/compliance/:project</code> GET Project compliance score <code>/api/constraints</code> GET List enabled constraints <code>/api/health</code> GET Health check"},{"location":"integrations/constraint-monitor/#compliance-scoring","title":"Compliance Scoring","text":"Severity Impact CRITICAL -3.0 ERROR -2.0 WARNING -1.0 INFO -0.5 <p>Score clamped between 0 and 10.</p>"},{"location":"integrations/constraint-monitor/#testing","title":"Testing","text":""},{"location":"integrations/constraint-monitor/#automated","title":"Automated","text":"<pre><code>cd integrations/mcp-constraint-monitor\nnode test-all-constraints-comprehensive.js\n</code></pre>"},{"location":"integrations/constraint-monitor/#interactive","title":"Interactive","text":"<p>See <code>INTERACTIVE-TEST-PROMPTS.md</code> for manual test scenarios.</p>"},{"location":"integrations/constraint-monitor/#health-check","title":"Health Check","text":"<pre><code># API health\ncurl http://localhost:3031/api/health\n\n# Docker mode\ncurl http://localhost:3849/health\n</code></pre>"},{"location":"integrations/constraint-monitor/#key-files","title":"Key Files","text":"File Purpose <code>src/hooks/pre-tool-hook-wrapper.js</code> Hook entry point <code>src/enforcement/ConstraintEnforcer.js</code> Enforcement engine <code>constraints.yaml</code> Constraint definitions <code>src/dashboard/api/</code> REST API <code>src/dashboard/ui/</code> Next.js dashboard"},{"location":"integrations/dashboard/","title":"Dashboard","text":"<p>Web-based visualization and monitoring interfaces.</p>"},{"location":"integrations/dashboard/#dashboard-overview","title":"Dashboard Overview","text":"Dashboard URL Purpose VKB http://localhost:8080 Knowledge graph visualization Constraint Monitor http://localhost:3030 Compliance monitoring System Health http://localhost:3032 Service health monitoring Memgraph Lab http://localhost:3100 Graph database UI"},{"location":"integrations/dashboard/#vkb-knowledge-visualization","title":"VKB (Knowledge Visualization)","text":"<p>URL: http://localhost:8080</p> <p>Start:</p> <pre><code>vkb  # Opens browser automatically\n</code></pre>"},{"location":"integrations/dashboard/#features","title":"Features","text":"<ul> <li>Interactive Graph - Force-directed knowledge visualization</li> <li>Entity Search - Full-text search across all entities</li> <li>Type Filtering - Filter by entity class</li> <li>Significance Filter - Show high-value entities only</li> <li>Relationship Explorer - View entity connections</li> <li>Source Toggle - Switch between UKB and Continuous Learning data</li> </ul>"},{"location":"integrations/dashboard/#data-sources","title":"Data Sources","text":"<ul> <li>GraphDB - Manual UKB insights</li> <li>Qdrant - Continuous Learning embeddings</li> </ul>"},{"location":"integrations/dashboard/#constraint-monitor-dashboard","title":"Constraint Monitor Dashboard","text":"<p>URL: http://localhost:3030</p> <p>Start:</p> <pre><code>cd integrations/mcp-constraint-monitor\nPORT=3030 npm run dashboard\n</code></pre>"},{"location":"integrations/dashboard/#features_1","title":"Features","text":"<ul> <li>Real-Time Feed - Live violation updates</li> <li>Compliance Gauge - Visual 0-10 score</li> <li>7-Day Trends - Historical compliance chart</li> <li>Project Selector - Filter by project</li> <li>Constraint Toggles - Enable/disable constraints</li> <li>Risk Indicators - Visual severity classification</li> </ul>"},{"location":"integrations/dashboard/#system-health-dashboard","title":"System Health Dashboard","text":"<p>URL: http://localhost:3032</p>"},{"location":"integrations/dashboard/#features_2","title":"Features","text":"<ul> <li>Service Status - Real-time service health</li> <li>Metrics History - Health trends over time</li> <li>Alert History - Recent system alerts</li> <li>Restart Controls - Service restart buttons</li> </ul>"},{"location":"integrations/dashboard/#api-port-3033","title":"API (Port 3033)","text":"Endpoint Description <code>/api/health</code> Overall system health <code>/api/services</code> Individual service status <code>/api/metrics</code> Health metrics history <code>/api/alerts</code> Recent alerts"},{"location":"integrations/dashboard/#memgraph-lab","title":"Memgraph Lab","text":"<p>URL: http://localhost:3100</p> <p>Graph database visualization and query interface.</p>"},{"location":"integrations/dashboard/#features_3","title":"Features","text":"<ul> <li>Cypher Console - Run graph queries</li> <li>Visual Query - Point-and-click query building</li> <li>Graph Visualization - Interactive node/edge display</li> <li>Schema Browser - Explore graph structure</li> </ul>"},{"location":"integrations/dashboard/#example-queries","title":"Example Queries","text":"<pre><code>// Count all nodes\nMATCH (n) RETURN count(n);\n\n// Find all functions\nMATCH (f:Function) RETURN f.name, f.file LIMIT 10;\n\n// Show call graph\nMATCH (a:Function)-[:CALLS]-&gt;(b:Function)\nRETURN a.name, b.name LIMIT 20;\n</code></pre>"},{"location":"integrations/dashboard/#port-configuration","title":"Port Configuration","text":"<p>All dashboard ports are configured in <code>.env.ports</code>:</p> <pre><code>VKB_PORT=8080\nCONSTRAINT_DASHBOARD_PORT=3030\nCONSTRAINT_API_PORT=3031\nSYSTEM_HEALTH_DASHBOARD_PORT=3032\nSYSTEM_HEALTH_API_PORT=3033\nMEMGRAPH_LAB_PORT=3100\n</code></pre>"},{"location":"integrations/dashboard/#rebuilding-dashboards","title":"Rebuilding Dashboards","text":""},{"location":"integrations/dashboard/#vkbsystem-health-dashboard","title":"VKB/System Health Dashboard","text":"<p>Dashboard UI is bind-mounted from host. No Docker rebuild needed:</p> <pre><code>cd integrations/system-health-dashboard\nnpm run build\n# Hard-refresh browser (Cmd+Shift+R)\n</code></pre>"},{"location":"integrations/dashboard/#constraint-monitor-dashboard_1","title":"Constraint Monitor Dashboard","text":"<pre><code>cd integrations/mcp-constraint-monitor\nnpm run build\n</code></pre>"},{"location":"integrations/dashboard/#troubleshooting","title":"Troubleshooting","text":""},{"location":"integrations/dashboard/#dashboard-not-loading","title":"Dashboard not loading","text":"<pre><code># Check if port is in use\nlsof -i :8080\n\n# Start VKB server manually\ncd lib/vkb-server &amp;&amp; node index.js\n</code></pre>"},{"location":"integrations/dashboard/#data-not-updating","title":"Data not updating","text":"<pre><code># Check backend service\ncurl http://localhost:8080/api/health\n\n# Restart service\ndocker compose -f docker/docker-compose.yml restart coding-services\n</code></pre>"},{"location":"integrations/dashboard/#memgraph-lab-connection-failed","title":"Memgraph Lab connection failed","text":"<pre><code># Check Memgraph container\ndocker compose -f docker/docker-compose.yml ps memgraph\n\n# View logs\ndocker compose -f docker/docker-compose.yml logs memgraph\n</code></pre>"},{"location":"integrations/semantic-analysis/","title":"Semantic Analysis","text":"<p>14-agent AI-powered code analysis via MCP.</p> <p></p>"},{"location":"integrations/semantic-analysis/#overview","title":"Overview","text":"Property Value Component <code>mcp-server-semantic-analysis</code> Type MCP Server (Node.js) Port (Docker) 3848 Startup Time ~2s Memory ~200MB"},{"location":"integrations/semantic-analysis/#14-intelligent-agents","title":"14 Intelligent Agents","text":""},{"location":"integrations/semantic-analysis/#orchestration-1","title":"Orchestration (1)","text":"Agent Function CoordinatorAgent Orchestrates all agents via workflow definitions"},{"location":"integrations/semantic-analysis/#llm-powered-10","title":"LLM-Powered (10)","text":"Agent Function SemanticAnalysisAgent Deep code analysis using 3-tier LLM chain InsightGenerationAgent Generates insights with PlantUML diagrams QualityAssuranceAgent LLM-powered validation with feedback loops VibeHistoryAgent Processes conversation files for context ObservationGenerationAgent Creates UKB-compatible observations ContentValidationAgent Staleness detection and entity refresh GitHistoryAgent Commit pattern analysis and theme extraction WebSearchAgent External research via DuckDuckGo OntologyClassificationAgent Semantic ontology classification DocumentationLinkerAgent Links docs to code with semantic matching"},{"location":"integrations/semantic-analysis/#embeddingexternal-2","title":"Embedding/External (2)","text":"Agent Function DeduplicationAgent Duplicate detection using embeddings CodeGraphAgent AST indexing via Memgraph"},{"location":"integrations/semantic-analysis/#non-llm-1","title":"Non-LLM (1)","text":"Agent Function PersistenceAgent Saves to Graphology + LevelDB"},{"location":"integrations/semantic-analysis/#mcp-tools","title":"MCP Tools","text":"Tool Description <code>heartbeat</code> Connection health monitoring <code>test_connection</code> Server connectivity verification <code>determine_insights</code> AI-powered content analysis <code>analyze_code</code> Code pattern and quality analysis <code>analyze_repository</code> Repository-wide architecture analysis <code>extract_patterns</code> Design pattern identification <code>create_ukb_entity_with_insight</code> Knowledge base entity creation <code>execute_workflow</code> Coordinated multi-agent workflows <code>generate_documentation</code> Automated documentation generation <code>create_insight_report</code> Detailed analysis reports <code>generate_plantuml_diagrams</code> Architecture diagram generation <code>reset_analysis_checkpoint</code> Reset analysis checkpoints <code>refresh_entity</code> Refresh specific knowledge entity <code>analyze_code_graph</code> AST-based code analysis"},{"location":"integrations/semantic-analysis/#workflows","title":"Workflows","text":""},{"location":"integrations/semantic-analysis/#complete-analysis","title":"Complete Analysis","text":"<pre><code>execute_workflow { \"workflow_name\": \"complete-analysis\" }\n</code></pre> <p>Steps:</p> <ol> <li>GitHistory.analyze()</li> <li>VibeHistory.analyze()</li> <li>Semantic.analyze()</li> <li>WebSearch.research()</li> <li>Insights.generate()</li> <li>Observations.generate()</li> <li>Ontology.classify()</li> <li>CodeGraph.index()</li> <li>DocLinker.analyze()</li> <li>QA.validate()</li> <li>Persistence.save()</li> <li>Deduplication.merge()</li> <li>ContentValidation.refresh()</li> </ol>"},{"location":"integrations/semantic-analysis/#incremental-analysis","title":"Incremental Analysis","text":"<pre><code>execute_workflow { \"workflow_name\": \"incremental-analysis\" }\n</code></pre> <p>Faster analysis focusing on recent changes.</p>"},{"location":"integrations/semantic-analysis/#quality-assurance","title":"Quality Assurance","text":"<p>The QA agent implements feedback loops:</p> <ol> <li>Iteration 1: Standard parameters, initial quality check</li> <li>Iteration 2: Stricter requirements, rejects generic patterns</li> <li>Iteration 3: Maximum threshold, requires concrete evidence</li> </ol> <p>Entity Evaluation Criteria:</p> <ul> <li>Specificity</li> <li>Actionability</li> <li>Evidence</li> <li>Uniqueness</li> <li>Naming</li> </ul>"},{"location":"integrations/semantic-analysis/#configuration","title":"Configuration","text":"<p>Native Mode:</p> <pre><code>{\n  \"mcpServers\": {\n    \"semantic-analysis\": {\n      \"command\": \"node\",\n      \"args\": [\"/path/to/mcp-server-semantic-analysis/build/index.js\"],\n      \"env\": {\n        \"ANTHROPIC_API_KEY\": \"your-key\",\n        \"OPENAI_API_KEY\": \"optional-fallback\"\n      }\n    }\n  }\n}\n</code></pre> <p>Docker Mode:</p> <pre><code>{\n  \"mcpServers\": {\n    \"semantic-analysis\": {\n      \"command\": \"node\",\n      \"args\": [\"/path/to/mcp-server-semantic-analysis/dist/stdio-proxy.js\"],\n      \"env\": {\n        \"SEMANTIC_ANALYSIS_SSE_URL\": \"http://localhost:3848\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"integrations/semantic-analysis/#usage-examples","title":"Usage Examples","text":"<pre><code># Analyze repository\ndetermine_insights {\n  \"repository\": \".\",\n  \"conversationContext\": \"Current refactoring work\",\n  \"depth\": 10\n}\n\n# Execute complete analysis\nexecute_workflow {\n  \"workflow_name\": \"complete-analysis\"\n}\n\n# Extract patterns\nextract_patterns {\n  \"source\": \"authentication module\",\n  \"pattern_types\": [\"design\", \"security\"]\n}\n</code></pre>"},{"location":"integrations/semantic-analysis/#storage","title":"Storage","text":"<ul> <li>Entities: <code>.data/knowledge-graph/</code> (Graphology + LevelDB)</li> <li>Auto-export: <code>shared-memory-coding.json</code> every 30 seconds</li> <li>Insights: <code>knowledge-management/insights/</code></li> </ul>"},{"location":"integrations/semantic-analysis/#health-check","title":"Health Check","text":"<pre><code># Docker mode\ncurl http://localhost:3848/health\n\n# View logs\ndocker compose -f docker/docker-compose.yml logs -f coding-services | grep semantic\n</code></pre>"},{"location":"integrations/serena/","title":"Serena","text":"<p>AST-based semantic code analysis (read-only).</p>"},{"location":"integrations/serena/#overview","title":"Overview","text":"Property Value Component <code>serena</code> Type MCP Server Protocol stdio (native only) Purpose Code analysis and search"},{"location":"integrations/serena/#what-it-does","title":"What It Does","text":"<p>Serena provides AST-based code analysis for reading and searching code:</p> <ul> <li>Semantic Search - Find code by meaning, not just text</li> <li>Code Navigation - Jump to definitions on declarations</li> <li>Symbol Analysis - Understand code structure</li> <li>Documentation Search - Search within comments and docs</li> </ul> <p>Read-Only</p> <p>Serena is for analysis only. Never use Serena for editing files. Use standard Edit/Write tools for file modifications.</p>"},{"location":"integrations/serena/#usage","title":"Usage","text":""},{"location":"integrations/serena/#search-documentation","title":"Search Documentation","text":"<pre><code>search_serena_documentation {\n  \"query\": \"authentication flow\"\n}\n</code></pre>"},{"location":"integrations/serena/#search-code","title":"Search Code","text":"<pre><code>search_serena_code {\n  \"query\": \"UserService\"\n}\n</code></pre>"},{"location":"integrations/serena/#fetch-documentation","title":"Fetch Documentation","text":"<pre><code>fetch_serena_documentation {}\n</code></pre> <p>Returns full documentation from the repository.</p>"},{"location":"integrations/serena/#configuration","title":"Configuration","text":"<pre><code>{\n  \"mcpServers\": {\n    \"serena\": {\n      \"command\": \"node\",\n      \"args\": [\"/path/to/serena/build/index.js\"]\n    }\n  }\n}\n</code></pre>"},{"location":"integrations/serena/#when-to-use","title":"When to Use","text":"<p>Use Serena for:</p> <ul> <li>Searching for code patterns</li> <li>Understanding unfamiliar code</li> <li>Finding symbol definitions</li> <li>Exploring code structure</li> </ul> <p>Don't use Serena for:</p> <ul> <li>Editing files (use Edit tool)</li> <li>Creating files (use Write tool)</li> <li>Running code (use Bash tool)</li> </ul>"},{"location":"integrations/serena/#best-practices","title":"Best Practices","text":"<ol> <li>Search before reading - Use Serena to find relevant files first</li> <li>Combine with Read - After finding files, use Read tool for full content</li> <li>Semantic over text - Prefer semantic search for better results</li> </ol>"},{"location":"integrations/serena/#comparison-with-code-graph-rag","title":"Comparison with Code Graph RAG","text":"Feature Serena Code Graph RAG AST Analysis Yes Yes Graph Database No Yes (Memgraph) Call Graph No Yes Natural Language Limited Full File Operations No Yes Requires Docker No Yes (Memgraph) <p>Use Serena for quick searches; use Code Graph RAG for deep analysis.</p>"},{"location":"integrations/serena/#troubleshooting","title":"Troubleshooting","text":""},{"location":"integrations/serena/#server-not-starting","title":"Server not starting","text":"<pre><code># Check if Serena is built\nls integrations/serena/build/\n\n# Rebuild if needed\ncd integrations/serena &amp;&amp; npm run build\n</code></pre>"},{"location":"integrations/serena/#search-not-finding-results","title":"Search not finding results","text":"<ul> <li>Check that the repository is indexed</li> <li>Try broader search terms</li> <li>Use exact symbol names for precise matches</li> </ul>"},{"location":"reference/","title":"Reference","text":"<p>Quick reference for commands, APIs, and troubleshooting.</p>"},{"location":"reference/#quick-links","title":"Quick Links","text":"Section Description Commands CLI commands and shell usage API MCP tools and REST endpoints Troubleshooting Common issues and solutions"},{"location":"reference/#essential-commands","title":"Essential Commands","text":"<pre><code># Launch Claude Code with all integrations\ncoding --claude\n\n# View knowledge graph\nvkb\n\n# Test installation\n./scripts/test-coding.sh\n</code></pre>"},{"location":"reference/#environment-variables","title":"Environment Variables","text":"Variable Purpose <code>CODING_TOOLS_PATH</code> Path to coding repository <code>CODING_REPO</code> Same as above (alias) <code>CODING_DOCKER_MODE</code> Enable Docker mode (<code>true</code>) <code>LSL_ENABLED</code> Enable Live Session Logging <code>TRANSCRIPT_SOURCE_PROJECT</code> Current project path"},{"location":"reference/#port-reference","title":"Port Reference","text":"Port Service 8080 VKB Server 3030 Constraint Dashboard 3031 Constraint API 3032 Health Dashboard 3033 Health API 3847 Browser Access SSE 3848 Semantic Analysis SSE 3849 Constraint Monitor SSE 3850 Code Graph RAG SSE 6333 Qdrant 6379 Redis 7687 Memgraph 3100 Memgraph Lab"},{"location":"reference/#key-directories","title":"Key Directories","text":"Path Purpose <code>.specstory/history/</code> LSL session logs <code>.data/knowledge-graph/</code> GraphDB storage <code>.data/knowledge-export/</code> Git-tracked JSON exports <code>.health/</code> Health status files <code>.cache/</code> SQLite databases, embeddings"},{"location":"reference/#configuration-files","title":"Configuration Files","text":"File Purpose <code>.env</code> API keys and secrets <code>.env.ports</code> Port assignments <code>config/live-logging-config.json</code> LSL configuration <code>constraints.yaml</code> Constraint definitions <code>~/.claude/settings.json</code> Hook configuration"},{"location":"reference/api/","title":"API Reference","text":"<p>MCP tools and REST API endpoints.</p>"},{"location":"reference/api/#mcp-tools","title":"MCP Tools","text":""},{"location":"reference/api/#semantic-analysis","title":"Semantic Analysis","text":"Tool Description <code>heartbeat</code> Connection health monitoring <code>test_connection</code> Server connectivity verification <code>determine_insights</code> AI-powered content analysis <code>analyze_code</code> Code pattern and quality analysis <code>analyze_repository</code> Repository-wide architecture analysis <code>extract_patterns</code> Design pattern identification <code>create_ukb_entity_with_insight</code> Knowledge base entity creation <code>execute_workflow</code> Multi-agent workflows <code>generate_documentation</code> Automated documentation <code>create_insight_report</code> Detailed analysis reports <code>generate_plantuml_diagrams</code> Architecture diagrams <code>reset_analysis_checkpoint</code> Reset checkpoints <code>refresh_entity</code> Refresh knowledge entity <code>analyze_code_graph</code> AST-based code analysis"},{"location":"reference/api/#constraint-monitor","title":"Constraint Monitor","text":"Tool Description <code>check_constraints</code> Validate against constraints <code>get_constraint_status</code> Current compliance metrics <code>get_violation_history</code> Past violations <code>update_constraints</code> Modify constraint rules"},{"location":"reference/api/#browser-access","title":"Browser Access","text":"Tool Description <code>stagehand_navigate</code> Navigate to URL <code>stagehand_act</code> Perform page actions <code>stagehand_extract</code> Extract page text <code>stagehand_observe</code> Find actionable elements <code>screenshot</code> Capture page screenshot"},{"location":"reference/api/#code-graph-rag","title":"Code Graph RAG","text":"Tool Description <code>index_repository</code> Build code graph <code>query_code_graph</code> Natural language queries <code>get_code_snippet</code> Retrieve source code <code>surgical_replace_code</code> Targeted code replacement <code>comprehensive_analysis</code> LLM-powered analysis"},{"location":"reference/api/#rest-apis","title":"REST APIs","text":""},{"location":"reference/api/#constraint-monitor-api-port-3031","title":"Constraint Monitor API (Port 3031)","text":""},{"location":"reference/api/#list-violations","title":"List Violations","text":"<pre><code>GET /api/violations?project=coding\n</code></pre> <p>Response:</p> <pre><code>{\n  \"violations\": [\n    {\n      \"id\": \"uuid\",\n      \"constraintId\": \"no-logging-statements\",\n      \"severity\": \"warning\",\n      \"message\": \"Avoid logging statements\",\n      \"timestamp\": \"2025-01-15T10:30:00Z\"\n    }\n  ],\n  \"total\": 1\n}\n</code></pre>"},{"location":"reference/api/#log-violation","title":"Log Violation","text":"<pre><code>POST /api/violations\nContent-Type: application/json\n\n{\n  \"constraintId\": \"no-logging-statements\",\n  \"severity\": \"warning\",\n  \"message\": \"Logging statement found in file.js\",\n  \"project\": \"coding\"\n}\n</code></pre>"},{"location":"reference/api/#get-compliance","title":"Get Compliance","text":"<pre><code>GET /api/compliance/coding\n</code></pre> <p>Response:</p> <pre><code>{\n  \"score\": 9.5,\n  \"violations\": 1,\n  \"trend\": \"improving\"\n}\n</code></pre>"},{"location":"reference/api/#list-constraints","title":"List Constraints","text":"<pre><code>GET /api/constraints\n</code></pre>"},{"location":"reference/api/#health-check","title":"Health Check","text":"<pre><code>GET /api/health\n</code></pre>"},{"location":"reference/api/#health-dashboard-api-port-3033","title":"Health Dashboard API (Port 3033)","text":""},{"location":"reference/api/#overall-health","title":"Overall Health","text":"<pre><code>GET /api/health\n</code></pre> <p>Response:</p> <pre><code>{\n  \"status\": \"healthy\",\n  \"services\": {\n    \"lsl\": \"healthy\",\n    \"ukb\": \"healthy\",\n    \"constraints\": \"healthy\"\n  },\n  \"uptime\": 3600\n}\n</code></pre>"},{"location":"reference/api/#service-status","title":"Service Status","text":"<pre><code>GET /api/services\n</code></pre>"},{"location":"reference/api/#metrics-history","title":"Metrics History","text":"<pre><code>GET /api/metrics?range=24h\n</code></pre>"},{"location":"reference/api/#alerts","title":"Alerts","text":"<pre><code>GET /api/alerts?limit=10\n</code></pre>"},{"location":"reference/api/#vkb-server-api-port-8080","title":"VKB Server API (Port 8080)","text":""},{"location":"reference/api/#list-entities","title":"List Entities","text":"<pre><code>GET /api/entities?team=coding\n</code></pre>"},{"location":"reference/api/#get-entity","title":"Get Entity","text":"<pre><code>GET /api/entities/:id\n</code></pre>"},{"location":"reference/api/#search","title":"Search","text":"<pre><code>GET /api/search?q=authentication&amp;type=ImplementationPattern\n</code></pre>"},{"location":"reference/api/#graph-data","title":"Graph Data","text":"<pre><code>GET /api/graph?team=coding\n</code></pre>"},{"location":"reference/api/#agent-integration","title":"Agent Integration","text":""},{"location":"reference/api/#agentadapter-interface","title":"AgentAdapter Interface","text":"<pre><code>interface AgentAdapter {\n  // Identification\n  getName(): string;\n  getVersion(): string;\n\n  // Capabilities\n  supportsMemory(): boolean;\n  supportsBrowser(): boolean;\n  supportsHooks(): boolean;\n\n  // Operations\n  initialize(config: AgentConfig): Promise&lt;void&gt;;\n  createMemory(key: string, value: any): Promise&lt;void&gt;;\n  searchMemory(query: string): Promise&lt;Memory[]&gt;;\n  readMemory(key: string): Promise&lt;any&gt;;\n}\n</code></pre>"},{"location":"reference/api/#required-apis-for-new-agents","title":"Required APIs for New Agents","text":"API Purpose Transcript generation JSONL format session logs Memory operations create/search/read Browser automation navigate/act/extract Hook support PreToolUse/PostToolUse"},{"location":"reference/api/#integration-steps","title":"Integration Steps","text":"<ol> <li>Implement <code>AgentAdapter</code> interface</li> <li>Register in <code>agent-registry.js</code></li> <li>Add detection in <code>agent-detector.js</code></li> <li>Create launcher script <code>launch-{agent}.sh</code></li> <li>Update <code>bin/coding</code> routing</li> <li>Test with validation commands</li> </ol>"},{"location":"reference/api/#webhook-events","title":"Webhook Events","text":""},{"location":"reference/api/#constraint-violations","title":"Constraint Violations","text":"<pre><code>{\n  \"event\": \"constraint.violation\",\n  \"data\": {\n    \"constraintId\": \"no-hardcoded-secrets\",\n    \"severity\": \"critical\",\n    \"project\": \"coding\",\n    \"blocked\": true\n  }\n}\n</code></pre>"},{"location":"reference/api/#health-alerts","title":"Health Alerts","text":"<pre><code>{\n  \"event\": \"health.alert\",\n  \"data\": {\n    \"service\": \"lsl\",\n    \"status\": \"degraded\",\n    \"message\": \"High memory usage\"\n  }\n}\n</code></pre>"},{"location":"reference/commands/","title":"Commands","text":"<p>CLI commands and shell usage reference.</p>"},{"location":"reference/commands/#core-commands","title":"Core Commands","text":""},{"location":"reference/commands/#coding","title":"coding","text":"<p>Launch Claude Code with all integrations.</p> <pre><code># Default launch\ncoding --claude\n\n# Specify project\ncoding --project ~/my-project\n\n# Force specific agent\ncoding --claude    # Claude Code (default)\ncoding --copilot   # GitHub CoPilot\n\n# Docker mode\ntouch .docker-mode &amp;&amp; coding --claude\n\n# Help\ncoding --help\n</code></pre>"},{"location":"reference/commands/#vkb","title":"vkb","text":"<p>View Knowledge Base visualization.</p> <pre><code># Open in browser\nvkb\n\n# Version info\nvkb --version\n\n# Debug mode\nvkb --debug\n</code></pre>"},{"location":"reference/commands/#testing-commands","title":"Testing Commands","text":""},{"location":"reference/commands/#installation-test","title":"Installation Test","text":"<pre><code># Check-only mode (default, safe)\n./scripts/test-coding.sh\n\n# Interactive repair\n./scripts/test-coding.sh --interactive\n\n# Auto-repair coding-internal issues\n./scripts/test-coding.sh --auto-repair\n\n# Help\n./scripts/test-coding.sh --help\n</code></pre>"},{"location":"reference/commands/#lsl-validation","title":"LSL Validation","text":"<pre><code># Validate LSL configuration\nnode scripts/validate-lsl-config.js\n\n# Generate repair script\nnode scripts/validate-lsl-config.js --generate-repair\n</code></pre>"},{"location":"reference/commands/#docker-commands","title":"Docker Commands","text":""},{"location":"reference/commands/#startstop-services","title":"Start/Stop Services","text":"<pre><code># Start all services\ndocker compose -f docker/docker-compose.yml up -d\n\n# Stop all services\ndocker compose -f docker/docker-compose.yml down\n\n# Restart\ndocker compose -f docker/docker-compose.yml restart\n</code></pre>"},{"location":"reference/commands/#view-logs","title":"View Logs","text":"<pre><code># All services\ndocker compose -f docker/docker-compose.yml logs -f\n\n# Specific service\ndocker compose -f docker/docker-compose.yml logs -f coding-services\n</code></pre>"},{"location":"reference/commands/#rebuild","title":"Rebuild","text":"<pre><code># Rebuild after code changes\ndocker compose -f docker/docker-compose.yml build --no-cache\ndocker compose -f docker/docker-compose.yml up -d\n\n# Remove volumes (data loss!)\ndocker compose -f docker/docker-compose.yml down -v\n</code></pre>"},{"location":"reference/commands/#health-checks","title":"Health Checks","text":""},{"location":"reference/commands/#docker-mode","title":"Docker Mode","text":"<pre><code># All health endpoints\nfor port in 3847 3848 3849 3850; do\n  echo \"Port $port: $(curl -s http://localhost:$port/health | jq -r '.status')\"\ndone\n</code></pre>"},{"location":"reference/commands/#native-mode","title":"Native Mode","text":"<pre><code># LSL monitor health\ncat .health/coding-transcript-monitor-health.json | jq '{status, activity}'\n\n# Container status\ndocker compose -f docker/docker-compose.yml ps\n</code></pre>"},{"location":"reference/commands/#knowledge-base","title":"Knowledge Base","text":""},{"location":"reference/commands/#within-claude-code-session","title":"Within Claude Code Session","text":"<pre><code># Incremental analysis\n\"ukb\" or \"update knowledge base\"\n\n# Full analysis\n\"full ukb\" or \"fully update knowledge base\"\n</code></pre>"},{"location":"reference/commands/#command-line","title":"Command Line","text":"<pre><code># Purge entities from date\nnode scripts/purge-knowledge-entities.js 2025-12-23\n\n# Dry run\nnode scripts/purge-knowledge-entities.js 2025-12-23 --dry-run\n\n# With options\nnode scripts/purge-knowledge-entities.js 2025-12-23 --team=coding --verbose\n</code></pre>"},{"location":"reference/commands/#lsl-recovery","title":"LSL Recovery","text":"<pre><code># Recover LSL files from transcripts\nPROJECT_PATH=/path/to/project CODING_REPO=/path/to/coding \\\n  node scripts/batch-lsl-processor.js from-transcripts ~/.claude/projects/-path-to-project\n\n# Recover specific date range\nPROJECT_PATH=/path/to/project CODING_REPO=/path/to/coding \\\n  node scripts/batch-lsl-processor.js retroactive 2024-12-01 2024-12-03\n</code></pre>"},{"location":"reference/commands/#git-submodules","title":"Git Submodules","text":"<pre><code># Update all submodules\ngit submodule update --remote\n\n# Initialize missing submodules\ngit submodule update --init --recursive\n\n# Update specific submodule\ngit submodule update --remote integrations/mcp-server-semantic-analysis\n</code></pre>"},{"location":"reference/commands/#debugging","title":"Debugging","text":""},{"location":"reference/commands/#enable-debug-output","title":"Enable Debug Output","text":"<pre><code># LSL debugging\nDEBUG_STATUS=1 TRANSCRIPT_DEBUG=true node scripts/enhanced-transcript-monitor.js\n\n# Full debug mode\nDEBUG_LSL=1 node scripts/generate-proper-lsl-from-transcripts.js --mode=foreign --verbose\n</code></pre>"},{"location":"reference/commands/#process-management","title":"Process Management","text":"<pre><code># Find running monitors\nps aux | grep enhanced-transcript-monitor\n\n# Kill monitors\npkill -f enhanced-transcript-monitor\n\n# Restart monitoring\ncoding --restart-monitor\n</code></pre>"},{"location":"reference/troubleshooting/","title":"Troubleshooting","text":"<p>Common issues and solutions.</p>"},{"location":"reference/troubleshooting/#quick-diagnostics","title":"Quick Diagnostics","text":"<pre><code># System health check\n./scripts/test-coding.sh\n\n# LSL validation\nnode scripts/validate-lsl-config.js\n\n# Docker services status\ndocker compose -f docker/docker-compose.yml ps\n</code></pre>"},{"location":"reference/troubleshooting/#installation-issues","title":"Installation Issues","text":""},{"location":"reference/troubleshooting/#commands-not-found","title":"Commands Not Found","text":"<pre><code># Reload shell configuration\nsource ~/.bashrc  # or ~/.zshrc\n\n# Verify PATH\necho $PATH | grep coding\n\n# If missing, reinstall\n./install.sh --update-shell-config\n</code></pre>"},{"location":"reference/troubleshooting/#permission-errors","title":"Permission Errors","text":"<pre><code># Make scripts executable\nchmod +x install.sh\nchmod +x bin/*\n\n# Run installer\n./install.sh\n</code></pre>"},{"location":"reference/troubleshooting/#mcp-servers-not-loading","title":"MCP Servers Not Loading","text":"<pre><code># Check MCP configuration\ncat ~/.config/Claude/claude_desktop_config.json\n\n# Reinstall MCP config\n./install.sh --update-mcp-config\n\n# Check server logs\nls ~/.claude/logs/mcp*.log\n</code></pre>"},{"location":"reference/troubleshooting/#lsl-issues","title":"LSL Issues","text":""},{"location":"reference/troubleshooting/#lsl-files-not-generated","title":"LSL Files Not Generated","text":"<pre><code># Check if monitor is running\nps aux | grep enhanced-transcript-monitor\n\n# Check health file\ncat .health/coding-transcript-monitor-health.json\n\n# Restart monitor\ncoding --restart-monitor\n</code></pre>"},{"location":"reference/troubleshooting/#classification-not-working","title":"Classification Not Working","text":"<pre><code># Check classification logs\nls -la .specstory/logs/classification/\n\n# Verify configuration\ncat config/live-logging-config.json | jq '.embedding_classifier'\n</code></pre>"},{"location":"reference/troubleshooting/#recovery-from-transcripts","title":"Recovery from Transcripts","text":"<pre><code># Batch recover LSL files\nPROJECT_PATH=/path/to/project CODING_REPO=/path/to/coding \\\n  node scripts/batch-lsl-processor.js from-transcripts ~/.claude/projects/-path-to-project\n\n# Recover specific date range\nPROJECT_PATH=/path/to/project CODING_REPO=/path/to/coding \\\n  node scripts/batch-lsl-processor.js retroactive 2024-12-01 2024-12-03\n</code></pre>"},{"location":"reference/troubleshooting/#docker-mode-issues","title":"Docker Mode Issues","text":""},{"location":"reference/troubleshooting/#container-wont-start","title":"Container Won't Start","text":"<pre><code># Check logs\ndocker compose -f docker/docker-compose.yml logs coding-services\n\n# Force rebuild\ndocker compose -f docker/docker-compose.yml build --no-cache\ndocker compose -f docker/docker-compose.yml up -d\n</code></pre>"},{"location":"reference/troubleshooting/#port-conflicts","title":"Port Conflicts","text":"<pre><code># Find process using port\nlsof -i :3848\n\n# Kill conflicting process\nkill $(lsof -ti :3848)\n\n# Or change ports in .env.ports\n</code></pre>"},{"location":"reference/troubleshooting/#connection-refused","title":"Connection Refused","text":"<pre><code># Verify Docker mode is active\nls -la .docker-mode\n\n# Check container status\ndocker compose -f docker/docker-compose.yml ps\n\n# Test health endpoint\ncurl -v http://localhost:3848/health\n</code></pre>"},{"location":"reference/troubleshooting/#volume-permission-issues","title":"Volume Permission Issues","text":"<pre><code># Fix directory permissions\nmkdir -p .data/knowledge-graph .specstory/history\nchmod -R 755 .data/ .specstory/\n\n# Restart\ndocker compose -f docker/docker-compose.yml restart\n</code></pre>"},{"location":"reference/troubleshooting/#knowledge-base-issues","title":"Knowledge Base Issues","text":""},{"location":"reference/troubleshooting/#vkb-wont-start","title":"VKB Won't Start","text":"<pre><code># Check if installed\nls -la integrations/memory-visualizer/\n\n# If missing, initialize submodule\ngit submodule update --init --recursive integrations/memory-visualizer\ncd integrations/memory-visualizer\nnpm install &amp;&amp; npm run build\n\n# Test viewer\nvkb --debug\n</code></pre>"},{"location":"reference/troubleshooting/#missing-knowledge-export","title":"Missing Knowledge Export","text":"<pre><code># Check knowledge-export files\nls -la .data/knowledge-export/*.json\n\n# If missing, graph database will create on next run\n</code></pre>"},{"location":"reference/troubleshooting/#constraint-monitor-issues","title":"Constraint Monitor Issues","text":""},{"location":"reference/troubleshooting/#dashboard-not-loading","title":"Dashboard Not Loading","text":"<pre><code># Check if services are running\nlsof -i :3030\nlsof -i :3031\n\n# Start dashboard\ncd integrations/mcp-constraint-monitor\nPORT=3030 npm run dashboard\n</code></pre>"},{"location":"reference/troubleshooting/#hooks-not-firing","title":"Hooks Not Firing","text":"<pre><code># Check hook configuration\ncat ~/.claude/settings.json | jq '.hooks'\n\n# Verify hook script exists\nls -la integrations/mcp-constraint-monitor/src/hooks/pre-tool-hook-wrapper.js\n</code></pre>"},{"location":"reference/troubleshooting/#performance-issues","title":"Performance Issues","text":""},{"location":"reference/troubleshooting/#high-memory-usage","title":"High Memory Usage","text":"<pre><code># Increase Node.js memory\nexport NODE_OPTIONS=\"--max_old_space_size=4096\"\n\n# Restart with higher limit\nNODE_OPTIONS=\"--max_old_space_size=4096\" coding --claude\n</code></pre>"},{"location":"reference/troubleshooting/#slow-processing","title":"Slow Processing","text":"<pre><code># Process with lower priority\nnice -n 19 node scripts/enhanced-transcript-monitor.js &amp;\n\n# Reduce monitoring frequency in config\n</code></pre>"},{"location":"reference/troubleshooting/#complete-reset","title":"Complete Reset","text":"<p>If installation is corrupted:</p> <pre><code># Uninstall\n./uninstall.sh\n\n# Remove all data (WARNING: loses knowledge base)\nrm -rf ~/.coding-tools/\nrm -rf integrations/memory-visualizer/node_modules\nrm -rf .data/knowledge-export/*.json\n\n# Reinstall\n./install.sh\nsource ~/.bashrc\n</code></pre>"},{"location":"reference/troubleshooting/#getting-help","title":"Getting Help","text":""},{"location":"reference/troubleshooting/#diagnostic-information","title":"Diagnostic Information","text":"<pre><code># Collect diagnostics\necho \"=== System Info ===\" &gt; diagnostics.txt\nuname -a &gt;&gt; diagnostics.txt\nnode --version &gt;&gt; diagnostics.txt\necho \"PWD: $(pwd)\" &gt;&gt; diagnostics.txt\n\necho -e \"\\n=== Environment ===\" &gt;&gt; diagnostics.txt\nenv | grep -E \"(USER|CODING|LSL)\" &gt;&gt; diagnostics.txt\n\necho -e \"\\n=== Configuration ===\" &gt;&gt; diagnostics.txt\ncat .specstory/lsl-config.json 2&gt;/dev/null &gt;&gt; diagnostics.txt\n\necho \"Diagnostics collected in diagnostics.txt\"\n</code></pre>"},{"location":"reference/troubleshooting/#support-resources","title":"Support Resources","text":"<ul> <li>GitHub Issues</li> <li>Documentation</li> <li>Configuration Validator: <code>node scripts/validate-lsl-config.js</code></li> </ul>"}]}