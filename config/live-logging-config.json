{
  "semantic_analysis": {
    "models": {
      "xai": {
        "default_model": "grok-2-1212",
        "base_url": "https://api.x.ai/v1",
        "usage_endpoint": null,
        "console_url": "https://console.x.ai",
        "free_credits": 25.0,
        "default_limit": 20.0,
        "rate_limit": {
          "requests_per_second": 1,
          "requests_per_hour": 60
        }
      },
      "openai": {
        "default_model": "gpt-4o-mini",
        "base_url": "https://api.openai.com/v1",
        "usage_endpoint": null,
        "console_url": "https://platform.openai.com/usage",
        "rate_limit": {
          "requests_per_minute": 500,
          "tokens_per_minute": 30000
        }
      },
      "anthropic": {
        "default_model": "claude-3-haiku-20240307",
        "base_url": "https://api.anthropic.com/v1",
        "usage_endpoint": "https://api.anthropic.com/v1/usage",
        "console_url": "https://console.anthropic.com/settings/billing",
        "rate_limit": {
          "requests_per_minute": 60,
          "tokens_per_minute": 40000
        }
      },
      "groq": {
        "default_model": "openai/gpt-oss-20b",
        "base_url": "https://api.groq.com/openai/v1",
        "usage_endpoint": null,
        "console_url": "https://console.groq.com/settings/billing",
        "free_credits": null,
        "default_limit": null,
        "rate_limit": {
          "requests_per_second": 30,
          "requests_per_minute": 14400,
          "tokens_per_minute": 7200000
        }
      },
      "google": {
        "default_model": "gemini-1.5-flash",
        "base_url": "https://generativelanguage.googleapis.com/v1beta",
        "usage_endpoint": "https://generativelanguage.googleapis.com/v1beta/models",
        "console_url": "https://aistudio.google.com/app/apikey",
        "free_credits": null,
        "default_limit": null,
        "rate_limit": {
          "requests_per_minute": 15,
          "tokens_per_day": 1000000
        }
      }
    },
    "timeout": 10000,
    "temperature": 0.7,
    "max_tokens": 200,
    "fallback_credits": {
      "high_usage_threshold": 95,
      "conservative_estimate": 90,
      "unknown_default": 75
    }
  },
  "live_logging": {
    "session_duration": 3600000,
    "max_file_size": 1048576,
    "consolidation": {
      "enabled": true,
      "session_duration": 3600000,
      "auto_consolidate": true,
      "keep_originals": false
    },
    "transcript_monitoring": {
      "polling_interval": 5000,
      "debounce_delay": 2000,
      "max_retries": 3
    },
    "session_filter": {
      "enabled": true,
      "window_size": 5,
      "bias_strength_threshold": 0.65,
      "working_dir_weight": 0.1,
      "temporal_decay": 0.9,
      "neutrality_thresholds": {
        "path_confidence": 0.5,
        "keyword_score": 0.3,
        "embedding_similarity_diff": 0.15,
        "embedding_threshold": 0.7
      },
      "bias_confidence_discount": 0.8
    }
  },
  "embedding_classifier": {
    "enabled": true,
    "qdrant": {
      "host": "localhost",
      "port": 6333,
      "collection_name": "coding_infrastructure",
      "timeout": 5000,
      "retries": 3,
      "retry_delay": 1000,
      "index_config": {
        "vectors": {
          "size": 384,
          "distance": "Cosine"
        },
        "hnsw_config": {
          "m": 16,
          "ef_construct": 100,
          "max_indexing_threads": 2
        },
        "quantization_config": {
          "scalar": {
            "type": "int8",
            "always_ram": true
          }
        }
      }
    },
    "embedding": {
      "model": "sentence-transformers/all-MiniLM-L6-v2",
      "dimensions": 384,
      "python_timeout": 10000,
      "batch_size": 32,
      "cache_size": 1000,
      "cache_ttl": 3600000
    },
    "classification": {
      "similarity_threshold": 0.7,
      "confidence_threshold": 0.8,
      "max_response_time": 3,
      "fallback_to_semantic": true,
      "max_candidates": 10
    },
    "repository_indexing": {
      "auto_index": true,
      "index_patterns": [
        "**/*.md",
        "**/README*",
        "**/CLAUDE.md",
        "package.json",
        "src/**/*.js",
        ".spec-workflow/**/*"
      ],
      "exclude_patterns": [
        "node_modules/**",
        ".git/**",
        "*.log",
        "**/.DS_Store",
        "**/tmp/**",
        "**/temp/**"
      ],
      "chunk_size": 1000,
      "overlap": 200,
      "max_file_size": 1048576,
      "initial_index_timeout": 300000
    },
    "change_detection": {
      "enabled": true,
      "scan_interval": 30000,
      "debounce_delay": 5000,
      "significance_threshold": 0.2,
      "min_files_changed": 2,
      "doc_changes_weight": 3,
      "reindex_timeout": 30000,
      "watched_patterns": [
        "**/*.md",
        "**/README*",
        "**/CHANGELOG*",
        "**/CLAUDE.md",
        "package.json",
        "src/**/*.js",
        ".spec-workflow/**/*"
      ]
    },
    "performance": {
      "cache_embeddings": true,
      "cache_size": 1000,
      "cache_ttl": 3600000,
      "parallel_processing": true,
      "max_concurrent": 4,
      "memory_limit": 524288000,
      "gc_threshold": 0.8
    },
    "monitoring": {
      "track_performance": true,
      "log_classifications": false,
      "log_similarity_scores": false,
      "alert_on_slow_classification": true,
      "slow_classification_threshold": 5
    },
    "debug": {
      "enabled": false,
      "log_embeddings": false,
      "log_qdrant_operations": false,
      "log_change_detection": false,
      "verbose_classification": false
    }
  },
  "status_line": {
    "cache_timeout": 5000,
    "api_check_interval": 30000,
    "display": {
      "show_trajectory": true,
      "show_live_filename": true,
      "show_api_credits": true,
      "credit_thresholds": {
        "critical": 10,
        "warning": 20,
        "moderate": 80
      }
    }
  },
  "constraint_monitor": {
    "compliance_threshold": 8.0,
    "max_violations": 5
  },
  "trajectory_analysis": {
    "enabled": true,
    "inference_provider": "groq",
    "inference_model": "gpt-oss-20b",
    "fallback_provider": "openai",
    "fallback_model": "gpt-4o-mini",
    "analysis_interval": 5000,
    "smart_analysis": {
      "enabled": false,
      "only_significant_exchanges": false,
      "skip_consecutive_reads": false,
      "max_analyses_per_hour": 50
    },
    "intervention_threshold": 0.8,
    "cross_project_sync": true,
    "watchdog_integration": true,
    "state_persistence": {
      "enabled": true,
      "directory": ".specstory/trajectory",
      "files": {
        "live_state": "live-state.json",
        "session_transitions": "session-transitions.log",
        "cross_project_insights": "cross-project-insights.json"
      }
    },
    "real_time_monitoring": {
      "enabled": true,
      "update_interval": 500,
      "status_line_integration": true
    },
    "trajectory_states": {
      "exploring": { "icon": "üîçEX", "description": "Information gathering phase" },
      "on_track": { "icon": "üìàON", "description": "Productive trajectory progression" },
      "off_track": { "icon": "üìâOFF", "description": "Deviating from optimal path" },
      "implementing": { "icon": "‚öôÔ∏èIMP", "description": "Active code modification" },
      "verifying": { "icon": "‚úÖVER", "description": "Testing and validation phase" },
      "blocked": { "icon": "üö´BLK", "description": "Intervention preventing action" }
    }
  },
  "file_patterns": {
    "live_transcript": "{date}_{time}_live-transcript.md",
    "live_session": "{date}_{time}_{session_id}_live-session.md",
    "consolidated_session": "{date}_{time}_consolidated-live-session.md",
    "trajectory_analysis": "{date}_{time}_trajectory-analysis.md"
  },
  "timezone": {
    "display_timezone": "Europe/Berlin"
  },
  "api_key_env_vars": [
    "XAI_API_KEY",
    "GROQ_API_KEY",
    "ANTHROPIC_API_KEY",
    "OPENAI_API_KEY",
    "CLAUDE_API_KEY",
    "GEMINI_API_KEY",
    "ANTHROPIC_ADMIN_API_KEY",
    "OPENAI_ADMIN_API_KEY"
  ],
  "credit_checking": {
    "enabled": true,
    "cache_duration": 300000,
    "max_requests_per_hour": 12,
    "endpoints": {
      "xai": null,
      "openai": "/v1/organization/costs",
      "anthropic": "/v1/organizations/cost_report"
    }
  },
  "provider_credits": {
    "anthropic": {
      "prepaidCredits": 18,
      "description": "Set to your actual prepaid credit amount in USD (e.g., 20 for $20). Leave null to show pie symbol instead."
    },
    "openai": {
      "prepaidCredits": null,
      "description": "Set to your actual prepaid credit amount in USD. Leave null to show $X.XX spent instead of percentage."
    },
    "xai": {
      "prepaidCredits": 25,
      "description": "xAI provides $25 free credits. Adjust if you've added more."
    },
    "groq": {
      "billingType": "monthly",
      "monthlySpend": 0,
      "billingMonth": "FEB",
      "spendLimit": null,
      "autoScrape": true,
      "scrapeIntervalMinutes": 15,
      "lastScraped": null,
      "description": "Groq monthly billing. autoScrape uses Playwright to fetch spend from console.groq.com every scrapeIntervalMinutes during active sessions."
    },
    "google": {
      "prepaidCredits": null,
      "description": "Google Gemini has free tier with rate limits. No credit tracking needed."
    }
  }
}